<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>一往无前虎山行,拨开云雾见光明</title><meta name="author" content="赵东兴"><meta name="copyright" content="赵东兴"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="个人技术笔记博客">
<meta property="og:type" content="website">
<meta property="og:title" content="一往无前虎山行,拨开云雾见光明">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="一往无前虎山行,拨开云雾见光明">
<meta property="og:description" content="个人技术笔记博客">
<meta property="og:locale">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="赵东兴">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '一往无前虎山行,拨开云雾见光明',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-20 09:35:34'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="一往无前虎山行,拨开云雾见光明" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/./img/linux.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="一往无前虎山行,拨开云雾见光明"><span class="site-name">一往无前虎山行,拨开云雾见光明</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">一往无前虎山行,拨开云雾见光明</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/" title="数据库MYSQL-报错解决">数据库MYSQL-报错解决</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-20T00:56:06.000Z" title="Created 2024-08-20 08:56:06">2024-08-20</time></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7/" title="数据库MYSQL-高可用性">数据库MYSQL-高可用性</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-20T00:55:47.000Z" title="Created 2024-08-20 08:55:47">2024-08-20</time></span></div><div class="content">一、MHA高可用概述1.什么是MHAMHA (Master High Availability Manager and tools for MySQL) 是一个用于MySQL数据库的高可用性解决方案。
它提供了自动故障检测、故障切换和故障恢复功能，以确保MySQL数据库集群的高可用性和可靠性。
MHA还可以监控主从复制状态、执行自动故障切换，并通知相关的应用程序或负载均衡器，以便数据库集群能够持续稳定地运行。
总的来说，MHA是一个强大的工具集，可帮助数据库管理员简化数据库集群的管理、提高业务连续性和可用性。
2.MHA架构原理
MHA由几个组件组成，包括mha4mysql-manager、mha4mysql-node和mha4mysql-kill等工具。其中，mha4mysql-manager是主要的管理器组件，负责监控数据库集群的状态、执行故障切换和恢复操作；mha4mysql-node用于监控数据库节点的状态，并发送状态更新给mha4mysql-manager；mha4mysql-kill用于终止问题节点上的MySQL进程。
MHA采用主从复制的架构，在数据库集群中主服务器负责处 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" title="数据库MYSQL-主从复制">数据库MYSQL-主从复制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-20T00:55:34.000Z" title="Created 2024-08-20 08:55:34">2024-08-20</time></span></div><div class="content">一、主从复制架构概述
主从复制，以1台master主库机器，多台slave从库机器，通过服务自带功能，实现主从复制效果

搭建主从复制集群的基础，可以通过mha工具实现高可用，防止单节点数据库故障，影响正常业务

并且主库的数据同步在从库上，再次实现了备份对数据提供了一个保障


二、主从复制搭建部署pos值1.环境准备
目标：主库db-51更新数据，db-52与db-53两台从库机器自动同步新增数据
机器准备：db-51为master主库，内部有原本数据。db-52、db-53为slave从库，内部无数据。


注意事项:
1.主从复制时，从库需保证库中无其他数据，确保内部空间只留给主从复制同步数据
2.并且每个实例server_id需不同，否则会影响备份数据
3.binlog日志目录，需要与数据目录区分开，不能放到一起，否则也会影响备份数据
4.主库需开binlog日志，从库不可开启binlog记录

1.1 从库配置
从库配置一样，除了server_id不同

123456789101112131415161718192021222324252627282930313233343 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE/" title="数据库MYSQL-恢复数据">数据库MYSQL-恢复数据</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-20T00:55:22.000Z" title="Created 2024-08-20 08:55:22">2024-08-20</time></span></div><div class="content">全量逻辑备份与增量恢复1.数据准备123456789#创建库表数据create database stu charset utf8mb4;use stu;create table t1(id int);insert into t1 values(1),(2),(3);#查看binlog记录show binlog events in &#x27;mysql-bin.000001&#x27;;


2.全量备份2.1备份参数详解https://blog.csdn.net/weixin_39974140/article/details/114286173



参数
说明



–single-transaction
该选项在导出数据之前提交一个BEGIN SQL语句，BEGIN 不会阻塞任何应用程序且能保证导出时数据库的一致性状态,它只适用于事务存储引擎仅InnoDB


–master-data
该选项将binlog的位置和文件名追加到输出文件中；如果为1，将会输出CHANGE MASTER命令；如果为2，输出的CHANGE MASTER命令前添加注释信息。


–triggers
导出 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE/" title="数据库MYSQL-备份数据">数据库MYSQL-备份数据</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-20T00:51:40.000Z" title="Created 2024-08-20 08:51:40">2024-08-20</time></span></div><div class="content">数据库数据备份恢复概述一个互联网业务，最核心的就是数据。数据库中更是存放着用户相关的数据，更加重要。
数据丢失后会造成极大的损失，所以为了避免数据丢失，就需要对数据库中数据进行备份。
1.运维职责
备份恢复策略   （备份周期，备份工具，备份方式，数据恢复方式）
备份检查       （事务binglog日志备份，数据备份，是否备份成功）
定期恢复数据演练 （备份数据是否有问题）
数据丢失恢复     （利用现有资源，快速恢复数据）
数据迁移数据库升级

2.备份方案
逻辑备份
用于备份小量数据，备份原理是将数据库中所有东西，转化为sql语句导入文件，进行备份。恢复数据时可通过sql语句进行，建库建表插入数据等动作达到恢复数据的效果。
常用工具：mysqldump （mysql内置的一个程序）
物理备份
https://www.percona.com/software/mysql-database/percona-xtrabackup
如何选择
100G数据以下，逻辑备份没问题，服务器配置要求高
100G数据以上，建议物理备份
mysqldump备份恢复0.连接参数
-u 用户名-p  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/08/19/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-19T13:52:23.813Z" title="Created 2024-08-19 21:52:23">2024-08-19</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">赵东兴</div><div class="author-info__description">个人技术笔记博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%8D%95%E6%9C%BA%E7%BC%96%E6%8E%92/" title="容器Docker-单机编排">容器Docker-单机编排</a><time datetime="2024-08-20T01:32:01.000Z" title="Created 2024-08-20 09:32:01">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/" title="容器Docker-部署应用">容器Docker-部署应用</a><time datetime="2024-08-20T01:31:48.000Z" title="Created 2024-08-20 09:31:48">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/" title="容器Docker-镜像构建">容器Docker-镜像构建</a><time datetime="2024-08-20T01:31:29.000Z" title="Created 2024-08-20 09:31:29">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E7%BD%91%E7%BB%9C%E5%AD%98%E5%82%A8/" title="容器Docker-网络存储">容器Docker-网络存储</a><time datetime="2024-08-20T01:31:14.000Z" title="Created 2024-08-20 09:31:14">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="容器Docker-安装部署">容器Docker-安装部署</a><time datetime="2024-08-20T01:31:00.000Z" title="Created 2024-08-20 09:31:00">2024-08-20</time></div></div></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">16</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">16</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-08-20T01:35:34.286Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 赵东兴</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>