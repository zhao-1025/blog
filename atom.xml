<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一往无前虎山行,拨开云雾见光明</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2024-08-20T00:47:14.461Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>赵东兴</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>数据库mysql-SQL语句</title>
    <link href="http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MSYQL-SQL%E8%AF%AD%E5%8F%A5/"/>
    <id>http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MSYQL-SQL%E8%AF%AD%E5%8F%A5/</id>
    <published>2024-08-20T00:45:26.000Z</published>
    <updated>2024-08-20T00:47:14.461Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-数据库服务SQL语句分类"><a href="#1-数据库服务SQL语句分类" class="headerlink" title="1.数据库服务SQL语句分类"></a>1.数据库服务SQL语句分类</h1><h2 id="1-1-SQL语句是什么"><a href="#1-1-SQL语句是什么" class="headerlink" title="1.1 SQL语句是什么"></a>1.1 SQL语句是什么</h2><ul><li><p>SQL语句就是用于管理操作数据库的一种语言，可以对数据库的数据进行管理</p></li><li><p>对关系型数据库进行操作控制，<em>MySQL、Oracle、SQL Server、PostgreSQL、IBM DB2、Sybase、Microsoft Access、SQLite</em></p></li><li><p>不同的数据库，SQL语句写法会有一些小区别</p></li></ul><h2 id="1-2-SQL语句分类"><a href="#1-2-SQL语句分类" class="headerlink" title="1.2 SQL语句分类"></a>1.2 SQL语句分类</h2><p><strong>DLL数据定义语言</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-</span> DDL Data Definition <span class="keyword">Language</span>（数据定义语言）</span><br><span class="line"></span><br><span class="line">#概念介绍</span><br><span class="line">负责管理数据库的基础数据（不会对表的内容修改），比如增删库、增删表、增删索引、增删用户等；</span><br><span class="line"></span><br><span class="line">#涉及语句</span><br><span class="line"><span class="keyword">CREATE</span>（创建）、<span class="keyword">ALTER</span>（修改）、<span class="keyword">DROP</span>（删除）等；</span><br><span class="line"></span><br><span class="line">#关注人群</span><br><span class="line">运维人员和开发人员都要熟悉。</span><br><span class="line"></span><br><span class="line">#相关具体的DDL负责的操作行为，可以执行以下命令进行查看：</span><br><span class="line">mysql<span class="operator">&gt;</span> ? Data Definition;</span><br><span class="line"><span class="comment">-- 查看获取DDL语言的操作行为</span></span><br></pre></td></tr></table></figure><p><strong>DCL数据控制语言</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator">-</span> DCL Data Control <span class="keyword">Language</span>（数据控制语言）</span><br><span class="line"></span><br><span class="line">#概念介绍</span><br><span class="line">主要用来定义访问权限和安全级别</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#涉及语句</span><br><span class="line"><span class="keyword">GRANT</span>（用户授权）、<span class="keyword">REVOKE</span>（权限回收）、<span class="keyword">COMMIT</span>（提交）、<span class="keyword">ROLLBACK</span>（回滚）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#关注人群</span><br><span class="line">运维人员需要熟练</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#相关具体的DCL负责的操作行为，可以执行以下命令进行查看：</span><br><span class="line">mysql<span class="operator">&gt;</span> ? Account Management</span><br><span class="line"><span class="comment">-- 查看获取DCL语言的操作行为</span></span><br></pre></td></tr></table></figure><p><strong>DML数据操作语言</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- DML Data Manipulation Language（数据操作语言）</span><br><span class="line"></span><br><span class="line"><span class="comment">#概念介绍</span></span><br><span class="line">主要针对数据库里的表里的数据进行操作，用来定义数据库记录（数据）；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#涉及语句</span></span><br><span class="line">SELECT（查）、INSERT（增）、DELETE（删）、UPDATE（改）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关注人群</span></span><br><span class="line">开发人员要熟练，运维人员熟悉即可</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#相关具体的DML负责的操作行为，可以执行以下命令进行查看：</span></span><br><span class="line">mysql&gt; ? Data Manipulation</span><br><span class="line">-- 查看获取DML语言的操作行为</span><br></pre></td></tr></table></figure><p> <strong>DQL数据查询语言</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-DQL Data Query Language（数据查询语言）</span><br><span class="line"></span><br><span class="line"><span class="comment">#概念介绍</span></span><br><span class="line">主要用来查询记录（数据）</span><br><span class="line"></span><br><span class="line"><span class="comment">#涉及语句</span></span><br><span class="line">SELECT（查）</span><br><span class="line">基本结构是由SELECT子句，FROM子句，WHERE子句组成的查询块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关注人群</span></span><br><span class="line">运维人员和开发人员都要熟练</span><br></pre></td></tr></table></figure><h2 id="1-3-SQL文件导入方式"><a href="#1-3-SQL文件导入方式" class="headerlink" title="1.3 SQL文件导入方式"></a>1.3 SQL文件导入方式</h2><ul><li>SQL文件准备: <a href="https://github.com/datacharmer/test_db.git">https://github.com/datacharmer/test_db.git</a></li></ul><blockquote><p>SQL数据文件导入的本质,就是在这个sql文件中定义了大量sql语句，导入mysq中创建大量的库表数据等</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#准备sql文件用于测试</span></span><br><span class="line">[root@db-51 ~/test_db]#<span class="built_in">ls</span> /root</span><br><span class="line">employees.sql </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看当前库</span></span><br><span class="line">[root@db-51 ~]#mysql -uroot -p1 -e <span class="string">&quot;show databases;&quot;</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| linux              |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#sql文件导入，两种方式，一种是命令行直接导入，一种是登录mysql后在内部进行导入</span></span><br><span class="line">[root@db-51 ~/test_db]#mysql -uroot -p1 &lt;   /root/test_db/employees.sql </span><br><span class="line">[root@db-51 ~/test_db]#mysql -uroot -p1 -e <span class="string">&quot;source  /root/test_db/employees.sql;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看创建的employees库</span></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| employees          |</span><br><span class="line">| linux              |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看导入sql文件，默认创建库时的sql语句</span></span><br><span class="line">mysql&gt; show create database employees;</span><br><span class="line">+-----------+----------------------------------------------------------------------+</span><br><span class="line">| Database  | Create Database                                                      |</span><br><span class="line">+-----------+----------------------------------------------------------------------+</span><br><span class="line">| employees | CREATE DATABASE `employees` /*!40100 DEFAULT CHARACTER SET latin1 */ |</span><br><span class="line">+-----------+----------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#字段解释</span></span><br><span class="line">/*!40100  <span class="comment">#自动生成的注释符，为了让各个版本更加兼容sql语句</span></span><br><span class="line">DEFAULT CHARACTER SET latin1  <span class="comment">#创建该库时，指定的编码表为latin1</span></span><br><span class="line">latin1    <span class="comment">#字符集的一种字符格式叫做latin，指定该字符为编码表的话有中文数据时mysql会无法识别，无法显示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建某个库指定编码表为utf8支持中文读写，理解mysql内查询显示创建库的sql含义</span></span><br><span class="line">mysql&gt; create database chaoge default character <span class="built_in">set</span> utf8;</span><br><span class="line">mysql&gt; show create database chaoge;</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                 |</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br><span class="line">| chaoge   | CREATE DATABASE `chaoge` /*!40100 DEFAULT CHARACTER SET utf8 */ |</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h1 id="2-数据库服务字符编码设置"><a href="#2-数据库服务字符编码设置" class="headerlink" title="2.数据库服务字符编码设置"></a>2.数据库服务字符编码设置</h1><h2 id="2-1-字符编码作用"><a href="#2-1-字符编码作用" class="headerlink" title="2.1 字符编码作用"></a>2.1 字符编码作用</h2><p>计算机只识别二进制语言0&#x2F;1，真正与计算机交互的也只能是二进制语言，</p><p>为了更方便与计算机实现交互，使用人类语言的字符与之交互最为合适，于是就有了字符编码表</p><p>通过字符编码表做一个转换，将字符通过编码表的形式转换为二进制语言存储在计算机上，</p><p>计算机展示时也可以通过编码表将二进制转换成字符形式，展现给人类</p><p><strong>（避免中文乱码）–为什么中文会乱码</strong></p><ul><li>服务端使用的不是支持中文字符转换二进制的编码表（utf8）</li></ul><p>当使用不支持的中文编码表在计算机上存储中文字符数据时，计算机无法通过编码表正确存储对应的二进制数据</p><p>而读取中文字符时，二进制数据无法通过编码表正确转换为中文字符，所以就会显示中文乱码</p><ul><li>客户端使用非utf8编码表时，也会导致中文乱码，如xshell终端设置一个不支持中文编码表时</li></ul><p>即使服务端正确转换了中文字符，而客户端不是中文编码表，显示的字符也无法转换，就会导致乱码</p><ul><li>服务端与客户端需要编码表统一</li></ul><h2 id="2-2-常用字符编码与区别"><a href="#2-2-常用字符编码与区别" class="headerlink" title="2.2 常用字符编码与区别"></a>2.2 常用字符编码与区别</h2><blockquote><p>下方两种编码表都是可以支持中文识别的编码表</p></blockquote><ul><li>utf8:    最多存储3字节的字符，不支持表情符号</li><li>utf8mb4: 最多存储4字节的的字符，支持表情符号</li></ul><p>计算机存储最小单位是bit位，bit位代表一个二进制0&#x2F;1，</p><p>1字节&#x3D;8bit，8个二进制，最大组合为11111111，转换为人类更好识别的十进制计算，2^8次方，就是0-255种存储的二进制组合方式</p><p>3字节&#x3D;24bit，24个二进制，最大组合为24个1，转换成十进制就是16777216种组合，可以存放0-1亿多字符</p><h2 id="2-3-如何设置字符编码"><a href="#2-3-如何设置字符编码" class="headerlink" title="2.3 如何设置字符编码"></a>2.3 如何设置字符编码</h2><ul><li><p>查看数据库系统种可以设置的字符编码有什么</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show charset;</span><br></pre></td></tr></table></figure></li><li><p>查看目前mysql系统字符编码设置</p><blockquote><p>下方配置参数，server参数编码为latin1，不支持中文字符，会导致中文乱码</p><blockquote><p>正确设置: 除了filesystem，全部统一为utf8或utf8mb4</p></blockquote></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                          |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                           |</span><br><span class="line">| character_set_connection | utf8                                                           |</span><br><span class="line">| character_set_database   | latin1                                                         |</span><br><span class="line">| character_set_filesystem | binary                                                         |</span><br><span class="line">| character_set_results    | utf8                                                           |</span><br><span class="line">| character_set_server     | latin1                                                         |</span><br><span class="line">| character_set_system     | utf8                                                           |</span><br><span class="line">| character_sets_dir       | /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p>字符编码参数解释</p><table><thead><tr><th>序号</th><th>参数信息</th><th>解释说明</th></tr></thead><tbody><tr><td>01</td><td><code>character_set_client</code></td><td>用来设置客户端使用的字符集</td></tr><tr><td>02</td><td><code>character_set_connection</code></td><td>用来设置连接数据库时的字符集 如果程序中没有指明连接数据库使用的字符集类型则按照这个字符集设置。</td></tr><tr><td>03</td><td><code>character_set_database</code></td><td>用来设置默认创建数据库的编码格式 如果在创建数据库时没有设置编码格式，就按照这个格式设置。</td></tr><tr><td>04</td><td>character_set_filesystem</td><td>文件系统的编码格式，把操作系统上的文件名转化成此字符集 即把 character_set_client转换character_set_filesystem， 默认binary是不做任何转换</td></tr><tr><td>05</td><td><code>character_set_results</code></td><td>数据库给客户端返回时使用的编码格式，如果没有指明，使用服务器默认的编码格式。</td></tr><tr><td>06</td><td><code>character_set_server</code></td><td>服务器安装时指定的默认编码格式，这个变量建议由系统自己管理，不要人为定义。</td></tr><tr><td>07</td><td>character_set_system</td><td>数据库系统使用的编码格式，这个值一直是utf8 不需要设置，它是为存储系统元数据的编码格式。</td></tr><tr><td>08</td><td>character_sets_dir</td><td>这个变量是字符集安装的目录。</td></tr></tbody></table></li></ul><p><strong>1）全局调整字符编码</strong></p><ul><li>修改配置文件，添加指定服务端编码参数为utf8即可，database参数无需指定，server编码参数会关联到database</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@db-51 ~]#vim /etc/my.cnf</span><br><span class="line">[root@db-51 ~]#<span class="built_in">cat</span> /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8  <span class="comment">#添加服务端指定编码表</span></span><br><span class="line">port=3306</span><br><span class="line">user=mysql</span><br><span class="line">basedir=/app/tools/mysql</span><br><span class="line">datadir=/app/data/3306</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">log-error=/app/tools/mysql/3306_error.<span class="built_in">log</span></span><br><span class="line">[mysql]</span><br><span class="line">socket=/tmp/mysql.sock  </span><br><span class="line"></span><br><span class="line">[root@db-51 ~]#systemctl restart mysqld</span><br></pre></td></tr></table></figure><ul><li>修改后，重启服务端，再次查看数据库编码配置，server参数与databse编码变成了utf8</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%char%&#x27;;</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                          |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                           |</span><br><span class="line">| character_set_connection | utf8                                                           |</span><br><span class="line">| character_set_database   | utf8                                                           |</span><br><span class="line">| character_set_filesystem | binary                                                         |</span><br><span class="line">| character_set_results    | utf8                                                           |</span><br><span class="line">| character_set_server     | utf8                                                           |</span><br><span class="line">| character_set_system     | utf8                                                           |</span><br><span class="line">| character_sets_dir       | /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>2）局部调整字符编码</strong></p><blockquote><p>局部调整就是，创建库与表时后面指定编码表，便不会受全局编码参数影响。</p></blockquote><ul><li>当前server与database编码参数为latin</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="string">&quot;%char%&quot;</span>;</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                          |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                           |</span><br><span class="line">| character_set_connection | utf8                                                           |</span><br><span class="line">| character_set_database   | latin1                                                         |</span><br><span class="line">| character_set_filesystem | binary                                                         |</span><br><span class="line">| character_set_results    | utf8                                                           |</span><br><span class="line">| character_set_server     | latin1                                                         |</span><br><span class="line">| character_set_system     | utf8                                                           |</span><br><span class="line">| character_sets_dir       | /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br></pre></td></tr></table></figure><ul><li>创建数据库与数据表表时默认编码表都为latin</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建库</span></span><br><span class="line">mysql&gt; create database yuchao;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看创建库生成的sql语句，编码表为latin1</span></span><br><span class="line">mysql&gt; show create database yuchao;</span><br><span class="line">+----------+-------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                   |</span><br><span class="line">+----------+-------------------------------------------------------------------+</span><br><span class="line">| yuchao   | CREATE DATABASE `yuchao` /*!40100 DEFAULT CHARACTER SET latin1 */ |</span><br><span class="line">+----------+-------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建表，查看sql语句，编码表为latin1</span></span><br><span class="line">mysql&gt; create table t1(<span class="built_in">id</span> int);</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t1;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                           |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">| t1    | CREATE TABLE `t1` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1 |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>创建数据库库与数据表，局部设置字符编码</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建数据库和表，指定字符编码为utf8</span></span><br><span class="line">mysql&gt; create database yuchao1 charset utf8;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; use yuchao1</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; create table t2(<span class="built_in">id</span> int) charset utf8;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看创建的库与表，局部设置成功</span></span><br><span class="line">mysql&gt; show create database yuchao1;</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                  |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| yuchao1  | CREATE DATABASE `yuchao1` /*!40100 DEFAULT CHARACTER SET utf8 */ |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t2;</span><br><span class="line">+-------+--------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                         |</span><br><span class="line">+-------+--------------------------------------------------------------------------------------+</span><br><span class="line">| t2    | CREATE TABLE `t2` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 |</span><br><span class="line">+-------+--------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="2-4-字符编码校验码-排序规则"><a href="#2-4-字符编码校验码-排序规则" class="headerlink" title="2.4 字符编码校验码(排序规则)"></a>2.4 字符编码校验码(排序规则)</h2><p>字符编码校对规则（排序规则）：</p><p>在进行字符编码设置时，还需要设置校对规则信息，校对规则是什么？      </p><p>排序规则，就是指字符比较时按照字符编码还是直接用二进制数据比较，以及是否区分大小写。</p><p><code>主要可以根据校对规则定义或设置的不同：在查询数据信息时，影响数据信息的查询输出和排序效果；</code></p><p>其中utf8mb4字符集中，常用的排序规则有utf8mb4_unicode_ci、utf8mb4_general_ci、utf8mb4_bin：</p><p>排序规则前缀是字符集编码，中间是排序规则名称，后缀有特殊意义如下（常用的）：</p><table><thead><tr><th>排序规则后缀</th><th>解释说明</th></tr></thead><tbody><tr><td>_ci</td><td>不区分大小写，Case-insensitive的缩写</td></tr><tr><td>_cs</td><td>区分大小写，Case-sensitive的缩写</td></tr><tr><td>_ai</td><td>不区分重音，Accent-insensitive的缩写</td></tr><tr><td>_as</td><td>区分重音，Accent-sensitive的缩写</td></tr><tr><td>_bin</td><td>采用二进制方式存储数据信息</td></tr></tbody></table><p>utf8mb4_unicode_ci是基于标准Unicode来排序和比较，能够在各种语言之间精确排序。且在特殊情况下，Unicode排序规则为了能够处理特殊字符的情况，实现了略微复杂的排序算法。但是在绝大多数情况下不会发生此类复杂比较。</p><p>utf8mb4_general_ci没有实现Unicode排序规则，在遇到某些特殊字符情况下，排序结果可能不一致。但是，在绝大多数情况下，这些特殊字符的顺序并不需要那么精确。</p><p>utf8mb4_bin将字符串的每个字符用二进制数据编译存储，区分大小写，而且可以存二进制的内容。</p><p>综合来说，utf8mb4_unicode_ci比较准确，utf8mb4_general_ci速度较快。utf8mb4_unicode_ci对于特殊字符的处理，在中文、英文应用中不会使用到，除非你的应用有德语、法语、俄语等，则需要使用utf8mb4_unicode_ci，否则一般选用utf8mb4_general_ci就可以了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看数据库服务中可用的校对规则信息</span></span><br><span class="line">mysql&gt; show collation;</span><br><span class="line">+----------------------------+------------+------+----------+-------------+-----------+------------------+</span><br><span class="line">| Collation                        | Charset   | Id    | Default | Compiled | Sortlen   | Pad_attribute |</span><br><span class="line">+----------------------------+------------+------+----------+-------------+-----------+------------------+</span><br><span class="line">| utf8mb4_0900_ai_ci     | utf8mb4  | 255 | Yes        | Yes            |            0   | NO PAD            |</span><br><span class="line">| utf8mb4_0900_bin        | utf8mb4  | 309 |              | Yes            |            1   | NO PAD            |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置数据库服务中可用的校对规则信息</span></span><br><span class="line">mysql&gt; create database xiaoA charset utf8 collate utf8_general_mysql500_ci;</span><br><span class="line">mysql&gt; show create database xiaoA;</span><br><span class="line">+----------+------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                                                                                    |</span><br><span class="line">+----------+------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| xiaoA    | CREATE DATABASE `xiaoA` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_mysql500_ci */ /*!80016 DEFAULT ENCRYPTION=<span class="string">&#x27;N&#x27;</span> */ |</span><br><span class="line">+----------+------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">--- 数据库设置字符编码校对规则</span><br><span class="line"></span><br><span class="line">mysql&gt; use xiaoA;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; create table t1 (<span class="built_in">id</span> int) charset utf8 collate utf8_german2_ci;</span><br><span class="line">Query OK, 0 rows affected, 2 warnings (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t1;</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| t1    | CREATE TABLE `t1` (</span><br><span class="line">  `<span class="built_in">id</span>` int DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8_german2_ci |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line">--- 数据表设置字符编码校对规则</span><br></pre></td></tr></table></figure><p>数据库校对规则设置应用实践：</p><p>创建三个数据表，并设置相同的字符集，以及不同的字符校对规则；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1(info char(3)) charset utf8mb4 collate utf8mb4_0900_ai_ci;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t2(info char(3)) charset utf8mb4 collate utf8mb4_0900_as_cs;</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t3(info char(3)) charset utf8mb4 collate utf8mb4_bin;</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br></pre></td></tr></table></figure><p>向两个表中插入相同的数据，并进行数据查询操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"># 插入数据信息</span><br><span class="line">mysql&gt; insert into t1 values(&#x27;a&#x27;),(&#x27;A&#x27;),(&#x27;b&#x27;),(&#x27;B&#x27;),(&#x27;c&#x27;),(&#x27;C&#x27;);</span><br><span class="line">mysql&gt; insert into t2 values(&#x27;a&#x27;),(&#x27;A&#x27;),(&#x27;b&#x27;),(&#x27;B&#x27;),(&#x27;c&#x27;),(&#x27;C&#x27;);</span><br><span class="line">mysql&gt; insert into t3 values(&#x27;a&#x27;),(&#x27;A&#x27;),(&#x27;b&#x27;),(&#x27;B&#x27;),(&#x27;c&#x27;),(&#x27;C&#x27;);</span><br><span class="line"></span><br><span class="line"># 查询数据信息</span><br><span class="line">mysql&gt; select * from t1 where info=&#x27;a&#x27;;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| a    |</span><br><span class="line">| A    |</span><br><span class="line">+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t2 where info=&#x27;a&#x27;;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| a    |</span><br><span class="line">+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3 where info=&#x27;a&#x27;;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| a    |</span><br><span class="line">+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">-- 校对规则不同，查询的数据结果会区分大小写显示</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t1 order by info;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| a    |</span><br><span class="line">| A    |</span><br><span class="line">| b    |</span><br><span class="line">| B    |</span><br><span class="line">| c    |</span><br><span class="line">| C    |</span><br><span class="line">+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t2 order by info;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| a    |</span><br><span class="line">| A    |</span><br><span class="line">| b    |</span><br><span class="line">| B    |</span><br><span class="line">| c    |</span><br><span class="line">| C    |</span><br><span class="line">+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3 order by info;</span><br><span class="line">+------+</span><br><span class="line">| info |</span><br><span class="line">+------+</span><br><span class="line">| A    |</span><br><span class="line">| B    |</span><br><span class="line">| C    |</span><br><span class="line">| a    |</span><br><span class="line">| b    |</span><br><span class="line">| c    |</span><br><span class="line">+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line">-- 校对规则不同，查询的数据结果会有不同的排序效果</span><br></pre></td></tr></table></figure><h1 id="3-数据库数据类型介绍"><a href="#3-数据库数据类型介绍" class="headerlink" title="3.数据库数据类型介绍"></a>3.数据库数据类型介绍</h1><h2 id="3-1-数据类型概述"><a href="#3-1-数据类型概述" class="headerlink" title="3.1 数据类型概述"></a>3.1 数据类型概述</h2><blockquote><p>主要用于限制用户输入的信息，必须是合理的，如电话输入数值，姓名输入字符串，不可胡乱写入</p></blockquote><p>数据类型从数据存储底层机制来看，主要和内存中如何存储数据信息有关；</p><p>在数据库服务中，每一个常量、变量和参数都有数据类型，数据类型用来指定数据的存储格式、约束和有效范围</p><p>详细数据类型说明地址:<a href="https://m.php.cn/article/460317.html">https://m.php.cn/article/460317.html</a></p><h2 id="3-2-常用数据类型"><a href="#3-2-常用数据类型" class="headerlink" title="3.2 常用数据类型"></a>3.2 常用数据类型</h2><p><strong>整数类型</strong></p><table><thead><tr><th>类别</th><th>数据类型细分</th><th>差异区别</th></tr></thead><tbody><tr><td>整数类型</td><td>tinyint</td><td>占用1字节 有符号取值 -128~127 无符号取值 0 ~ 255（最大3位数）</td></tr><tr><td></td><td>int</td><td>占用4字节 有符号取值 -2147483648 ~ 2147483647 无符号取值 0 ~ 4294967295（最大10位数）</td></tr><tr><td></td><td>BIGINT</td><td>占用8字节 …  0~2^64-1（最大20位数）</td></tr></tbody></table><p><strong>字符串类型</strong></p><table><thead><tr><th>类别</th><th>数据类型细分</th><th>差异区别</th></tr></thead><tbody><tr><td>字符类型</td><td>char(n)</td><td>表示定长的字符串类型，n表示可以存储字符的字节上限（n取值 0~255）</td></tr><tr><td></td><td>varchar(n)</td><td>表示变长的字符串类型，n表示可以存储字符的字节上限（n取值 0~65535）</td></tr></tbody></table><p><strong>浮点数类型</strong></p><table><thead><tr><th>类型</th><th>类型细化</th><th>说明</th></tr></thead><tbody><tr><td>浮点（数字&#x2F;小数）</td><td>float</td><td>单精度浮点数<br>一般使用方法为，float （4,1），4代表数字长度，1代表小数</td></tr><tr><td></td><td>double</td><td>双精度浮点数</td></tr><tr><td></td><td>decimal</td><td>定点数</td></tr></tbody></table><p><strong>时间类型</strong></p><table><thead><tr><th>类别</th><th>数据类型细分</th><th>差异区别</th></tr></thead><tbody><tr><td>时间类型</td><td>date</td><td>日期类型</td></tr><tr><td></td><td>time</td><td>时间类型</td></tr><tr><td></td><td>datetime</td><td>日期时间类型（1000~9999）占8字节</td></tr><tr><td></td><td>timestamp</td><td>时间戳类型（1970~2038）格林威治时间 占4字节</td></tr></tbody></table><p><strong>特殊数据类型</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>enum</td><td>枚举类型</td><td>类似于case语句判断。字段类型设置枚举类型后（初中，高中，小学），用户输入数据后类型判断是否是枚举中的某一个数据。如输入小学，判断是枚举中类型之一，允许写入。输入幼儿园，判断不是枚举中类型之一，不允许写入。</td></tr></tbody></table><h1 id="4-数据库属性约束设置"><a href="#4-数据库属性约束设置" class="headerlink" title="4.数据库属性约束设置"></a>4.数据库属性约束设置</h1><blockquote><p>约束用户输入的信息，做一个更大的限制，例如信息不可重复，信息必须写入等</p></blockquote><p>在数据库服务中进行数据存储时，类似于在一个execl表中存储数据一样，如果没有对表的字段进行约束和限制，是可以随意存储数据的；</p><p>但是，在数据表的某些字段上，是有特殊含义的，如果随意进行存储数据，会造成存储信息的混乱，因此引入了约束与属性概念；</p><p>通过数据类型设置的约束与属性，可以让数据库服务限制人类录入的数据信息，从而避免录入数据信息混乱的局面；</p><p>并且，通过数据类型的约束与属性设置，还可以避免数据信息输入的重复与输入数据信息不能为空；</p><h2 id="4-1-常用的约束定义"><a href="#4-1-常用的约束定义" class="headerlink" title="4.1 常用的约束定义"></a>4.1 常用的约束定义</h2><table><thead><tr><th>序号</th><th>约束方法</th><th>解释说明</th></tr></thead><tbody><tr><td>01</td><td>PK（primary key）</td><td>表示主键约束，非空且唯一（表中只能有一个主键），唯一标识</td></tr><tr><td>02</td><td>UK（unique key）</td><td>表示唯一约束，输入信息可以不写，写入的话不可重复，如电话号码，学号</td></tr><tr><td>03</td><td>NN（not null）</td><td>表示非空约束，输入信息可以重复，但不可以不写入，如名字</td></tr><tr><td>04</td><td>FK（foreign key）</td><td>表示外键约束，多表之间关联使用，约束能力可以通过程序代码逻辑替换</td></tr></tbody></table><h2 id="4-2-常用的属性定义"><a href="#4-2-常用的属性定义" class="headerlink" title="4.2 常用的属性定义"></a>4.2 常用的属性定义</h2><blockquote><p>辅助数据表信息的录入</p></blockquote><table><thead><tr><th>序号</th><th>属性信息</th><th>解释说明</th></tr></thead><tbody><tr><td>01</td><td>default</td><td>设定默认数据信息，可以实现自动填充<br />用户输入时某信息没有写入，但该字段下必须有信息写入，可通过默认属性可给予默认值，完善表内容</td></tr><tr><td>02</td><td>auto_increment</td><td>设定数值信息自增，可以实现数值编号自增填充（一般配合主键使用）<br />用于配合主键使用，主键字段下方信息都是非空且唯一，为了防止多用户输入信息时经常导致冲突，所有就根据用户在注册信息时，请求到达数据库时，根据请求对该字段进行一个自动填充，保证了添加主键的字段属性非空且唯一。</td></tr><tr><td>02</td><td>comment</td><td>设定数据注释信息<br />用于对表中字段注释说明，当数据表字段较多，无法识别某字段下方信息具体的含义，如name字段信息，是个人姓名还是网络昵称或是亲属名称。</td></tr><tr><td>03</td><td>unsigned</td><td>设定数值信息非负，可以实现数值信息列不能出现负数信息<br />用于做数值统计，例如做人口统计统计人数时，写入的信息不能非负数。</td></tr></tbody></table><h1 id="5-数据库DDL定义语句"><a href="#5-数据库DDL定义语句" class="headerlink" title="5.数据库DDL定义语句"></a>5.数据库DDL定义语句</h1><p>DDL数据库定义语句主要针对数据库内部对象，对库表，创建，修改，删除等操作</p><h2 id="5-1-定义数据库语句"><a href="#5-1-定义数据库语句" class="headerlink" title="5.1 定义数据库语句"></a>5.1 定义数据库语句</h2><blockquote><p>对库的创建，属性，增改查</p><p>库的属性： 库名，排序规则，字符编码</p></blockquote><h3 id="1）定义库规范"><a href="#1）定义库规范" class="headerlink" title="1）定义库规范"></a>1）定义库规范</h3><ol><li><p>库名不得以数字开头</p></li><li><p>库名和业务有关，见名知意</p></li><li><p>库名不得有大写字母，都是为了多系统平台的兼容性</p></li><li><p>创建数据库需要有指定的字符集，建议设定默认规则就是utf8mb4</p></li><li><p>生产环境下，禁用普通用户的drop database权限</p></li></ol><h3 id="2）查看数据库"><a href="#2）查看数据库" class="headerlink" title="2）查看数据库"></a>2）查看数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看所有数据库</span></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |    <span class="comment"># 系统自带库，存储数据库内置信息</span></span><br><span class="line">| mysql              |    <span class="comment"># 自带库，存储用户信息，授权等</span></span><br><span class="line">| performance_schema |    <span class="comment"># 存储和性能相关的数据</span></span><br><span class="line">+--------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看show create帮助信息</span></span><br><span class="line"><span class="built_in">help</span> show create database</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看建库sql语句</span></span><br><span class="line">show create database 库名;</span><br><span class="line">show create database 库名;</span><br></pre></td></tr></table></figure><h3 id="4）创建数据库"><a href="#4）创建数据库" class="headerlink" title="4）创建数据库"></a>4）创建数据库</h3><ul><li><strong>直接创建数据库</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database yu charset utf8;</span><br><span class="line">create database yu charset utf8mb4;</span><br></pre></td></tr></table></figure><ul><li><strong>判断同名数据库是否存在，不存在则创建</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database  <span class="keyword">if</span> not exists kings default charset utf8mb4 ;</span><br></pre></td></tr></table></figure><ul><li><strong>查询字符编码与排序规则相关信息</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">0.查看当前数据库全局字符编码配置</span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.查看数据库所支持的字符编码有哪些</span><br><span class="line">mysql&gt; show character <span class="built_in">set</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.查看字符编码支持的排序规则</span><br><span class="line">mysql&gt; show collation;</span><br><span class="line">  排序规则名称              哪个字符编码支持     默认值跟随字符编码        所占字节</span><br><span class="line">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class="line">| Collation                | Charset  | Id  | Default | Compiled | Sortlen |</span><br><span class="line">| utf8_general_ci          | utf8     |  33 | Yes     | Yes      |       1 |</span><br><span class="line">| utf8mb4_general_ci       | utf8mb4  |  45 | Yes     | Yes      |       1 |</span><br></pre></td></tr></table></figure><ul><li><strong>不指定具体字符编码与校验规则创建数据库</strong></li></ul><blockquote><p>不指定字符编码，会跟随全局字符编码设置</p><p>不指定校验规则，会根据字符编码的默认值设置</p><p>5.7版创建数据库后，查看创建库sql语句，不显示校验规则信息</p><p>5.8版创建数据库后，查看创建库sql语句，会显示校验规则信息</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">0.当前系统全局字符编码配置</span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                          |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                           |</span><br><span class="line">| character_set_connection | utf8                                                           |</span><br><span class="line">| character_set_database   | utf8mb4                                                        |</span><br><span class="line">| character_set_filesystem | binary                                                         |</span><br><span class="line">| character_set_results    | utf8                                                           |</span><br><span class="line">| character_set_server     | utf8mb4                                                        |</span><br><span class="line">| character_set_system     | utf8                                                           |</span><br><span class="line">| character_sets_dir       | /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.创建数据库，不指定字符编码与校验码</span><br><span class="line">mysql&gt; create database yu;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.当前使用的时5.7版本，无法通过命令行查询排序规则，只能通过图形化查询排序规则</span><br></pre></td></tr></table></figure><p>不指定排序规则与字符集，会跟随数据库全局字符配置与默认排序规则设置</p><p><img src="/image-20240601180342632.png" alt="image-20240601180342632"></p><ul><li><strong>指定字符集与排序规则创建数据库</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0.指定字符编码与排序规则创建数据库</span><br><span class="line">mysql&gt; create database yu2 charset utf8mb4 collate utf8mb4_bin;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.查询库的新字符编码与排序规则</span><br></pre></td></tr></table></figure><p><img src="/image-20240601181257930.png" alt="image-20240601181257930"></p><h3 id="5）修改数据库"><a href="#5）修改数据库" class="headerlink" title="5）修改数据库"></a>5）修改数据库</h3><ul><li><strong>修改数据库字符编码与排序规则</strong></li></ul><blockquote><p>语法：<br>ALTER  DATABASE 库名  CHARSET 新的字符集</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前库字符集为utf8mb4</span></span><br><span class="line">show create database yu;</span><br><span class="line">mysql&gt; show create database yu;</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                |</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">| yu       | CREATE DATABASE `yu` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ |</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改字符集为utf8</span></span><br><span class="line">mysql&gt; alter database yu charset utf8;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create database yu;</span><br><span class="line">+----------+-------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                             |</span><br><span class="line">+----------+-------------------------------------------------------------+</span><br><span class="line">| yu       | CREATE DATABASE `yu` /*!40100 DEFAULT CHARACTER SET utf8 */ |</span><br><span class="line">+----------+-------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li><strong>修改数据库名字</strong></li></ul><p>&#x3D;&#x3D;不支持直接修改，会影响数据库内数据，必须修改可以创建新库名，再将库中数据备份，导入新库即可&#x3D;&#x3D;</p><h2 id="5-2-定义数据表语句"><a href="#5-2-定义数据表语句" class="headerlink" title="5.2 定义数据表语句"></a>5.2 定义数据表语句</h2><blockquote><p>主要对数据表结构的增删改查</p><blockquote><p>数据表结构：数据表名，字段列属性(字段名，数据类型，约束属性设置), 数据表属性(引擎，字符编码，排序规则)</p></blockquote></blockquote><h3 id="1）定义表规范"><a href="#1）定义表规范" class="headerlink" title="1）定义表规范"></a>1）定义表规范</h3><ul><li>1.表名的规范<ul><li>不得数字开</li><li>见名知意，表和业务有关，参考wordpress等数据库命名规范</li><li>不得大写字母</li><li>别超过18个字符</li><li>别是mysql默认关键字</li></ul></li><li><ol start="2"><li>默认存储引擎是innodb</li></ol></li><li><ol start="3"><li>5.7之后，数据表字符集，默认utf8mb4</li></ol></li><li><ol start="4"><li>数据表的字段（列）也和业务有关，字符别超过18个</li></ol></li><li><ol start="5"><li>数据表的字段（列）要选择合适的、足够容量、省磁盘空间的数据类型</li></ol></li><li><ol start="6"><li>数据表的字段（列）建议都not null</li></ol></li><li><ol start="7"><li>数据表的字段（列）建议都要有注释</li></ol></li><li><ol start="8"><li>数据表的字段（列） 每张数据表都建议加主键</li></ol></li><li><ol start="9"><li>针对not null的列，一般给与默认值</li></ol></li><li><ol start="10"><li>给每张表添加注释</li></ol></li></ul><h3 id="2）修改表规范"><a href="#2）修改表规范" class="headerlink" title="2）修改表规范"></a>2）修改表规范</h3><ol><li>添加数据表的字段（列），建议用追加方式</li><li>修改列的属性，建议用modify语句</li><li>修改表的属性，建议在业务不繁忙的时候修改</li></ol><h3 id="3）创建数据表"><a href="#3）创建数据表" class="headerlink" title="3）创建数据表"></a>3）创建数据表</h3><blockquote><ul><li>图形化工具创建表</li><li>根据下方sql信息使用图形化创建表</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `students` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">  `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">  `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">  `address` enum(<span class="string">&#x27;北京&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,<span class="string">&#x27;云南&#x27;</span>,<span class="string">&#x27;江苏&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;省份&#x27;</span>,</span><br><span class="line">  `intime` datetime NOT NULL COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">  `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br></pre></td></tr></table></figure><ul><li>图形化创建如下</li><li>创建之后，可以在图形化中，写入数据测试，验证字段的类型限制，约束限制，属性信息设置</li></ul><p><img src="/image-20240601200415554.png" alt="image-20240601200415554"></p><blockquote><p>手写sql语句创建数据表，并且插入数据查看</p><p>第一种语法：</p><p>create table  库.表(字段1  字段约束属性，字段2 字段约束属性);</p><p>第二种语法：</p><p>use  库;</p><p>create table  表(字段1  字段约束属性，字段2 字段约束属性);</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `stu2` (</span><br><span class="line">    -&gt;   `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">    -&gt;   `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">    -&gt;   `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">    -&gt;   `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">    -&gt;   `address` varchar(255) NOT NULL COMMENT <span class="string">&#x27;居住地址&#x27;</span>,</span><br><span class="line">    -&gt;   `intime` datetime NOT NULL DEFAULT now()   COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">    -&gt;   `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">    -&gt;   PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">    -&gt; ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看数据表结构信息</span></span><br><span class="line">mysql&gt; desc stu2;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#根据数据表结构插入数据</span></span><br><span class="line"><span class="comment">#完整的定义每个字段插入数据</span></span><br><span class="line">mysql&gt; insert into stu2(<span class="built_in">id</span>,name,age,gender,address,intime,phone) values(1,<span class="string">&#x27;赵东兴&#x27;</span>,23,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;内蒙古包头市&#x27;</span>,now(),15598001352);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"><span class="comment">#查看数据表信息</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu2;</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address            | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古包头市       | 2024-06-01 20:20:26 | 15598001352 |</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#不定义id与intime字段写入数据，id不输入可通过主键实现自增，intime不输入可通过默认值时间变量实现自动添加</span></span><br><span class="line">mysql&gt; insert into stu2(name,age,gender,address,phone) values(<span class="string">&#x27;黄牛&#x27;</span>,21,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;内蒙古包头市&#x27;</span>,16666666666);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"><span class="comment">#查看数据表信息</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu2;</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address            | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古包头市       | 2024-06-01 20:20:26 | 15598001352 |</span><br><span class="line">|  2 | 黄牛      |  21 | 男     | 内蒙古包头市       | 2024-06-01 20:28:47 | 16666666666 |</span><br><span class="line">+----+-----------+-----+--------+--------------------+---------------------+-------------+</span><br></pre></td></tr></table></figure><h3 id="4）复制数据表"><a href="#4）复制数据表" class="headerlink" title="4）复制数据表"></a>4）复制数据表</h3><blockquote><p>复制某数据表结构，生成另一张新数据表</p><blockquote><p>需求：复制上面的stu2表，生成stu3表，要求数据表结构相同</p></blockquote></blockquote><ul><li>方法一，拿到该表的建表sql语句，将数据表名修改即可</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">1.查询stu2表的建表语句</span><br><span class="line">mysql&gt; show create table stu2;</span><br><span class="line">-----------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                 </span><br><span class="line">| stu2  | CREATE TABLE `stu2` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">  `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">  `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">  `address` varchar(255) NOT NULL COMMENT <span class="string">&#x27;居住地址&#x27;</span>,</span><br><span class="line">  `intime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">  `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4                            |</span><br><span class="line"></span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.修改sql语句表名，直接创建即可</span><br><span class="line">mysql&gt; CREATE TABLE `stu3` (</span><br><span class="line">    -&gt;   `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">    -&gt;   `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">    -&gt;   `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">    -&gt;   `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">    -&gt;   `address` varchar(255) NOT NULL COMMENT <span class="string">&#x27;居住地址&#x27;</span>,</span><br><span class="line">    -&gt;   `intime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">    -&gt;   `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">    -&gt;   PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">    -&gt; ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4</span><br><span class="line">    -&gt; ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.查看stu3表结构</span><br><span class="line">mysql&gt; desc stu3;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br></pre></td></tr></table></figure><ul><li>方法二，使用特有的复制表sql语句生成新数据表，保留原表结构</li></ul><blockquote><p>语法： create table  要生成的数据表（新的）   like   要复制的数据表（旧的）</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.特有的复制生成新表的sql语句</span><br><span class="line">mysql&gt; create table stu4 like stu2;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">2.查看表结构</span><br><span class="line">mysql&gt; desc stu4;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><h2 id="5-3-修改表结构语句"><a href="#5-3-修改表结构语句" class="headerlink" title="5.3 修改表结构语句"></a>5.3 修改表结构语句</h2><h3 id="1）语法概述"><a href="#1）语法概述" class="headerlink" title="1）语法概述"></a>1）语法概述</h3><ul><li><strong>语法</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE  表名  具体的动作 </span><br></pre></td></tr></table></figure><ul><li><strong>添加新字段</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE  表名  ADD</span><br></pre></td></tr></table></figure><ul><li><strong>指定在第一个列添加新字段</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER  TABLE  表  ADD COLUMN  字段名  数据类型  约束条件 注释  first;</span><br></pre></td></tr></table></figure><ul><li><strong>指定在某个字段后添加新字段</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE  表  ADD  COLUMN  字段 数据类型 约束 注释   AFTER  哪个字段后添加；</span><br></pre></td></tr></table></figure><ul><li><strong>修改字段结构</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE  表名  change</span><br><span class="line"></span><br><span class="line">ALTER TABLE  表名  modify</span><br></pre></td></tr></table></figure><ul><li><strong>删除字段</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE  表名  drop  字段名</span><br></pre></td></tr></table></figure><h3 id="2）添加字段属性"><a href="#2）添加字段属性" class="headerlink" title="2）添加字段属性"></a>2）添加字段属性</h3><blockquote><p>使用入如下stu1数据表结构练习</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;   show create table stu1;</span><br><span class="line">| Table | Create Table                                                                                 </span><br><span class="line">| stu1  | CREATE TABLE `stu1` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">  `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">  `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">  `address` varchar(255) NOT NULL COMMENT <span class="string">&#x27;居住地址&#x27;</span>,</span><br><span class="line">  `intime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">  `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><p><strong>指定第一列最前面添加字段</strong></p><blockquote><p>语法:</p><p>alter table 表名 add column 新字段名 字段类型  约束条件  字段属性默认值注释    first</p></blockquote><ul><li>添加身高字段，字段类型–不超过3位数只有一位小数</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############语法说明##################</span></span><br><span class="line"><span class="comment">#alter table stu1  #修改stu1表</span></span><br><span class="line"><span class="comment">#add column height #添加height字段</span></span><br><span class="line"><span class="comment">#float(4,1)        #字段类型，限制用户写入，浮点数float(4,1)，代表整数长度为4，小数长度为1</span></span><br><span class="line"><span class="comment">#default null      #字段属性，辅助信息写入，不写身高信息，默认就为空字符串</span></span><br><span class="line"><span class="comment">#comment           #字段属性，辅助信息写入，添加注释信息</span></span><br><span class="line"><span class="comment">#first             #指定第一列添加字段</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改添加height字段</span></span><br><span class="line">mysql&gt; alter table stu1 add column height <span class="built_in">float</span>(4,1) default null comment <span class="string">&#x27;学生身高&#x27;</span> first;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看表结构字段信息</span></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| height  | <span class="built_in">float</span>(4,1)        | YES  |     | NULL              |                |</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">######################插入数据验证####################</span></span><br><span class="line"><span class="comment">#id与intime字段无需写入数据，默认会添加相关信息。指定height,name,age,gender,address,phone字段，插入数据。</span></span><br><span class="line">mysql&gt; insert into stu1(height,name,age,gender,address,phone) values(175,<span class="string">&#x27;赵&#x27;</span>,23,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;内蒙古&#x27;</span>,15598001352);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看数据表数据</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+--------+----+------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| height | <span class="built_in">id</span> | name | age | gender | address   | intime              | phone       |</span><br><span class="line">+--------+----+------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  175.0 |  1  | 赵   |  23 | 男     | 内蒙古    | 2024-06-02 11:15:32 | 15598001352 |</span><br></pre></td></tr></table></figure><ul><li>添加–学校字段，字段约束条件–不能为空,字段属性添加默认值–猿来教育，字段属性添加注释–学校</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####################添加字段查看#####################</span></span><br><span class="line">mysql&gt; alter table stu1 add column school char(20) not null default <span class="string">&#x27;猿来教育&#x27;</span> comment <span class="string">&#x27;学校&#x27;</span> first; </span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;                                                                                       </span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| school  | char(20)       | NO   |     | 猿来教育          |                |</span><br><span class="line">| height  | <span class="built_in">float</span>(4,1)        | YES  |     | NULL              |                |</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">9 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">########################插入数据查看###################</span></span><br><span class="line"><span class="comment">#只插入，限制不能为空的字段数据，可以为空的都跟随默认值</span></span><br><span class="line">mysql&gt; insert into stu1(name,gender,address,phone) value(<span class="string">&#x27;王&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;内蒙古&#x27;</span>,11011011011);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#school默认值猿来教育，height默认值空，id值自增，age默认值0，initinme值now()</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+--------------+--------+----+------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| school       | height | <span class="built_in">id</span> | name | age | gender | address   | intime              | phone       |</span><br><span class="line">+--------------+--------+----+------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| 猿来教育     |   NULL |  1 | 王   |   0 | 男     | 内蒙古    | 2024-06-02 11:33:22 | 11011011011 |</span><br><span class="line">+--------------+--------+----+------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>指定某字段后添加字段</strong></p><blockquote><p>语法:</p><p>alter table 表名 add column 新字段名 字段类型  约束条件  字段属性默认值注释    after  目标字段名（插入目标后）      </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| school  | varchar(20)       | NO   |     | 猿来教育          |                |</span><br><span class="line">| height  | float(4,1)        | YES  |     | NULL              |                |</span><br><span class="line">| id      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(&#x27;男&#x27;,&#x27;女&#x27;)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br></pre></td></tr></table></figure><ul><li>address字段前添加爱好字段，字段类型–字符串限制20长度,字段约束–不能为空，字段属性–注释爱好</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###################添加字段查看#######################</span></span><br><span class="line">mysql&gt; alter table stu1 add column hobby char(20) not null comment <span class="string">&#x27;爱好&#x27;</span> after gender;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| school  | varchar(20)       | NO   |     | 猿来教育          |                |</span><br><span class="line">| height  | <span class="built_in">float</span>(4,1)        | YES  |     | NULL              |                |</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| hobby   | char(20)          | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">10 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####################插入数据查看#####################</span></span><br><span class="line">mysql&gt; insert into stu1(name,gender,hobby,address,phone) value(<span class="string">&#x27;黄牛&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;打游戏&#x27;</span>,<span class="string">&#x27;澳门&#x27;</span>,10010010011);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>这里id自增有个bug，和删除数据表有关系，没有清空id记录</p><p><img src="/image-20240602115703778.png" alt="image-20240602115703778"></p><h3 id="3）删除字段"><a href="#3）删除字段" class="headerlink" title="3）删除字段"></a>3）删除字段</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| school  | varchar(20)       | NO   |     | 猿来教育          |                |</span><br><span class="line">| height  | <span class="built_in">float</span>(4,1)        | YES  |     | NULL              |                |</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| hobby   | char(20)          | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">10 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><ul><li>删除字段school，height，hobby</li></ul><blockquote><p>语法:</p><p>alter table 表名 drop 字段名;</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############删除查看#################</span></span><br><span class="line">mysql&gt; alter table stu1 drop school;</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table stu1 drop hobby;</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table stu1 drop height;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="4）修改字段属性"><a href="#4）修改字段属性" class="headerlink" title="4）修改字段属性"></a>4）修改字段属性</h3><blockquote><p>:warning:注意：由于不同类型的数据在机器中的存储方式及长度并不相同，修改数据类型可能会影响数据表中已有的数据记录，因此，当数据表中已经有数据时，不要轻易修改数据类型</p></blockquote><ul><li><p>两种语法</p><ul><li>change: 对某个字段重新定义，字段名，和数据类型约束条件及属性</li><li>modity: 对某个字段重新定义，数据类型约束条件及属性</li></ul></li><li><p>两者区别：change比modity多一个功能，可以重新定义字段名</p></li></ul><p><strong>change关键字使用</strong></p><blockquote><p>语法：</p><p>alter table 表名 change 原字段名 新字段名 新数据类型 （更改字段名并设置新数据类型与属性）</p><p>alter table 表名 change 原字段名 原字段名 新数据类型 （对原字段设置新数据类型与属性）</p><p>alter table 表名 change 原字段名 新字段名 原数据类型 （只对字段名做修改）</p></blockquote><ul><li><strong>使用如下stu数据表进行练习</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#################字段属性####################</span></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##################建表sql###################</span></span><br><span class="line">mysql&gt; show create table stu;</span><br><span class="line">| Table | Create Table                                                                                 </span><br><span class="line">| stu   | CREATE TABLE `stu` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` varchar(64) NOT NULL COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">  `age` tinyint(3) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">  `gender` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">  `address` varchar(255) NOT NULL COMMENT <span class="string">&#x27;居住地址&#x27;</span>,</span><br><span class="line">  `intime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">  `phone` char(11) NOT NULL COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4                            |</span><br><span class="line"></span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>:one:<strong>更改字段名并对如下字段属性进行修改</strong></p><ul><li>name：字段名—name0，默认值—佚名 ， 数据类型—char（10），注释—不添加</li><li>age     ：字段名—age0， 约束—允许为空， 注释—不添加</li><li>gender  ：字段名—gender0,  默认值—男， 注释—不添加</li><li>新字段名后添加新字段属性即可</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########更改字段名及修改字段属性###########</span></span><br><span class="line">mysql&gt; alter table stu change name name0 char(15) not null default <span class="string">&#x27;佚名&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; alter table stu change age age0 tinyint(3) not null;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; alter table stu change gender gender0 enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) not null default <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure><p>:two:<strong>对原字段属性进行修改</strong></p><ul><li>address ：约束—允许为空</li><li>保持字段名不变即可，后方添加新的字段属性</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########只修改字段属性###########</span></span><br><span class="line">mysql&gt; alter table stu change address address varchar(255) null default <span class="string">&#x27;内蒙古&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure><p><strong>:three:只修改字段名</strong></p><ul><li>phone：字段名—phone0</li><li>只修改字段名，在新字段名后方，添加原字段的全部属性即可。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########只修改字段名###########</span></span><br><span class="line">mysql&gt; alter table stu change phone phone0 char(11) not null;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure><p>:four:<strong>查看新数据表结构插入数据验证</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#新数据表字段及属性</span></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name0   | char(15)          | NO   |     | 佚名              |                |</span><br><span class="line">| age0    | tinyint(3)        | NO   |     | NULL              |                |</span><br><span class="line">| gender0 | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | 男                |                |</span><br><span class="line">| address | varchar(255)      | YES  |     | 内蒙古           |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone0  | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#插入数据</span></span><br><span class="line">mysql&gt; insert into  student.stu(age0,phone0) value(18,15598001352);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看数据</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu;</span><br><span class="line">+----+--------+------+---------+---------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name0  | age0 | gender0 | address | intime              | phone0      |</span><br><span class="line">+----+--------+------+---------+---------+---------------------+-------------+</span><br><span class="line">|  1 | 佚名   |   18 | 男      | 内蒙古   | 2024-06-02 16:09:18 | 15598001352 |</span><br><span class="line">+----+--------+------+---------+---------+---------------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>modify关键字使用</strong></p><blockquote><p>语法：</p><p>alter table 表名 modify 原字段名 新数据类型</p><p>motify只对字段修改属性，并不修改字段名</p></blockquote><ul><li>对如下stu数据表中address字段，约束条件yes null&#x3D;&#x3D;&#x3D;改为no null ， 并设置注释信息&#x3D;&#x3D;&#x3D;地址</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create table stu;</span><br><span class="line">CREATE TABLE `stu` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name0` char(15) NOT NULL DEFAULT <span class="string">&#x27;佚名&#x27;</span>,</span><br><span class="line">  `age0` tinyint(3) NOT NULL,</span><br><span class="line">  `gender0` enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) NOT NULL DEFAULT <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">  `address` varchar(255) DEFAULT <span class="string">&#x27;内蒙古&#x27;</span>,</span><br><span class="line">  `intime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">  `phone0` char(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4            |</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name0   | char(15)          | NO   |     | 佚名              |                |</span><br><span class="line">| age0    | tinyint(3)        | NO   |     | NULL              |                |</span><br><span class="line">| gender0 | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | 男                |                |</span><br><span class="line">| address | varchar(255)      | YES  |     | 内蒙古              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone0  | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><ul><li>进行修改adress字段属性，注意modify也是重新定义新属性，不仅是单独修改某个属性，所以在修改时添加上原有属性</li><li>下面有个测试的bug，一个字段为允许为空时，且下方有数据时，无法修改为不允许为空。解决方法，给该字段下添加数据，方可设置。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改address，允许为空约束，修改为不允许为空</span></span><br><span class="line">mysql&gt; alter table student.stu modify address varchar(255) not null default <span class="string">&#x27;内蒙古&#x27;</span> comment <span class="string">&#x27;地址&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看数据表结构</span></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name0   | char(15)          | NO   |     | 佚名              |                |</span><br><span class="line">| age0    | tinyint(3)        | NO   |     | NULL              |                |</span><br><span class="line">| gender0 | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | 男                |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | 内蒙古            |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone0  | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5）修改表其它属性"><a href="#5）修改表其它属性" class="headerlink" title="5）修改表其它属性"></a>5）修改表其它属性</h3><p><strong>修改表名</strong></p><blockquote><p>语法：</p><p>alter table 旧表名 rename to 新表名</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改表名</span></span><br><span class="line">mysql&gt; alter table stu1 rename stu;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#数据还存在</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu;</span><br><span class="line">+----+--------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name   | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+--------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  3 | 王     |   0 | 男     | 内蒙古    | 2024-06-02 11:33:22 | 11011011011 |</span><br><span class="line">|  4 | 黄牛   |   0 | 女     | 澳门      | 2024-06-02 11:56:03 | 10010010011 |</span><br><span class="line">+----+--------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>修改数据库引擎</strong></p><blockquote><p>语法:</p><p>alter table 表名 engine&#x3D;新引擎</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############创建数据表############</span></span><br><span class="line">create table t1(<span class="built_in">id</span> int) engine=MYISAM;</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; show create table t1;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                            |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">| t1    | CREATE TABLE `t1` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##############修改查看###############</span></span><br><span class="line">mysql&gt; alter table t1 engine=innodb;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t1;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                            |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">| t1    | CREATE TABLE `t1` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>修改字符编码</strong></p><blockquote><p>语法：</p><p>alter table 表名 charset&#x3D;新字符编码</p></blockquote><ul><li><p>如下修改有缺点，对一个已有数据的数据表来说，修改了字符编码后，只能对以后的新数据按照新字符编码存储数据</p><p>以前的数据还是之前的字符编码数据</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 charset=utf8;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t1;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                           |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">| t1    | CREATE TABLE `t1` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8|</span><br><span class="line">+-------+----------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>还有一种方法可以执行之前的数据表数据也修改为新字符编码的格式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">·锁表逻辑导出数据（例如：mysqldump）</span><br><span class="line">·重新创建数据空表（设置目标字符集）</span><br><span class="line">·导入备份数据信息</span><br><span class="line">-- 严谨的方法，可以影响之后存储的数据，也会修改之前存储的数据</span><br><span class="line">-- 字符集转换是可以的，但是必须保证修改后的字符集是修改前的严格超集（包含）</span><br></pre></td></tr></table></figure><h1 id="6-数据库DML操作语言"><a href="#6-数据库DML操作语言" class="headerlink" title="6.数据库DML操作语言"></a>6.数据库DML操作语言</h1><ul><li><p>开发熟练，运维熟悉即可</p></li><li><p>主要对数据表内数据进行操作，增删改查</p></li></ul><h2 id="6-1-数据表增加数据"><a href="#6-1-数据表增加数据" class="headerlink" title="6.1 数据表增加数据"></a>6.1 数据表增加数据</h2><blockquote><p>insert语句语法：</p><p>insert into 数据表名(指定字段) value(字段所对应的数据); #按照指定字段对应位置插入数据</p><blockquote><p>:warning:注意中文数据需要用引号嵌套，否则无法识别</p></blockquote></blockquote><ul><li>对如下数据表进行操作</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field   | Type              | Null | Key | Default           | Extra          |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>      | int(11)           | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name    | varchar(64)       | NO   |     | NULL              |                |</span><br><span class="line">| age     | tinyint(3)        | NO   |     | 0                 |                |</span><br><span class="line">| gender  | enum(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)   | NO   |     | NULL              |                |</span><br><span class="line">| address | varchar(255)      | NO   |     | NULL              |                |</span><br><span class="line">| intime  | datetime          | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone   | char(11)          | NO   |     | NULL              |                |</span><br><span class="line">+---------+-------------------+------+-----+-------------------+----------------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><h3 id="1）完整字段插入"><a href="#1）完整字段插入" class="headerlink" title="1）完整字段插入"></a>1）完整字段插入</h3><ul><li>指定完整字段名，插入每个字段对应的数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into  student.stu1(<span class="built_in">id</span>,name,age,gender,address,intime,phone) value(1,<span class="string">&#x27;赵东兴&#x27;</span>,23,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;内 蒙古&#x27;</span>,now(),15598001352);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352 |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="2）部分字段插入"><a href="#2）部分字段插入" class="headerlink" title="2）部分字段插入"></a>2）部分字段插入</h3><ul><li>指定部分字段名，插入对应字段的数据</li><li>某些字段，可通过属性设置辅助用户输入信息，不写入数据会跟随字段属性，写入设置好的默认值</li><li>如上方测试的stu1数据表中，id字段为主键自增，age设置了默认值属性，intime也设置了默认值时间变量，不对其字段插入数据也可以</li><li>但是某些不允许为空，无默认值属性的字段，必须在字段下写入对应数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu1(name,gender,address,phone) value(<span class="string">&#x27;王雨萌&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;未知&#x27;</span>,<span class="string">&#x27;未知&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352 |</span><br><span class="line">|  2 | 王雨萌    |   0 | 女     | 未知      | 2024-06-02 18:34:23 | 未知        |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="3）不指定字段插入"><a href="#3）不指定字段插入" class="headerlink" title="3）不指定字段插入"></a>3）不指定字段插入</h3><ul><li>不指定字段名，也可以插入数据</li><li>但是必须得按照每个字段的顺序，写入完整的对应每个字段的数据。即使某字段有默认值也不行，必须写入全部字段对应的数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu1 value(3,<span class="string">&#x27;张岩&#x27;</span>,23,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;未知&#x27;</span>,now(),<span class="string">&#x27;未知&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352 |</span><br><span class="line">|  2 | 王雨萌    |   0 | 女     | 未知      | 2024-06-02 18:34:23 | 未知        |</span><br><span class="line">|  3 | 张岩      |  23 | 女     | 未知      | 2024-06-02 18:42:13 | 未知        |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="4）插入多条数据"><a href="#4）插入多条数据" class="headerlink" title="4）插入多条数据"></a>4）插入多条数据</h3><ul><li>可以根据指定字段，value定义多个值，通过逗号分割，插入多条数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu1(name,gender,address,phone) value(<span class="string">&#x27;王彤&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;内蒙古&#x27;</span>,<span class="string">&#x27;未知&#x27;</span>),(<span class="string">&#x27;师璐&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;. Query OK, 3 rows affected (0.01 sec).&#x27;</span>);</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352 |</span><br><span class="line">|  2 | 王雨萌    |   0 | 女     | 未知      | 2024-06-02 18:34:23 | 未知        |</span><br><span class="line">|  3 | 张岩      |  23 | 女     | 未知      | 2024-06-02 18:42:13 | 未知        |</span><br><span class="line">|  4 | 王彤      |   0 | 女     | 内蒙古    | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">|  5 | 师璐      |   0 | 女     | 经纬      | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">|  6 | 曹可文    |   0 | 女     | 四中      | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="5）shell插入多条数据"><a href="#5）shell插入多条数据" class="headerlink" title="5）shell插入多条数据"></a>5）<em>shell</em>插入多条数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1.以班级学员信息，继续添加，试试SQL语句的insert</span><br><span class="line"></span><br><span class="line">2. 有没有快捷的办法，批量插入数据？（提示，基于学生名字插入数据即可）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示修改phone设置默认值</span></span><br><span class="line">mysql -uroot -pwww.yuchaoit.cn -e <span class="string">&quot;alter table yuchao_linux.new_students modify phone char(11) not null default &#x27;0&#x27; &quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试代码</span></span><br><span class="line"><span class="keyword">for</span> stu <span class="keyword">in</span> 叶金阳 杨松麟 陈亮亮 李文杰 郑佳强 罗兴林  冯靖涵 张少辉 程志伟 代杰豪 高若恒 张天鼎 张鑫 刘永飞 黄彦 王仁刚 赵阳阳 王秉诚 于超</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    mysql -uroot -p1 -e <span class="string">&quot;insert into student.stu1(name) values(&#x27;<span class="variable">$stu</span>&#x27;);&quot;</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql -uroot -p1 -e <span class="string">&quot;select * from yuchao_linux.new_students &quot;</span></span><br><span class="line">mysql -uroot -p1 -e <span class="string">&quot;desc yuchao_linux.new_students&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空表数据</span></span><br><span class="line">mysql -uroot -p1 -e <span class="string">&quot;truncate table yuchao_linux.new_students  &quot;</span></span><br></pre></td></tr></table></figure><ul><li>导入多个文件，提取信息，数据表插入数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">name_arr=(`<span class="built_in">cat</span> /root/stu_name.txt`)</span><br><span class="line">add_arr=(`<span class="built_in">cat</span> /root/address.txt`)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印俩数组变量看看</span></span><br><span class="line"><span class="comment"># 提取数组所有的值</span></span><br><span class="line"><span class="comment">#echo $&#123;name_arr[@]&#125;</span></span><br><span class="line"><span class="comment">#echo $&#123;add_arr[@]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取数组所有的索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#echo $&#123;!name_arr[@]&#125;</span></span><br><span class="line"><span class="comment">#echo $&#123;!add_arr[@]&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环处理数组，基于同一个索引，对应上每一行的数据，拼接出了具体的SQL</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;!stu_name[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="comment"># mysql -uroot -p1 -e &quot;insert into student.stu(name,address) values(&#x27;$&#123;stu_name[$i]&#125;&#x27;,&#x27;$&#123;add_name[$i]&#125;&#x27;)&quot;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 打印你想拼接的SQL，看看，对不对，然后再插入表</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># stu_name=([0]=&quot;松林&quot; [1]=&quot;超哥&quot; [2]=&quot;亮亮&quot; [3]=&quot;文杰&quot; [4]=&quot;加强&quot; [5]=&quot;新林&quot;)</span></span><br><span class="line"><span class="comment"># add_name=([0]=&quot;山西老板&quot; [1]=&quot;江苏小弟&quot; [2]=&quot;湖南大佬&quot; [3]=&quot;云南昆明&quot; [4]=&quot;山西大同&quot; [5]=&quot;贵州老板&quot;)</span></span><br></pre></td></tr></table></figure><h2 id="6-2-数据表修改数据"><a href="#6-2-数据表修改数据" class="headerlink" title="6.2 数据表修改数据"></a>6.2 数据表修改数据</h2><h3 id="1）帮助信息查看"><a href="#1）帮助信息查看" class="headerlink" title="1）帮助信息查看"></a>1）帮助信息查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ? Data Manipulation</span><br><span class="line">You asked for help about help category: &quot;Data Manipulation&quot;</span><br><span class="line">For more information, type &#x27;help &lt;item&gt;&#x27;, where &lt;item&gt; is one of the following</span><br><span class="line">topics:</span><br><span class="line">   CALL</span><br><span class="line">   DELETE</span><br><span class="line">   DO</span><br><span class="line">   DUAL</span><br><span class="line">   HANDLER</span><br><span class="line">   INSERT</span><br><span class="line">   INSERT DELAYED</span><br><span class="line">   INSERT SELECT</span><br><span class="line">   JOIN</span><br><span class="line">   LOAD DATA</span><br><span class="line">   LOAD XML</span><br><span class="line">   REPLACE</span><br><span class="line">   SELECT</span><br><span class="line">   UNION</span><br><span class="line">   UPDATE</span><br></pre></td></tr></table></figure><h3 id="2）语法说明"><a href="#2）语法说明" class="headerlink" title="2）语法说明"></a>2）语法说明</h3><p>update语句语法:</p><p>update table 表名  字段名&#x3D;新数据数据   where(指定条件对哪行修改)  id&#x3D;？ name&#x3D;？；</p><blockquote><blockquote><p>:warning:重要的事说三遍，切记update修改数据时，一定要加where匹配修改哪行， 否则会修改字段下的全部数据，误修改就凉凉了</p></blockquote></blockquote><h3 id="3）修改更新数据"><a href="#3）修改更新数据" class="headerlink" title="3）修改更新数据"></a>3）修改更新数据</h3><ul><li>针对如下数据表进行操作</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone       |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352 |</span><br><span class="line">|  2 | 王雨萌    |   0 | 女     | 未知      | 2024-06-02 18:34:23 | 未知        |</span><br><span class="line">|  3 | 张岩      |  23 | 女     | 未知      | 2024-06-02 18:42:13 | 未知        |</span><br><span class="line">|  4 | 王彤      |   0 | 女     | 内蒙古    | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">|  5 | 师璐      |   0 | 女     | 经纬      | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">|  6 | 曹可文    |   0 | 女     | 四中      | 2024-06-02 18:51:24 | 未知        |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+-------------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>修改234记录的address字段数据，修改2-6记录的phone字段数据全部改为&#x3D;&#x3D;&#x3D;喜欢过</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#####################修改adress字段########################</span></span><br><span class="line">mysql&gt; update stu1 <span class="built_in">set</span> address=<span class="string">&#x27;大专&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=2 and  name=<span class="string">&#x27;王雨萌&#x27;</span>;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update stu1 <span class="built_in">set</span> address=<span class="string">&#x27;经纬&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=3 and name=<span class="string">&#x27;张岩&#x27;</span>;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update stu1 <span class="built_in">set</span> address=<span class="string">&#x27;一小&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=4;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment">###################修改phone字段######################</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 2 3 4 5 6</span><br><span class="line"><span class="keyword">do</span>  mysql -uroot -p1 -e <span class="string">&quot;update student.stu1 set phone=&#x27;喜欢过祝你们幸福安康&#x27; where id=<span class="variable">$i</span>;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###################查看数据表数据###############</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+--------------------------------+</span><br><span class="line">| <span class="built_in">id</span> | name      | age | gender | address   | intime              | phone                          |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+--------------------------------+</span><br><span class="line">|  1 | 赵东兴    |  23 | 男     | 内蒙古    | 2024-06-02 18:26:12 | 15598001352                    |</span><br><span class="line">|  2 | 王雨萌    |   0 | 女     | 大专      | 2024-06-02 18:34:23 | 喜欢过祝你们幸福安康           |</span><br><span class="line">|  3 | 张岩      |  23 | 女     | 经纬      | 2024-06-02 18:42:13 | 喜欢过祝你们幸福安康           |</span><br><span class="line">|  4 | 王彤      |   0 | 女     | 一小      | 2024-06-02 18:51:24 | 喜欢过祝你们幸福安康           |</span><br><span class="line">|  5 | 师璐      |   0 | 女     | 经纬      | 2024-06-02 18:51:24 | 喜欢过祝你们幸福安康           |</span><br><span class="line">|  6 | 曹可文    |   0 | 女     | 四中      | 2024-06-02 18:51:24 | 喜欢过祝你们幸福安康           |</span><br><span class="line">+----+-----------+-----+--------+-----------+---------------------+--------------------------------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>修改1号记录的name，age，gender，address多个字段数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update stu1 <span class="built_in">set</span> name=<span class="string">&#x27;三年之后成功的男人&#x27;</span>,age=26,address=<span class="string">&#x27;北京&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------------------------+-----+--------+---------+---------------------+--------------------------------+</span><br><span class="line">| <span class="built_in">id</span> | name                        | age | gender | address | intime              | phone                          |</span><br><span class="line">+----+-----------------------------+-----+--------+---------+---------------------+--------------------------------+</span><br><span class="line">|  1 | 三年之后成功的男人          |  26 | 男     | 北京    | 2024-06-02 18:26:12 | 15598001352    </span><br></pre></td></tr></table></figure><h2 id="6-3-数据表删除数据"><a href="#6-3-数据表删除数据" class="headerlink" title="6.3 数据表删除数据"></a>6.3 数据表删除数据</h2><h3 id="1）按行删除"><a href="#1）按行删除" class="headerlink" title="1）按行删除"></a>1）按行删除</h3><ul><li><p>delete语句，删除数据时会按行删除</p></li><li><p>只删除某行使用where匹配具体的行进行删除</p></li><li><p>删除全部数据，不指定where关键字即可，代表删除全部行数据，删除全部数据，也是基于一行一行进行删除</p></li><li><p>并且delete语句知识删除数据，不会删除主键自增记录，这里是个坑</p></li></ul><blockquote><p>delete语句语法：</p><p>delete  from  表名  where 匹配某行</p></blockquote><ul><li><strong>删除某行数</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#####################按行删除且查看检查####################</span></span><br><span class="line">mysql&gt; delete from stu1 <span class="built_in">where</span> <span class="built_in">id</span>=6;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from stu1 <span class="built_in">where</span> <span class="built_in">id</span>=5;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from stu1 <span class="built_in">where</span> <span class="built_in">id</span>=4;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+-----------------------------+-----+--------+---------+---------------------+--------------------------------+</span><br><span class="line">| <span class="built_in">id</span> | name                        | age | gender | address | intime              | phone                          |</span><br><span class="line">+----+-----------------------------+-----+--------+---------+---------------------+--------------------------------+</span><br><span class="line">|  1 | 三年之后成功的男人          |  26 | 男     | 北京    | 2024-06-02 18:26:12 | 15598001352                    |</span><br><span class="line">|  2 | 王雨萌                      |   0 | 女     | 大专    | 2024-06-02 18:34:23 | 喜欢过祝你们幸福安康           |</span><br><span class="line">|  3 | 张岩                        |  23 | 女     | 经纬    | 2024-06-02 18:42:13 | 喜欢过祝你们幸福安康           |</span><br><span class="line">+----+-----------------------------+-----+--------+---------+---------------------+--------------------------------+</span><br></pre></td></tr></table></figure><ul><li><strong>删除所有行数据</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from stu1;</span><br><span class="line">Query OK, 3 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">Empty <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="2）全面删除"><a href="#2）全面删除" class="headerlink" title="2）全面删除"></a>2）全面删除</h3><ul><li>truncate删除原理是，直接删除数据表，在基于该数据表创建一个新的数据表</li></ul><blockquote><p>语法：</p><p>truncate  表名</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">######对该表删除#######</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">+----+------+-----+--------+---------+---------------------+-------+</span><br><span class="line">| <span class="built_in">id</span> | name | age | gender | address | intime              | phone |</span><br><span class="line">+----+------+-----+--------+---------+---------------------+-------+</span><br><span class="line">|  1 | 赵   |  23 | 男     | 包头    | 2024-06-02 20:10:04 | 888   |</span><br><span class="line">+----+------+-----+--------+---------+---------------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">######删除检查######</span></span><br><span class="line">mysql&gt;<span class="built_in">truncate</span> stu1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from stu1;</span><br><span class="line">Empty <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="3）伪删除"><a href="#3）伪删除" class="headerlink" title="3）伪删除"></a>3）伪删除</h3><p>为了有效防止delete误删除数据，可以人为限定SQL的删除逻辑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">添加表字段，删除状态字段，0 表示被删除，1表示数据存在</span><br><span class="line"></span><br><span class="line">可以用tinyint类型，省磁盘，从 0 到 255 的整型数据。存储大小为 1 字节</span><br></pre></td></tr></table></figure><p>增加状态列</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">alter table new_students add column field_status TINYINT not null default 1 comment &#x27;字段删除状态，0 表示被删除，1表示数据存在&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; desc new_students;</span><br><span class="line">+--------------+-------------------------------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field        | Type                                      | Null | Key | Default           | Extra          |</span><br><span class="line">+--------------+-------------------------------------------+------+-----+-------------------+----------------+</span><br><span class="line">| id           | int(11)                                   | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name         | varchar(64)                               | NO   |     | NULL              |                |</span><br><span class="line">| age          | tinyint(3)                                | NO   |     | 0                 |                |</span><br><span class="line">| gender       | enum(&#x27;男&#x27;,&#x27;女&#x27;)                           | NO   |     | NULL              |                |</span><br><span class="line">| height       | float(4,1)                                | YES  |     | NULL              |                |</span><br><span class="line">| address      | enum(&#x27;北京&#x27;,&#x27;深圳&#x27;,&#x27;云南&#x27;,&#x27;江苏&#x27;)         | NO   |     | NULL              |                |</span><br><span class="line">| intime       | datetime                                  | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| phone        | char(11)                                  | NO   |     | 0                 |                |</span><br><span class="line">| hobby        | char(20)                                  | NO   |     | 学习              |                |</span><br><span class="line">| field_status | tinyint(4)                                | NO   |     | 1                 |                |</span><br><span class="line">+--------------+-------------------------------------------+------+-----+-------------------+----------------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>想删除数据用update，代替delete，取消delete的执行权限即可</p><p>兄弟，再次啰嗦，用update，务必小心，加上where条件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">删除于超数据</span><br><span class="line">mysql&gt; update new_students set field_status=0 where name=&#x27;于超&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure><p>后续的查询语句，修改为如下即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询所有有效用户的数据</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from new_students where field_status=1;</span><br></pre></td></tr></table></figure><h1 id="7-数据库DQL查询语言"><a href="#7-数据库DQL查询语言" class="headerlink" title="7.数据库DQL查询语言"></a>7.数据库DQL查询语言</h1><h2 id="测试数据准备"><a href="#测试数据准备" class="headerlink" title="测试数据准备"></a>测试数据准备</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@db-51 ~]#mysql -uroot -p1 &lt; all_world.sql </span><br><span class="line"></span><br><span class="line">mysql&gt; show tables from world;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_world |</span><br><span class="line">+-----------------+</span><br><span class="line">| city            |</span><br><span class="line">| country         |</span><br><span class="line">| countrylanguage |</span><br><span class="line">+-----------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>内有大量的世界人口数据信息，基于city表进行练习</li><li>city表中，name字段：城市名，countrycode字段：国家代号，district字段：省份名，population字段：人口数量</li></ul><p><img src="/image-20240602204120564.png" alt="image-20240602204120564"></p><h2 id="7-2-内置变量查询"><a href="#7-2-内置变量查询" class="headerlink" title="7.2 内置变量查询"></a>7.2 内置变量查询</h2><h3 id="1）查询内置变量信息"><a href="#1）查询内置变量信息" class="headerlink" title="1）查询内置变量信息"></a>1）查询内置变量信息</h3><blockquote><p>语法：</p><p>show variables like %变量名%     #模糊查找，百分号匹配任意字符</p><p>用途：可根据关键字进行模糊查找，查看数据库内置变量名，与对应的变量值</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看全部变量</span></span><br><span class="line">mysql&gt; show variables;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#模糊查找有关变量名及对应的变量值</span></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%port%&#x27;</span>;</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| Variable_name            | Value |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| innodb_support_xa        | ON    |</span><br><span class="line">| large_files_support      | ON    |</span><br><span class="line">| port                     | 3306  |</span><br><span class="line">| report_host              |       |</span><br><span class="line">| report_password          |       |</span><br><span class="line">| report_port              | 3306  |</span><br><span class="line">| report_user              |       |</span><br><span class="line">| require_secure_transport | OFF   |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><h3 id="2）精确查询变量值"><a href="#2）精确查询变量值" class="headerlink" title="2）精确查询变量值"></a>2）精确查询变量值</h3><blockquote><p>语法:</p><p>show variables like ‘%变量名%’   <code>#如果不知道变量名叫什么，可通过show模糊查找变量</code></p><p>select @@内置变量名               <code>#show查找确认后，再通过select精确提取变量值</code></p><blockquote><p>用途：查出数据库精确查找内置变量的值，运维通过变量观察数据库中各种数据</p></blockquote></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1.查看数据库端口</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@port;</span><br><span class="line">+--------+</span><br><span class="line">| @@port |</span><br><span class="line">+--------+</span><br><span class="line">|   3306 |</span><br><span class="line">+--------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.查看数据库实例<span class="built_in">id</span>，主从复制使用</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@server_id;</span><br><span class="line">+-------------+</span><br><span class="line">| @@server_id |</span><br><span class="line">+-------------+</span><br><span class="line">|           0 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.查看数据库实例数据目录</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@datadir;</span><br><span class="line">+-----------------+</span><br><span class="line">| @@datadir       |</span><br><span class="line">+-----------------+</span><br><span class="line">| /app/data/3306/ |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4.查看数据库程序安装目录</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@basedir;</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| @@basedir                                       |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/ |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5.查看数据库实例soket文件位置</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@socket;</span><br><span class="line">+-----------------+</span><br><span class="line">| @@socket        |</span><br><span class="line">+-----------------+</span><br><span class="line">| /tmp/mysql.sock |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6.查看数据库主键自增步长</span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;auto%&#x27;</span>;</span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@auto_increment_increment;</span><br><span class="line">+----------------------------+</span><br><span class="line">| @@auto_increment_increment |</span><br><span class="line">+----------------------------+</span><br><span class="line">|                          1 |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="3）修改内置变量值"><a href="#3）修改内置变量值" class="headerlink" title="3）修改内置变量值"></a>3）修改内置变量值</h3><blockquote><p>语法： set  变量名&#x3D;变量值  </p><p>   set @@变量名&#x3D;变量值</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############修改自增变量############</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span>  auto_increment_increment=2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@auto_increment_increment;</span><br><span class="line">+----------------------------+</span><br><span class="line">| @@auto_increment_increment |</span><br><span class="line">+----------------------------+</span><br><span class="line">|                          2 |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#############再修改回来################</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span>  @@auto_increment_increment=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> @@auto_increment_increment;</span><br><span class="line">+----------------------------+</span><br><span class="line">| @@auto_increment_increment |</span><br><span class="line">+----------------------------+</span><br><span class="line">|                          1 |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="7-3-内置函数查询"><a href="#7-3-内置函数查询" class="headerlink" title="7.3 内置函数查询"></a>7.3 内置函数查询</h2><p>函数举例：将查询的字母全部转变成小写和大写：select lower(username), upper(username) from 表名;</p><p>函数的功能：封装了特定的一些功能，我们直接拿过来使用，可以实现对应的功能。</p><p>函数的作用：为了实现select查询的效率和能力。</p><p>类似于shell脚本的函数，将某些代码封装到函数中，当调用函数时，就会执行这些代码，可以拿到代码执行的结果。</p><h3 id="1）函数使用帮助"><a href="#1）函数使用帮助" class="headerlink" title="1）函数使用帮助"></a>1）函数使用帮助</h3><blockquote><p>语法：</p><p>？   函数名   （精确查找某函数使用帮助信息）</p></blockquote><ul><li><strong>查看函数分类</strong></li></ul><p>可查看数据库支持哪些分类的函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> ? functions;</span><br><span class="line">You asked <span class="keyword">for</span> help about help category: &quot;Functions&quot;</span><br><span class="line"><span class="keyword">For</span> more information, type <span class="string">&#x27;help &lt;item&gt;&#x27;</span>, <span class="keyword">where</span> <span class="operator">&lt;</span>item<span class="operator">&gt;</span> <span class="keyword">is</span> <span class="keyword">one</span> <span class="keyword">of</span> the following</span><br><span class="line">categories:</span><br><span class="line">   Bit Functions位函数</span><br><span class="line">   Comparison operators比较运算符</span><br><span class="line">   Control flow functions控制流函数</span><br><span class="line">   <span class="type">Date</span> <span class="keyword">and</span> <span class="type">Time</span> Functions日期和时间函数</span><br><span class="line">   Encryption Functions加密函数</span><br><span class="line">   Information Functions信息函数</span><br><span class="line">   Logical operators逻辑运算符</span><br><span class="line">   Miscellaneous Functions 其他函数</span><br><span class="line">   <span class="type">Numeric</span> Functions数字函数</span><br><span class="line">   String Functions字符串函数</span><br></pre></td></tr></table></figure><ul><li><strong>查看时间分类函数</strong></li></ul><p>查看具体分类函数内，支持内些相关函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> ? <span class="type">Date</span> <span class="keyword">and</span> <span class="type">Time</span> Functions</span><br><span class="line">You asked <span class="keyword">for</span> help about help category: &quot;Date and Time Functions&quot;</span><br><span class="line"><span class="keyword">For</span> more information, type <span class="string">&#x27;help &lt;item&gt;&#x27;</span>, <span class="keyword">where</span> <span class="operator">&lt;</span>item<span class="operator">&gt;</span> <span class="keyword">is</span> <span class="keyword">one</span> <span class="keyword">of</span> the following</span><br><span class="line">topics:</span><br></pre></td></tr></table></figure><p><img src="/image-20240603164817674.png" alt="image-20240603164817674"></p><ul><li><strong>查看某函数帮助信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> ? now</span><br></pre></td></tr></table></figure><p><img src="/image-20240603165322643.png" alt="image-20240603165322643"></p><h3 id="2）常用函数使用"><a href="#2）常用函数使用" class="headerlink" title="2）常用函数使用"></a>2）常用函数使用</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#查看当前连接数据库的用户</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">user</span>();</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span>()         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> root<span class="variable">@localhost</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看当前所在的库</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> database();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> database() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看当前的时间</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> now();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2024</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">06</span>:<span class="number">38</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="7-4-show查询"><a href="#7-4-show查询" class="headerlink" title="7.4 show查询"></a>7.4 <em>show</em>查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span>语句有许多形式，提供关于服务器的数据库、表、列或状态信息的信息。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span>语法格式：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> 关键字 <span class="keyword">LIKE</span> <span class="string">&#x27;pattern&#x27;</span></span><br><span class="line"></span><br><span class="line">如果对于一个给定的说明语句的语法包括像<span class="string">&#x27;模式&#x27;</span>，<span class="string">&#x27;模式&#x27;</span>是一个字符串，可以包含“<span class="operator">%</span>”和“_“通配符。该模式是有用的限制语句输出匹配的值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES – 显示当前所有数据库的名称</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> TABLES <span class="keyword">FROM</span> db_name – 显示数据库中的所有表</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> ENGINES – 显示MySQL当前支持哪些存储引擎和默认存储引擎</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> – 显示MySQL当前支持哪些字符集</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">COLLATION</span> – 显示MySQL支持字符集的排序规则</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="type">BINARY</span> <span class="operator">|</span> MASTER – 显示二进制文件以及文件大小（需要开启二进制日志记录功能</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> BINLOG EVENTS – 显示二进制文件的执行过程</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> COLUMNS – 显示表的列信息（等同于<span class="keyword">DESC</span>，需要先创建表）</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASES – 显示已经创建的库，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> – 显示已经创建的表，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> FUNTCION  – 显示已经创建的函数，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> – 显示已经创建的存储过程，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> <span class="operator">-</span> 显示已经创建的触发器，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> – 显示已经创建的视图，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> EVENTS – 显示已经创建的事件，创建时的语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> ENGINE – 显示存储引擎的详细信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> WARNINGS – 显示最后一个执行语句所产生的警告信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> ERRORS – 显示最后一个执行语句所产生的错误信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> EVENTS – 显示事件信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS – 显示一个用户所拥有的权限</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PROCESSLIST – 显示系统中正在运行的所有进程，普通用户只能查看自己的进行信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PRIVILEGES – 显示MySQL所支持的所有权限，及权限可操作的对象</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PLUGINS – 显示MySQL插件信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> MASTER STATUS – 显示Master当前正在使用的二进制信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS – 显示表属性信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> INDEX – 显示表索引信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS – 显示存储过程信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS – 显示存储函数信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> TRIGGERS – 显示触发器信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PROFILE <span class="keyword">and</span> <span class="keyword">SHOW</span> PROFILES – 显示执行语句的资源使用情况</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> SLAVE HOSTS – 显示Master主机上已注册的复制主机列表</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> SLAVE STATUS – 显示Slave主机状态信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> <span class="operator">|</span> SESSION STATUS – 显示MySQL状态变量信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> <span class="operator">|</span> SESSION VARIABLES – 显示MySQL系统变量信息</span><br></pre></td></tr></table></figure><ul><li>查看数据库所有库</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| employees          |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| stu                |</span><br><span class="line">| sys                |</span><br><span class="line">| world              |</span><br><span class="line">+--------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>查看数据库创建库与数据表的sql语句</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> database stu;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Database <span class="operator">|</span> <span class="keyword">Create</span> Database                                                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> stu      <span class="operator">|</span> <span class="keyword">CREATE</span> DATABASE `stu` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> stu.t1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> t1    <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t1` (</span><br><span class="line">  `name` <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>查看数据库内置变量</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="string">&#x27;%port%&#x27;</span>;</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| Variable_name            | Value |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| innodb_support_xa        | ON    |</span><br><span class="line">| large_files_support      | ON    |</span><br><span class="line">| port                     | 3306  |</span><br><span class="line">| report_host              |       |</span><br><span class="line">| report_password          |       |</span><br><span class="line">| report_port              | 3306  |</span><br><span class="line">| report_user              |       |</span><br><span class="line">| require_secure_transport | OFF   |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><ul><li>查看当前数据库实例使用的引擎</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%storage%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name                    <span class="operator">|</span> <span class="keyword">Value</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> default_storage_engine           <span class="operator">|</span> InnoDB <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> default_tmp_storage_engine       <span class="operator">|</span> InnoDB <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> disabled_storage_engines         <span class="operator">|</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> internal_tmp_disk_storage_engine <span class="operator">|</span> InnoDB <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="子查询语句顺序"><a href="#子查询语句顺序" class="headerlink" title="子查询语句顺序"></a>子查询语句顺序</h2><p><img src="/1659601941650.png" alt="1659601941650"></p><h2 id="7-4-select查询"><a href="#7-4-select查询" class="headerlink" title="7.4 select查询"></a>7.4 <em>select</em>查询</h2><ul><li>查看数据表数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  stu.t1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> 赵   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>查看数据库内置函数值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#查看当前所在的库</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> database();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> database() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#查看当前的时间</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> now();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2024</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">06</span>:<span class="number">38</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>查看数据库内置变量值</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> @@port;</span><br><span class="line">+--------+</span><br><span class="line">| @@port |</span><br><span class="line">+--------+</span><br><span class="line">|   3306 |</span><br><span class="line">+--------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="7-6-where子查询"><a href="#7-6-where子查询" class="headerlink" title="7.6 where子查询"></a>7.6 <em>where</em>子查询</h2><p>where子句可以限定一些条件，根据用户需求，在数据表中查找对应的数据</p><blockquote><p>语法：</p><p>select     字段名     from    表   where  字段&#x3D;关键字</p><p>select     字段名     from    表   where  字段  like  %关键字%</p><p>select     字段名     from    表   where  字段&#x3D;关键字 or 字段&#x3D;关键字</p><p>select     字段名     from    表   where  字段&#x3D;关键字 and 字段&#x3D;关键字</p></blockquote><blockquote><p>对world库中city数据表进行查询练习</p></blockquote><ul><li><strong>查询所有城市名，以及人口数</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,Population from world.city;</span><br></pre></td></tr></table></figure><p><img src="/image-20240603183119185.png" alt="image-20240603183119185"></p><ul><li><strong>查询city表里，所有中国的城市信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="/image-20240603183749556.png" alt="image-20240603183749556"></p><ul><li><strong>查询人口数小于500人城市信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> Population<span class="operator">&lt;</span><span class="number">500</span></span><br></pre></td></tr></table></figure><p><img src="/image-20240603183903216.png" alt="image-20240603183903216"></p><ul><li><strong>查询中国,人口数超过500w的所有城市信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> Population <span class="operator">&gt;</span><span class="number">5000000</span> <span class="keyword">and</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="/image-20240603184203794.png" alt="image-20240603184203794"></p><ul><li><strong>查询中国或者美国的城市信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#语法<span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode<span class="operator">=</span><span class="string">&#x27;USA&#x27;</span> <span class="keyword">or</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span></span><br><span class="line"></span><br><span class="line">#语法<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode <span class="keyword">in</span> (<span class="string">&#x27;chn&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="/image-20240603184820655.png" alt="image-20240603184820655"></p><ul><li><strong>查询人口在200万到500万之间的城市所有信息</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#语法一</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> Population <span class="operator">&gt;</span><span class="number">2000000</span> <span class="keyword">and</span> Population <span class="operator">&lt;</span><span class="number">5000000</span></span><br><span class="line"></span><br><span class="line">#语法二</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> Population <span class="keyword">BETWEEN</span> <span class="number">2000000</span> <span class="keyword">and</span> <span class="number">5000000</span></span><br></pre></td></tr></table></figure><p><img src="/image-20240603185046476.png" alt="image-20240603185046476"></p><ul><li><strong>查询中国或者美国，人口数大于500万的城市</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode <span class="keyword">IN</span> (<span class="string">&#x27;CHN&#x27;</span>,<span class="string">&#x27;USA&#x27;</span>) <span class="keyword">and</span> Population <span class="operator">&gt;</span> <span class="number">5000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> (CountryCode<span class="operator">=</span><span class="string">&#x27;USA&#x27;</span> <span class="keyword">or</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span>) <span class="keyword">and</span> Population <span class="operator">&gt;</span><span class="number">5000000</span>;</span><br></pre></td></tr></table></figure><p><img src="/image-20240603185949966.png" alt="image-20240603185949966"></p><ul><li><strong>查询城市名以qing开头的城市</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  city  <span class="keyword">where</span>  name <span class="keyword">like</span>  <span class="string">&#x27;qing%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="/image-20240603185709223.png" alt="image-20240603185709223"></p><ul><li><strong>查询淮安市的人口数量</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span>  name <span class="keyword">like</span> <span class="string">&#x27;huai%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="/image-20240603191339550.png" alt="image-20240603191339550"></p><h2 id="7-7-Group-by聚合函数"><a href="#7-7-Group-by聚合函数" class="headerlink" title="7.7 Group_by聚合函数"></a>7.7 <em>Group_by</em>聚合函数</h2><p>聚合函数,是一类在数据库中用于对多个行进行计算并返回单个结果的函数。</p><p>它们能够对数据进行汇总、统计和计算，常用于提取有关数据集的摘要信息。</p><p>聚合函数在SQL查询中广泛应用，包括统计总数、平均值、最大值、最小V值等。</p><p>这些函数通常与 GROUP BY 子句一起使用，以便根据一个或多个列对数据进行分组，并将聚合函数应用于每个分组。</p><p><strong>常用聚合函</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count() 统计数量 </span><br><span class="line">sum() 求和</span><br><span class="line">avg() 平均数</span><br><span class="line">max() 最大值</span><br><span class="line">min() 最小值</span><br><span class="line">group_concat() GROUP_CONCAT函数返回一个字符串结果，该结果由分组中的值连接组合而成。</span><br></pre></td></tr></table></figure><p><strong>group by 分组功能原理</strong></p><p>1.按分组条件进行排序，</p><p>2.进行分组列的去重，</p><p>3.聚合函数将其他列的结果聚合</p><p><strong>group by聚合函数练习题</strong></p><ul><li>统计city表有多少行数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> city;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">4079</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>统计中国城市的个数</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(name) <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">363</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>统计中国总人口数</li><li>where子句，先匹配countrycode字段为CHN的所有数据，再使用sum函数对population人口字段进行计算</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">sum</span>(Population) <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(Population) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">175953614</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li>统计每个国家的城市个数</li><li>使用croup by分组子句，进行对countrycode字段国家分组，相同字段为一组，count最后对每组的name字段统计数量</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> CountryCode,<span class="built_in">count</span>(name) <span class="keyword">from</span> city <span class="keyword">GROUP</span> <span class="keyword">BY</span> CountryCode;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> CountryCode <span class="operator">|</span> <span class="built_in">count</span>(name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> ABW         <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AFG         <span class="operator">|</span>           <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AGO         <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AIA         <span class="operator">|</span>           <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALB         <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">AND</span>         <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ANT         <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">ARE</span>         <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span></span><br></pre></td></tr></table></figure><ul><li>统计USA美国的城市总数</li><li>指定字段匹配数据时，也可以不区分大小写，和排序规则有关，当前排序规则不区分大小写，都可以显示出来</li><li>as关键字，可以在数据输出显示时，上方字段名可临时通过as定义的字符显示</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(name) as <span class="string">&#x27;城市总数&#x27;</span>  from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;usa&#x27;</span>;</span><br><span class="line">+--------------+</span><br><span class="line">| 城市总数     |</span><br><span class="line">+--------------+</span><br><span class="line">|          274 |</span><br><span class="line">+--------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>统计每个国家的总人口数</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>  countrycode <span class="keyword">as</span> <span class="string">&#x27;国家&#x27;</span>,<span class="built_in">sum</span>(Population) <span class="keyword">as</span> <span class="string">&#x27;人口数量&#x27;</span> <span class="keyword">from</span> city <span class="keyword">group</span> <span class="keyword">by</span> countrycode;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 国家   <span class="operator">|</span> 人口数量     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> ABW    <span class="operator">|</span>        <span class="number">29034</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AFG    <span class="operator">|</span>      <span class="number">2332100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AGO    <span class="operator">|</span>      <span class="number">2561600</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AIA    <span class="operator">|</span>         <span class="number">1556</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALB    <span class="operator">|</span>       <span class="number">270000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">AND</span>    <span class="operator">|</span>        <span class="number">21189</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ANT    <span class="operator">|</span>         <span class="number">2345</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">ARE</span>    <span class="operator">|</span>      <span class="number">1728336</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ARG    <span class="operator">|</span>     <span class="number">19996563</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ARM    <span class="operator">|</span>      <span class="number">1633100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ASM    <span class="operator">|</span>         <span class="number">7523</span> <span class="operator">|</span></span><br><span class="line">#######太长省略##########</span><br></pre></td></tr></table></figure><ul><li>统计中国每个省的城市个数和城市名</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> district as <span class="string">&#x27;省&#x27;</span>,count(name) as <span class="string">&#x27;城市数&#x27;</span>,group_concat(name) as <span class="string">&#x27;城市名&#x27;</span> from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;chn&#x27;</span> group by district;</span><br></pre></td></tr></table></figure><p><img src="/image-20240603210948095.png" alt="image-20240603210948095">                                                      </p><h2 id="7-8-having聚合判断"><a href="#7-8-having聚合判断" class="headerlink" title="7.8 having聚合判断"></a>7.8 <em>having</em>聚合判断</h2><p>当group by 排序分组后，如果还要做条件判断提取数据，使用having子句用于对分组的过滤</p><p><strong>Having 练习题</strong></p><ul><li>统计每个国家的总人口数，只显示人口超过1亿的国家信息</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> countrycode as <span class="string">&#x27;国家&#x27;</span>,<span class="built_in">sum</span>(population) as <span class="string">&#x27;人口数&#x27;</span> from city group by countrycode having  <span class="built_in">sum</span>(population) &gt;100000000;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| 国家   | 人口数    |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| CHN    | 175953614 |</span><br><span class="line">| IND    | 123298526 |</span><br><span class="line">+--------+-----------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure><h2 id="7-9-Order-by聚合排序"><a href="#7-9-Order-by聚合排序" class="headerlink" title="7.9 Order_by聚合排序"></a>7.9 <em>Order_by</em>聚合排序</h2><ul><li>查询所有城市信息，按人口数字段排序输出，按数字顺序正序从小到大输出</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span>,population <span class="keyword">as</span> <span class="string">&#x27;人口顺序&#x27;</span> <span class="keyword">from</span> city <span class="keyword">order</span> <span class="keyword">by</span> population;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 城市                  <span class="operator">|</span> 人口顺序     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> Adamstown             <span class="operator">|</span>           <span class="number">42</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> West Island           <span class="operator">|</span>          <span class="number">167</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fakaofo               <span class="operator">|</span>          <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CittÃ  del Vaticano   <span class="operator">|</span>          <span class="number">455</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Bantam                <span class="operator">|</span>          <span class="number">503</span> <span class="operator">|</span></span><br><span class="line">########太长后面省略###########</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#逆序输出</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span>,population <span class="keyword">as</span> <span class="string">&#x27;人口顺序&#x27;</span> <span class="keyword">from</span> city <span class="keyword">order</span> <span class="keyword">by</span> population <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><ul><li>查询中国所有城市信息，且按照人口数从大到小排序输出</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span>,population <span class="keyword">as</span> <span class="string">&#x27;人口逆序&#x27;</span> <span class="keyword">from</span> city <span class="keyword">where</span> countrycode<span class="operator">=</span><span class="string">&#x27;chn&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> population <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 城市      <span class="operator">|</span> 人口逆序     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> Shanghai  <span class="operator">|</span>      <span class="number">9696300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Peking    <span class="operator">|</span>      <span class="number">7472000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Chongqing <span class="operator">|</span>      <span class="number">6351600</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tianjin   <span class="operator">|</span>      <span class="number">5286800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Wuhan     <span class="operator">|</span>      <span class="number">4344600</span> <span class="operator">|</span></span><br><span class="line">########太长后面省略###########</span><br></pre></td></tr></table></figure><ul><li>查看每个国家的总人口数，总人口超过5000w的信息,并按总人口数从大到小排序输出</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> countrycode <span class="keyword">as</span> <span class="string">&#x27;国家&#x27;</span>,<span class="built_in">sum</span>(population) <span class="keyword">as</span> <span class="string">&#x27;人口逆序&#x27;</span><span class="keyword">from</span> city <span class="keyword">group</span> <span class="keyword">by</span> countrycode <span class="keyword">having</span> <span class="built_in">sum</span>(population) <span class="operator">&gt;</span><span class="number">50000000</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">sum</span>(population) <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 国家   <span class="operator">|</span> 人口逆序     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> CHN    <span class="operator">|</span>    <span class="number">175953614</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> IND    <span class="operator">|</span>    <span class="number">123298526</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BRA    <span class="operator">|</span>     <span class="number">85876862</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> USA    <span class="operator">|</span>     <span class="number">78625774</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JPN    <span class="operator">|</span>     <span class="number">77965107</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RUS    <span class="operator">|</span>     <span class="number">69150700</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MEX    <span class="operator">|</span>     <span class="number">59752521</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><h2 id="8-0-limit分页查询"><a href="#8-0-limit分页查询" class="headerlink" title="8.0 limit分页查询"></a>8.0 <em>limit</em>分页查询</h2><ul><li>查询中国所有城市信息，以人口数从大到小排序，只显示前十名。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span>,population <span class="keyword">as</span> <span class="string">&#x27;人口前十&#x27;</span> <span class="keyword">from</span> city  <span class="keyword">where</span> countrycode<span class="operator">=</span><span class="string">&#x27;chn&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span>  population <span class="keyword">desc</span>  limit <span class="number">10</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 城市               <span class="operator">|</span> 人口前十     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> Shanghai           <span class="operator">|</span>      <span class="number">9696300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Peking             <span class="operator">|</span>      <span class="number">7472000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Chongqing          <span class="operator">|</span>      <span class="number">6351600</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tianjin            <span class="operator">|</span>      <span class="number">5286800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Wuhan              <span class="operator">|</span>      <span class="number">4344600</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Harbin             <span class="operator">|</span>      <span class="number">4289800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Shenyang           <span class="operator">|</span>      <span class="number">4265200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Kanton [Guangzhou] <span class="operator">|</span>      <span class="number">4256300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Chengdu            <span class="operator">|</span>      <span class="number">3361500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Nanking [Nanjing]  <span class="operator">|</span>      <span class="number">2870300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><ul><li>查询中国所有的城市信息，并按照人口数从大到小排序输出，只显示6-10名</li></ul><blockquote><p>语法</p><p>limit  起点,条数</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span>,population <span class="keyword">as</span> <span class="string">&#x27;人数&#x27;</span> <span class="keyword">from</span> city <span class="keyword">where</span> countrycode<span class="operator">=</span><span class="string">&#x27;chn&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> population <span class="keyword">desc</span> limit <span class="number">5</span>,<span class="number">5</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> 城市               <span class="operator">|</span> 人数    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> Harbin             <span class="operator">|</span> <span class="number">4289800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Shenyang           <span class="operator">|</span> <span class="number">4265200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Kanton [Guangzhou] <span class="operator">|</span> <span class="number">4256300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Chengdu            <span class="operator">|</span> <span class="number">3361500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Nanking [Nanjing]  <span class="operator">|</span> <span class="number">2870300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#写法<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> city <span class="keyword">where</span> CountryCode<span class="operator">=</span><span class="string">&#x27;CHN&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> Population <span class="keyword">desc</span> limit <span class="number">5</span> <span class="keyword">offset</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-数据库服务SQL语句分类&quot;&gt;&lt;a href=&quot;#1-数据库服务SQL语句分类&quot; class=&quot;headerlink&quot; title=&quot;1.数据库服务SQL语句分类&quot;&gt;&lt;/a&gt;1.数据库服务SQL语句分类&lt;/h1&gt;&lt;h2 id=&quot;1-1-SQL语句是什么&quot;&gt;&lt;a </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>数据库mysql-授权管理</title>
    <link href="http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E6%8E%88%E6%9D%83%E7%AE%A1%E7%90%86/"/>
    <id>http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MYSQL-%E6%8E%88%E6%9D%83%E7%AE%A1%E7%90%86/</id>
    <published>2024-08-20T00:35:02.000Z</published>
    <updated>2024-08-20T00:35:02.204Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>数据库mysql-安装部署</title>
    <link href="http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MSYQL-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"/>
    <id>http://example.com/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93MSYQL-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/</id>
    <published>2024-08-20T00:25:41.000Z</published>
    <updated>2024-08-20T00:30:03.812Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-数据库二进制安装"><a href="#1-数据库二进制安装" class="headerlink" title="1.数据库二进制安装"></a>1.数据库二进制安装</h1><ul><li><p>官网-二进制包安装地址</p><p> <a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p></li></ul><h2 id="1-1-基础概念"><a href="#1-1-基础概念" class="headerlink" title="1.1 基础概念"></a>1.1 基础概念</h2><p><strong>什么是数据库初始化</strong></p><p>数据库初始化是指在使用MySQL数据库之前，对数据库系统进行的一系列准备工作，包括创建数据库实例、设置必要的参数和配置，以及准备数据库环境等操作。</p><p><strong>初始化的作用和意义</strong></p><p>数据库初始化的主要作用是确保数据库系统的正常运行，提供一个可用的数据库环境给用户进行数据存储、管理和操作。通过初始化，可以设定数据库系统的基本配置，保证数据安全性和完整性，提高系统性能，以及方便后续的数据库管理和维护工作。</p><p><strong>为什么需要初始化MySQL数据库</strong></p><p>在使用MySQL数据库之前，进行数据库初始化是非常重要的。通过初始化可以确保数据库系统的稳定性和安全性，防范数据丢失和系统故障的风险；同时，初始化还可以根据实际需求定制数据库配置，优化数据库性能，提升数据处理效率，确保数据库系统能够满足业务需求。</p><h2 id="1-2-安装部署"><a href="#1-2-安装部署" class="headerlink" title="1.2 安装部署"></a>1.2 安装部署</h2><ul><li>安装方式: mysql5.7二进制包安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">ls</span></span><br><span class="line">mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建mysql软件存放目录和mysql数据存放目录</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">mkdir</span> -p /app/&#123;tools,data&#125;</span><br><span class="line">[root@db-51 ~]#tree /app</span><br><span class="line">/app</span><br><span class="line">├── data</span><br><span class="line">└── tools</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#解压放入指定目录</span></span><br><span class="line">[root@db-51 ~]#tar -xf mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz -C /app/tools/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建软链接，用于方便升级版本</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">ln</span> -s /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/ /app/tools/mysql</span><br><span class="line">[root@db-51 ~]#ll /app/tools/</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx. 1 root root  47 May 20 11:26 mysql -&gt; /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/</span><br><span class="line">drwxr-xr-x. 9 root root 129 May 20 11:25 mysql-5.7.20-linux-glibc2.12-x86_64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#mysql管理命令加入PATH环境变量，可绝对路径执行命令</span></span><br><span class="line"><span class="comment">##查看管理命令</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">ls</span> /app/tools/mysql/bin/</span><br><span class="line"><span class="comment">##加入全局环境变量</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">tail</span> -1 /etc/profile</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/app/tools/mysql/bin</span><br><span class="line"><span class="comment">##加载</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment">##检查</span></span><br><span class="line">[root@db-51 ~]#mysql -V</span><br><span class="line">mysql  Ver 14.14 Distrib 5.7.20, <span class="keyword">for</span> linux-glibc2.12 (x86_64) using  EditLine wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查是否有mariadb依赖，如果有删除，否则安装mysql时会报错</span></span><br><span class="line">[root@db-51 ~]#rpm -qa|grep mariadb</span><br><span class="line">mariadb-libs-5.5.68-1.el7.x86_64</span><br><span class="line">[root@db-51 ~]#yum remove mariadb-libs-5.5.68-1.el7.x86_64 -y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装mysql特有依赖</span></span><br><span class="line">yum install libaio-devel -y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建mysql运行用户，降低权限</span></span><br><span class="line">[root@db-51 ~]#useradd -s /sbin/nologin -M mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建mysql数据存放目录，并且授予权限</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">mkdir</span> /app/data/3306</span><br><span class="line">[root@db-51 ~]#<span class="built_in">chown</span> -R mysql.mysql /app/data</span><br><span class="line">[root@db-51 ~]#<span class="built_in">chown</span> -R mysql.mysql /app/tools/mysql*</span><br><span class="line"><span class="comment">##检查</span></span><br><span class="line">[root@db-51 ~]#ll -d /app/data/3306/ /app/tools/mysql*</span><br><span class="line">drwxr-xr-x. 2 mysql mysql   6 May 20 11:49 /app/data/3306/</span><br><span class="line">lrwxrwxrwx. 1 mysql mysql  47 May 20 11:26 /app/tools/mysql -&gt; /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64/</span><br><span class="line">drwxr-xr-x. 9 mysql mysql 129 May 20 11:25 /app/tools/mysql-5.7.20-linux-glibc2.12-x86_64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化mysql，多次初始化同样配置信息会报错</span></span><br><span class="line">[root@db-51 ~]#mysqld --initialize-insecure --user=mysql --basedir=/app/tools/mysql --datadir=/app/data/3306/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置文件修改</span></span><br><span class="line"><span class="comment">##mysql基于如下配置进行启动</span></span><br><span class="line"><span class="comment">##[mysqld]：mysql服务端配置  soket: 本地进程套接字文件，可基于该socket文件进行连接服务端</span></span><br><span class="line"><span class="comment">##[mysql ]：mysql客户端配置  soket: 客户端指定服务端的soket文件位置，可连接到服务端</span></span><br><span class="line"><span class="comment">##basedir：mysql安装目录  datadir: mysql初始化后的数据存放目录</span></span><br><span class="line"><span class="built_in">cat</span> &gt;/etc/my.cnf &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">[mysqld]</span><br><span class="line">port=3306</span><br><span class="line">user=mysql</span><br><span class="line">basedir=/app/tools/mysql</span><br><span class="line">datadir=/app/data/3306</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">[mysql]</span><br><span class="line">socket=/tmp/mysql.sock  </span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#拷贝mysql管理脚本到/etc/init.d/下</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">cp</span> /app/tools/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">[root@db-51 ~]#ll /etc/init.d/mysqld -d</span><br><span class="line">-rwxr-xr-x. 1 root root 10576 May 20 12:13 /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#systemctl启动mysql,记得加上enable这一步</span></span><br><span class="line"><span class="comment">#否则系统无法识别外部程序脚本，systemctl命令无法使用</span></span><br><span class="line">[root@db-51 ~]#systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">[root@db-51 ~]#systemctl start mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">[root@db-51 ~]#ss -tunlp|grep 3306</span><br><span class="line">tcp    LISTEN     0      70     [::]:33060              [::]:*                   <span class="built_in">users</span>:((&quot;mysqld&quot;,pid=<span class="number">30117</span>,fd=<span class="number">20</span>))</span><br><span class="line">tcp    LISTEN     0      128    [::]:3306               [::]:*                   <span class="built_in">users</span>:((&quot;mysqld&quot;,pid=<span class="number">30117</span>,fd=<span class="number">22</span>))</span><br><span class="line">[root@db-51 ~]#ps -ef|grep mysql</span><br><span class="line">root      78817      1  1 12:26 ?        00:00:00 /bin/sh /app/tools/mysql/bin/mysqld_safe --datadir=/app/data/3306 --pid-file=/app/data/3306/db-51.pid</span><br><span class="line">mysql     78973  78817  4 12:26 ?        00:00:00 /app/tools/mysql/bin/mysqld --basedir=/app/tools/mysql --datadir=/app/data/3306 --plugin-dir=/app/tools/mysql/lib/plugin --user=mysql --log-error=db-51.err --pid-file=/app/data/3306/db-51.pid --socket=/tmp/mysql.sock --port=3306</span><br><span class="line">root      79019  72950  0 12:26 pts/0    00:00:00 grep --color=auto mysql</span><br></pre></td></tr></table></figure><h1 id="3-数据库多实例部署"><a href="#3-数据库多实例部署" class="headerlink" title="3.数据库多实例部署"></a>3.数据库多实例部署</h1><h2 id="3-1-基础概念"><a href="#3-1-基础概念" class="headerlink" title="3.1 基础概念"></a>3.1 基础概念</h2><p><strong>什么是多实例及多实例的优缺点</strong></p><p>就是在一台服务器上开启多个不同的服务端口，比如3306、3307、3308…，运行多个不同的MySQL服务。</p><p>这些MySQL多实例共用一套安装程序（<code>命令</code>），使用不同的配置文件、启动程序、数据文件；多实例对硬件资源的获取通过配置文件来指定。</p><p><strong>优点</strong></p><p>可以有效利用服务器资源。当单个服务器资源充足时，可以充分利用剩余资源；节约资源。需要独立的数据库服务，并且需要主从同步的情况下。</p><p><strong>缺点</strong></p><p>当某一个实例消耗大量的CPU、内存时会影响其它实例提供的服务质量。</p><p><strong>多实例应用场景</strong></p><p>需要数据库单独提供服务，并且需要进行主从同步，服务并发量不大，服务器的资源很充足。</p><h2 id="3-2-多实例部署"><a href="#3-2-多实例部署" class="headerlink" title="3.2 多实例部署"></a>3.2 多实例部署</h2><p><strong>目标:</strong> </p><p>基于本地mysql应用，生成3306.3307.3308三个实例</p><p>并且通过shell脚本启停管理3307与3308实例</p><h3 id="1）生成3307与3308实例"><a href="#1）生成3307与3308实例" class="headerlink" title="1）生成3307与3308实例"></a>1）生成3307与3308实例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建多实例3307与3308数据目录</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">mkdir</span> /app/data/&#123;3307,3308&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#授予数据目录权限</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">chown</span> -R mysql.mysql /app/data/</span><br><span class="line">[root@db-51 ~]#ll -d /app/data/3307 /app/data/3308</span><br><span class="line">drwxr-xr-x. 2 mysql mysql 6 May 20 13:32 /app/data/3307</span><br><span class="line">drwxr-xr-x. 2 mysql mysql 6 May 20 13:32 /app/data/3308</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化3307与3308多实例</span></span><br><span class="line"><span class="comment">##--user:  指定初始时生成的数据文件所属权限</span></span><br><span class="line"><span class="comment">##--basedir：mysql应用程序安装目录</span></span><br><span class="line"><span class="comment">##--daradir：mysql管理的数据库目录</span></span><br><span class="line">[root@db-51 ~]#mysqld --initialize-insecure --user=mysql --basedir=/app/tools/mysql --datadir=/app/data/3307</span><br><span class="line">[root@db-51 ~]#mysqld --initialize-insecure --user=mysql --basedir=/app/tools/mysql --datadir=/app/data/3308</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建多实例3307与3308配置文件,修改socket与数据目录即可</span></span><br><span class="line">[root@db-51 ~]#<span class="built_in">cat</span> /etc/mysql_3307.cnf  /etc/mysql_3308.cnf </span><br><span class="line">[mysqld]</span><br><span class="line">port=3307</span><br><span class="line">user=mysql</span><br><span class="line">basedir=/opt/mysql/</span><br><span class="line">datadir=/app/data/3307/</span><br><span class="line">socket=/app/data/3307/mysql.sock</span><br><span class="line">log_error=/app/data/3307/mysql.log</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port=3308</span><br><span class="line">user=mysql</span><br><span class="line">basedir=/opt/mysql/</span><br><span class="line">datadir=/app/data/3308/</span><br><span class="line">socket=/app/data/3308/mysql.sock</span><br><span class="line">log_error=/app/data/3308/mysql.log</span><br></pre></td></tr></table></figure><h3 id="2）多实例管理脚本"><a href="#2）多实例管理脚本" class="headerlink" title="2）多实例管理脚本"></a>2）多实例管理脚本</h3><blockquote><p>通过shell脚本管理多实例mysql的启动停止</p><p>每个实例修改脚本中定义变量端口即可使用</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#[root@db-51 ~]#cat /app/data/3307/3307.sh </span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#实例端口</span></span><br><span class="line">port=<span class="string">&quot;3307&quot;</span></span><br><span class="line"><span class="comment">#实例运行用户</span></span><br><span class="line">mysql_user=<span class="string">&quot;mysql&quot;</span></span><br><span class="line"><span class="comment">#mysql应用目录</span></span><br><span class="line">Cmdpath=<span class="string">&quot;/app/tools/mysql/bin&quot;</span></span><br><span class="line"><span class="comment">#实例生成的sock存放文件</span></span><br><span class="line">mysql_sock=<span class="string">&quot;/app/data/<span class="variable">$&#123;port&#125;</span>/mysql_<span class="variable">$&#123;port&#125;</span>.sock&quot;</span></span><br><span class="line"><span class="comment">#实例生成的进程pid存放文件</span></span><br><span class="line">mysqld_pid_file_path=<span class="string">&quot;/app/data/<span class="variable">$&#123;port&#125;</span>/mysql_<span class="variable">$&#123;port&#125;</span>.pid&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动函数</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line"><span class="comment">#判断实例的sock文件是否存在，不存在说明未启动，则进行启动</span></span><br><span class="line"><span class="keyword">if</span> [ ! -e <span class="string">&quot;<span class="variable">$mysql_sock</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;Starting MySQL...\n&quot;</span></span><br><span class="line">    <span class="comment">#调用mysql自带脚本参数，调用上方变量，进行启动实例</span></span><br><span class="line">    /bin/sh <span class="variable">$&#123;Cmdpath&#125;</span>/mysqld_safe --defaults-file=/etc/mysql_<span class="variable">$&#123;port&#125;</span>.cnf --pid-file=<span class="variable">$mysqld_pid_file_path</span> 2&gt;&amp;1 &gt; /dev/null &amp;</span><br><span class="line">    <span class="built_in">sleep</span> 3</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment">#如果存在就显示正在运行中</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;MySQL is running...\n&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭函数</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line"><span class="comment">#判断实例socket文件是否存在，不存在，显示关闭</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -e <span class="string">&quot;<span class="variable">$mysql_sock</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;MySQL is stopped...\n&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="comment">#存在则查看实例的进程pid，kill结束进程</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;Stoping MySQL...\n&quot;</span></span><br><span class="line">        mysqld_pid=`<span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$mysqld_pid_file_path</span>&quot;</span>`</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">kill</span> -0 <span class="variable">$mysqld_pid</span> 2&gt;/dev/null)</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">kill</span> <span class="variable">$mysqld_pid</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启函数</span></span><br><span class="line"><span class="comment">#调用关闭函数，再调用重启函数</span></span><br><span class="line"><span class="function"><span class="title">restart</span></span>()&#123;</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;Restarting MySQL...\n&quot;</span></span><br><span class="line">    stop</span><br><span class="line">    <span class="built_in">sleep</span> 2</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#位置变量传递参数判断，传递数字，进行调用函数</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">    start</span><br><span class="line">;;</span><br><span class="line">stop)</span><br><span class="line">    stop</span><br><span class="line">;;</span><br><span class="line">restart)</span><br><span class="line">    restart</span><br><span class="line">;;</span><br><span class="line"><span class="comment">#都没匹配到打印错误提示</span></span><br><span class="line">*)</span><br><span class="line">   <span class="built_in">printf</span> <span class="string">&quot;Usage: /data/<span class="variable">$&#123;port&#125;</span>/mysql&#123;start|stop|restart&#125;\n&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><h3 id="3）启动多实例"><a href="#3）启动多实例" class="headerlink" title="3）启动多实例"></a>3）启动多实例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@db-51 ~]#bash /app/data/3307/3307.sh start</span><br><span class="line">Starting MySQL...</span><br><span class="line">[root@db-51 ~]#bash /app/data/3308/3308.sh start</span><br><span class="line">Starting MySQL...</span><br></pre></td></tr></table></figure><h3 id="4）检查多实例"><a href="#4）检查多实例" class="headerlink" title="4）检查多实例"></a>4）检查多实例</h3><ul><li>检查端口进程</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#端口</span></span><br><span class="line">[root@db-51 ~]#ss -tunlp|egrep <span class="string">&#x27;3308|3307&#x27;</span></span><br><span class="line">tcp    LISTEN     0      80     [::]:3307               [::]:*                   <span class="built_in">users</span>:((&quot;mysqld&quot;,pid=<span class="number">84469</span>,fd=<span class="number">28</span>))</span><br><span class="line">tcp    LISTEN     0      80     [::]:3308               [::]:*                   <span class="built_in">users</span>:((&quot;mysqld&quot;,pid=<span class="number">84658</span>,fd=<span class="number">28</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#进程</span></span><br><span class="line">ps -ef|grep mysql</span><br></pre></td></tr></table></figure><ul><li>检查多实例pid文件与socket文件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#两个实例的pid文件</span></span><br><span class="line">[root@db-51 ~]#find /app/data/ -<span class="built_in">type</span> f -name *.pid</span><br><span class="line">/app/data/3307/mysql_3307.pid</span><br><span class="line">/app/data/3308/mysql_3308.pid</span><br><span class="line">[root@db-51 ~]#find /app/data/ -<span class="built_in">type</span> f -name *.pid|xargs <span class="built_in">cat</span></span><br><span class="line">84469</span><br><span class="line">84658</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#两个实例的socket文件</span></span><br><span class="line"><span class="comment">##socket文件无法查看内容，是基于进程启动后生成的虚拟内容文件，只用于连接</span></span><br><span class="line">[root@db-51 ~]#find /app/data/  -name  mysql.sock</span><br><span class="line">/app/data/3307/mysql.sock</span><br><span class="line">/app/data/3308/mysql.sock</span><br><span class="line">[root@db-51 ~]#find /app/data/  -name  mysql.sock|xargs <span class="built_in">ls</span>  -dl</span><br><span class="line">srwxrwxrwx. 1 mysql mysql 0 May 20 14:25 /app/data/3307/mysql.sock</span><br><span class="line">srwxrwxrwx. 1 mysql mysql 0 May 20 14:25 /app/data/3308/mysql.sock</span><br></pre></td></tr></table></figure><h3 id="5）修改多实例密码"><a href="#5）修改多实例密码" class="headerlink" title="5）修改多实例密码"></a>5）修改多实例密码</h3><ul><li>基于socket文件修改</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改两个实例连接密码，明文修改密码会出现警告信息</span></span><br><span class="line">[root@db-51 ~]#mysqladmin -S /app/data/3307/mysql.sock password 1</span><br><span class="line">mysqladmin: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">Warning: Since password will be sent to server <span class="keyword">in</span> plain text, use ssl connection to ensure password safety.</span><br><span class="line"></span><br><span class="line">[root@db-51 ~]#mysqladmin -S /app/data/3308/mysql.sock password 1</span><br><span class="line">mysqladmin: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">Warning: Since password will be sent to server <span class="keyword">in</span> plain text, use ssl connection to ensure password safety.</span><br></pre></td></tr></table></figure><ul><li>检查登录，sql语句查看，连接服务端的端口</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3307实例</span></span><br><span class="line">[root@db-51 ~]#mysql -S /app/data/3307/mysql.sock  -uroot -p1 -e <span class="string">&quot;show global variables like &#x27;port&#x27;&quot;</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| port          | 3307  |</span><br><span class="line">+---------------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#3308实例</span></span><br><span class="line">[root@db-51 ~]#mysql -S /app/data/3308/mysql.sock  -uroot -p1 -e <span class="string">&quot;show global variables like &#x27;port&#x27;&quot;</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| port          | 3308  |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure><h1 id="4-脚本启动关闭方式"><a href="#4-脚本启动关闭方式" class="headerlink" title="4.脚本启动关闭方式"></a>4.脚本启动关闭方式</h1><h2 id="4-1-启动"><a href="#4-1-启动" class="headerlink" title="4.1 启动"></a>4.1 启动</h2><ul><li>mysql管理脚本放入&#x2F;etc&#x2F;init.d，启动形式，本质上都是调用mysql自带管理脚本</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#systemctl启动</span></span><br><span class="line">systemctl  start/stop/restart   mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment">#service启动</span></span><br><span class="line">service mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment">#mysql自带管理脚本启动</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@db-51 /www.yuchaoit.cn]#<span class="built_in">ls</span> /opt/mysql/bin/mysqld* -l</span><br><span class="line">-rwxr-xr-x 1 mysql mysql 260613605 Sep 27  2019 /opt/mysql/bin/mysqld</span><br><span class="line">-rwxr-xr-x 1 mysql mysql 213374233 Sep 27  2019 /opt/mysql/bin/mysqld-debug</span><br><span class="line">-rwxr-xr-x 1 mysql mysql     27139 Sep 27  2019 /opt/mysql/bin/mysqld_multi</span><br><span class="line">-rwxr-xr-x 1 mysql mysql     28494 Sep 27  2019 /opt/mysql/bin/mysqld_safe</span><br><span class="line">-rwxr-xr-x 1 mysql mysql  15712383 Sep 27  2019 /opt/mysql/bin/mysqldump</span><br><span class="line">-rwxr-xr-x 1 mysql mysql      7865 Sep 27  2019 /opt/mysql/bin/mysqldumpslow</span><br></pre></td></tr></table></figure><h2 id="4-2-关闭"><a href="#4-2-关闭" class="headerlink" title="4.2 关闭"></a>4.2 关闭</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#脚本关闭</span></span><br><span class="line">systemctl stop mysqld</span><br><span class="line">service mysqld stop</span><br><span class="line">/etc/init.d/mysqld stop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#命令关闭</span></span><br><span class="line">mysql -uroot -pwww.yuchaoit.cn -e <span class="string">&#x27;shutdown;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#不建议用这个操作，除非特殊情况</span></span><br><span class="line"><span class="built_in">kill</span> pid</span><br><span class="line">pkill mysqld</span><br><span class="line">killall mysqld</span><br><span class="line"><span class="built_in">kill</span> -9 pid <span class="comment"># 极端情况下，才能用这个</span></span><br></pre></td></tr></table></figure><h1 id="5-程序进程运行原理"><a href="#5-程序进程运行原理" class="headerlink" title="5.程序进程运行原理"></a>5.程序进程运行原理</h1><ul><li><p><strong>mysqld_safe作用</strong></p><ul><li>mysql官方启动脚本，是以执行mysqld_safe为入口，其实mysqld_safe也是个shell脚本，调用了myqsld命令启动服务</li><li>mysqld_safe脚本设置运行环境，如以守护进程运行</li><li>mysqld_safe检测mysqld运行状态</li><li>mysqld_safe检测mysqld进程运行信息，写入 mysql实例目录下的hostname.err文件</li><li>以及mysqld_safe会读取my.cnf配置文件的[mysqld],[mysqld_safe]等配置</li></ul></li><li><p><strong>mysqld作用</strong></p><ul><li>mysqld是mysql的核心程序，用于管理mysql的数据库文件，以及用户执行的SQL请求</li><li>mysqld读取my.cnf中 [mysqld]配置</li></ul></li></ul><blockquote><p>不建议使用mysqld启动，以官方用法为主，用mysqld_safe调用mysqld启动mysql</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-数据库二进制安装&quot;&gt;&lt;a href=&quot;#1-数据库二进制安装&quot; class=&quot;headerlink&quot; title=&quot;1.数据库二进制安装&quot;&gt;&lt;/a&gt;1.数据库二进制安装&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;官网-二进制包安装地址&lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2024/08/19/hello-world/"/>
    <id>http://example.com/2024/08/19/hello-world/</id>
    <published>2024-08-19T13:52:23.813Z</published>
    <updated>2024-08-19T13:52:23.813Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
