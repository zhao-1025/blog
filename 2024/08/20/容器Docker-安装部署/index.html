<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>容器Docker-安装部署 | 一往无前虎山行,拨开云雾见光明</title><meta name="author" content="赵东兴"><meta name="copyright" content="赵东兴"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="docker安装部署1.开启流量转发 创建docker容器，会进行网络空间隔离，就是给容器分配不同的ip地址，会通过桥接的技术给容器分配不同网段地址，所以容器想要实现网络通信数据传输，就得通过流量转发给宿主机，  12345678910111213141516171819#开启内核参数让宿主机与网桥下的容器可以进行数据包交互cat &gt; &#x2F;etc&#x2F;sysctl.d&#x2F;docker.conf &amp;l">
<meta property="og:type" content="article">
<meta property="og:title" content="容器Docker-安装部署">
<meta property="og:url" content="http://example.com/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/index.html">
<meta property="og:site_name" content="一往无前虎山行,拨开云雾见光明">
<meta property="og:description" content="docker安装部署1.开启流量转发 创建docker容器，会进行网络空间隔离，就是给容器分配不同的ip地址，会通过桥接的技术给容器分配不同网段地址，所以容器想要实现网络通信数据传输，就得通过流量转发给宿主机，  12345678910111213141516171819#开启内核参数让宿主机与网桥下的容器可以进行数据包交互cat &gt; &#x2F;etc&#x2F;sysctl.d&#x2F;docker.conf &amp;l">
<meta property="og:locale">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-08-20T01:31:00.000Z">
<meta property="article:modified_time" content="2024-08-20T02:52:42.491Z">
<meta property="article:author" content="赵东兴">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '容器Docker-安装部署',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-20 10:52:42'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="一往无前虎山行,拨开云雾见光明" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="一往无前虎山行,拨开云雾见光明"><span class="site-name">一往无前虎山行,拨开云雾见光明</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">容器Docker-安装部署</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-08-20T01:31:00.000Z" title="Created 2024-08-20 09:31:00">2024-08-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-08-20T02:52:42.491Z" title="Updated 2024-08-20 10:52:42">2024-08-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="容器Docker-安装部署"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="docker安装部署"><a href="#docker安装部署" class="headerlink" title="docker安装部署"></a>docker安装部署</h1><h2 id="1-开启流量转发"><a href="#1-开启流量转发" class="headerlink" title="1.开启流量转发"></a>1.开启流量转发</h2><blockquote>
<p>创建docker容器，会进行网络空间隔离，就是给容器分配不同的ip地址，会通过桥接的技术给容器分配不同网段地址，所以容器想要实现网络通信数据传输，就得通过流量转发给宿主机，</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#开启内核参数让宿主机与网桥下的容器可以进行数据包交互</span><br><span class="line">cat <span class="operator">&gt;</span> <span class="operator">/</span>etc<span class="operator">/</span>sysctl.d<span class="operator">/</span>docker.conf <span class="operator">&lt;&lt;</span>EOF</span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>ip6tables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>iptables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.ipv4.ip_forward<span class="operator">=</span><span class="number">1</span></span><br><span class="line">EOF</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#cat <span class="operator">/</span>etc<span class="operator">/</span>sysctl.d<span class="operator">/</span>docker.conf </span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>ip6tables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>iptables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.ipv4.ip_forward<span class="operator">=</span><span class="number">1</span></span><br><span class="line"></span><br><span class="line">#开启内核提供的桥接功能</span><br><span class="line">modprobe br_netfilter</span><br><span class="line">sysctl <span class="operator">-</span>p <span class="operator">/</span>etc<span class="operator">/</span>sysctl.d<span class="operator">/</span>docker.conf</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#modprobe br_netfilter</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#sysctl <span class="operator">-</span>p <span class="operator">/</span>etc<span class="operator">/</span>sysctl.d<span class="operator">/</span>docker.conf</span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>ip6tables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.bridge.bridge<span class="operator">-</span>nf<span class="operator">-</span><span class="keyword">call</span><span class="operator">-</span>iptables <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">net.ipv4.ip_forward <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>参数解释：</strong></p>
<p>将指定的内核参数配置写入到<code>/etc/sysctl.d/docker.conf</code>文件中。让我们来解释一下每个参数的作用：</p>
<ol>
<li><code>net.bridge.bridge-nf-call-ip6tables = 1</code>：允许桥接设备调用IP6tables进行IPv6数据包的过滤。</li>
<li><code>net.bridge.bridge-nf-call-iptables = 1</code>：允许桥接设备调用iptables进行IPv4数据包的过滤。</li>
<li><code>net.ipv4.ip_forward=1</code>：允许Linux系统进行IPv4数据包的转发，这对于路由和网络共享非常重要。</li>
</ol>
<p>这些参数通常用于配置Docker守护进程的网络设置。在Docker中，宿主机的网络功能需要一些特定的内核参数来进行配置，以确保Docker容器能够正确地访问网络和进行IP转发等操作。</p>
<p>通过将这些参数写入到<code>/etc/sysctl.d/docker.conf</code>文件中，系统会在下一次启动时读取这些配置，并且应用到内核中，以确保Docker容器能够正常工作并正确地访问网络。</p>
<hr>
<p><code>modprobe</code>命令用于加载指定的内核模块。在这种情况下，<code>br_netfilter</code>是一个内核模块，它用于提供Linux桥接网络的一些额外功能。</p>
<p>具体来说，<code>br_netfilter</code>模块提供了对桥接设备网络包的过滤和处理功能，可以让桥接设备调用内核的网络过滤机制（如iptables）进行数据包的过滤和转发。</p>
<p>通过运行<code>modprobe br_netfilter</code>命令，可以加载<code>br_netfilter</code>模块，使得系统可以使用桥接设备的网络过滤功能。这对于一些网络配置和容器化平台（比如Docker）等场景可能是必要的。</p>
<h2 id="2-安装docker-ce"><a href="#2-安装docker-ce" class="headerlink" title="2.安装docker-ce"></a>2.安装docker-ce</h2><p><strong>介绍</strong></p>
<p>‌[Docker CE](<a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=Docker">https://www.baidu.com/s?wd=Docker</a> CE&amp;usm&#x3D;1&amp;ie&#x3D;utf-8&amp;rsv_pq&#x3D;aba271a1006aead5&amp;oq&#x3D;Docker CE是什么&amp;rsv_t&#x3D;b074SUMkhDNmEpfOEf9kHMTT8ESZSBZqamN5NT6mvHeSxOp%2BhCkV68m%2B%2FYk&amp;sa&#x3D;re_dqa_zy)是Docker Community Edition的简称，即Docker社区版。它是Docker的一个免费版本，主要面向小企业和小的IT团队，旨在让用户免费使用并尝试基于容器的应用程序部署。Docker CE提供了构建、交付和运行应用程序所需的基本功能，适合那些希望从Docker开始学习和使用容器技术的用户。与Docker  EE（企业版）相比，CE版本虽然功能上可能有所限制，但仍然是一个功能完整的版本，能够满足大多数用户的基本需求。Docker  CE的stable版本每三个月发布一次，维护期为四个月，此外还有一个edge版本，每月发布一次，以满足不同用户的需求和测试需求。‌</p>
<p>Docker CE（社区版）可以被视为一个整套的Docker软件包，其中包括了Docker  Engine以及其他相关的工具和组件，这些工具和组件共同构成了一个完整的容器化平台。在Docker CE中，用户可以使用Docker  Engine创建、运行和管理容器，同时还可以利用其他工具如Docker Compose和Docker  Swarm来进行容器编排和集群管理。因此，Docker  CE可以被看作是一个完备的容器化套件，为用户提供了构建、发布和管理容器化应用程序的一揽子解决方案。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#清理docker原环境</span><br><span class="line">yum remove docker docker<span class="operator">-</span>common docker<span class="operator">-</span>selinux docker<span class="operator">-</span>engine</span><br><span class="line">#安装docker依赖包</span><br><span class="line">yum install yum<span class="operator">-</span>utils device<span class="operator">-</span>mapper<span class="operator">-</span>persistent<span class="operator">-</span>data lvm2</span><br><span class="line">#提供下载docker<span class="operator">-</span>re的yum仓库配置</span><br><span class="line">yum<span class="operator">-</span>config<span class="operator">-</span>manager <span class="comment">--add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line">#修改下载地址为阿里docker源</span><br><span class="line">sed <span class="operator">-</span>i <span class="string">&#x27;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#x27;</span> <span class="operator">/</span>etc<span class="operator">/</span>yum.repos.d<span class="operator">/</span>docker<span class="operator">-</span>ce.repo<span class="operator">/</span>etc<span class="operator">/</span>yum.repos.d<span class="operator">/</span>docker<span class="operator">-</span>ce.repo</span><br><span class="line">#加载最新yum缓存</span><br><span class="line">yum makecache fast</span><br><span class="line">#安装docker<span class="operator">-</span>ce软件包</span><br><span class="line">yum install docker<span class="operator">-</span>ce <span class="operator">-</span>y</span><br><span class="line">#启动docker守护进行</span><br><span class="line">systemctl <span class="keyword">start</span> docker</span><br><span class="line">#查看docker服务端进程运行</span><br><span class="line">ps <span class="operator">-</span>ef<span class="operator">|</span>grep docker </span><br><span class="line">#检查docker组件版本</span><br><span class="line">docker version</span><br><span class="line">#配置docker镜像仓库阿里加速器</span><br><span class="line">mkdir <span class="operator">-</span>p <span class="operator">/</span>etc<span class="operator">/</span>docker</span><br><span class="line">tee <span class="operator">/</span>etc<span class="operator">/</span>docker<span class="operator">/</span>daemon.json <span class="operator">&lt;&lt;</span><span class="operator">-</span><span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://504gl88z.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">#重载重启</span><br><span class="line">sudo systemctl daemon<span class="operator">-</span>reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h2 id="3-启动第一个容器"><a href="#3-启动第一个容器" class="headerlink" title="3.启动第一个容器"></a>3.启动第一个容器</h2><blockquote>
<p>下载一个NGINX镜像，调用镜像创建运行容器，最后windows访问测试</p>
</blockquote>
<p><strong>远程仓库搜索镜像</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#下载点赞最多的是官方版本最安全，不指定nginx版本，默认搜索最新版</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">search</span> nginx</span><br><span class="line">NAME                               DESCRIPTION                                     STARS     OFFICIAL</span><br><span class="line">nginx                              Official build <span class="keyword">of</span> Nginx.                        <span class="number">19996</span>     [OK]</span><br><span class="line">unit                               Official build <span class="keyword">of</span> NGINX Unit: Universal Web …   <span class="number">32</span>        [OK]</span><br><span class="line">nginx<span class="operator">/</span>nginx<span class="operator">-</span>ingress                NGINX <span class="keyword">and</span>  NGINX Plus Ingress Controllers fo…   <span class="number">92</span>       、 </span><br></pre></td></tr></table></figure>

<p><strong>从仓库下载镜像</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#下载nginx镜像，不指定版本默认下载最新版</span><br><span class="line">#镜像是通过分层存储技术进行构建，所以会一层层下载（原理篇讲解了）</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull nginx</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> tag: latest</span><br><span class="line">latest: Pulling <span class="keyword">from</span> library<span class="operator">/</span>nginx</span><br><span class="line">a2abf6c4d29d: Pull complete </span><br><span class="line">a9edb18cadd1: Pull complete </span><br><span class="line"><span class="number">589</span>b7251471a: Pull complete </span><br><span class="line"><span class="number">186</span>b1aaa4aa6: Pull complete </span><br><span class="line">b4df32aa5a72: Pull complete </span><br><span class="line">a0bcbecc962e: Pull complete </span><br><span class="line">Digest: sha256:<span class="number">0</span>d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> nginx:latest</span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>nginx:latest</span><br></pre></td></tr></table></figure>

<p><strong>调用镜像创建运行容器</strong></p>
<blockquote>
<p>至此成功地基于nginx镜像创建并启动了一个新的容器，该容器的 80 端口被映射到主机的 28877 端口</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#运行nginx容器，将容器内部的<span class="number">80</span>端口映射到主机的<span class="number">28877</span>端口上</span><br><span class="line">#运行容器后会生成容器id，容器唯一标识，通过id可管理容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d   <span class="operator">-</span>p <span class="number">28877</span>:<span class="number">80</span>      nginx</span><br><span class="line">f7bffe1c1854ec3c6c3c1d64a22d97a69414e07b5774bf44da494c219e231085</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#</span><br></pre></td></tr></table></figure>

<p><strong>查看正在运行的容器</strong></p>
<blockquote>
<p>容器 “romantic_grothendieck” 使用的是 “nginx” 镜像，容器的 ID 是 “1cef8c73c320”。容器已经运行了 7 分钟，状态为 “Up”，这表明容器正在运行中。此容器的 80 端口已映射到主机的 28877 端口上。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                     NAMES</span><br><span class="line"><span class="number">1</span>cef8c73c320   nginx     &quot;/docker-entrypoint.…&quot;   <span class="number">5</span> minutes ago   Up <span class="number">5</span> minutes   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp, :::<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp   romantic_grothendieck</span><br></pre></td></tr></table></figure>

<p><img src="/1661829890048-1721225329561-1.png" alt="1661829890048"></p>
<p><strong>访问容器nginx服务</strong></p>
<p><img src="/image-20240717221428786.png" alt="image-20240717221428786"></p>
<p><strong>图解容器的网络通信原理</strong></p>
<p>容器可以和公网通信是因为 Docker  在默认情况下会创建一个网络桥接接口，容器会被连接到这个网络中。通常来说，Docker 会使用 NAT （Network Address  Translation）技术，将容器内部的 IP 地址映射为宿主机的 IP 地址，这样容器就可以和宿主机以及外部网络通信了。</p>
<p>在你的示例中，容器的端口 80 已经映射到主机的端口 28877，这意味着外部的请求可以通过主机的 28877 端口访问到容器内的服务。</p>
<p>当然，Docker 也提供了更多的网络配置选项，你可以自定义容器的网络设置，包括端口映射、网络模式等等。</p>
<p><img src="/image-20240717221510680.png" alt="image-20240717221510680"></p>
<p><strong>分析容器进程信息</strong></p>
<blockquote>
<p>得出结论</p>
<p>1.容器运行的服务或应用，都会在一个单独的命名空间中运行，与宿主机环境隔离</p>
<p>2.容器停止后，通过容器运行的服务，也会随着停止</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>查看运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                     NAMES</span><br><span class="line">f7bffe1c1854   nginx     &quot;/docker-entrypoint.…&quot;   <span class="number">20</span> minutes ago   Up <span class="number">20</span> minutes   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp, :::<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp   keen_kirch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>查看运行的nginx进程</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep nginx</span><br><span class="line">root      <span class="number">19476</span>  <span class="number">19457</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">14</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> nginx: master process nginx <span class="operator">-</span>g daemon off;</span><br><span class="line"><span class="number">101</span>       <span class="number">19522</span>  <span class="number">19476</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">14</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> nginx: worker process</span><br><span class="line"><span class="number">101</span>       <span class="number">19523</span>  <span class="number">19476</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">14</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> nginx: worker process</span><br><span class="line">root      <span class="number">19921</span>  <span class="number">19889</span>  <span class="number">0</span> <span class="number">10</span>:<span class="number">06</span> pts<span class="operator">/</span><span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep <span class="comment">--color=auto nginx</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>查看运行nginx父进程信息</span><br><span class="line">#docker创建了一个命名空间【moby】，nginx是在这个独立空间中运行，实现了与宿主机的环境隔离</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep <span class="number">19457</span></span><br><span class="line">root      <span class="number">19457</span>      <span class="number">1</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">14</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>containerd<span class="operator">-</span>shim<span class="operator">-</span>runc<span class="operator">-</span>v2 <span class="operator">-</span>namespace moby <span class="operator">-</span>id <span class="number">1</span>cef8c73c320bb493b348ebf687793eb96e4ea996ec422009a1b0b4454ae93e3 <span class="operator">-</span>address <span class="operator">/</span>run<span class="operator">/</span>containerd<span class="operator">/</span>containerd.sock</span><br><span class="line">root      <span class="number">19476</span>  <span class="number">19457</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">14</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> nginx: master process nginx <span class="operator">-</span>g daemon off;</span><br><span class="line">root      <span class="number">19923</span>  <span class="number">19889</span>  <span class="number">0</span> <span class="number">10</span>:<span class="number">06</span> pts<span class="operator">/</span><span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep <span class="comment">--color=auto 19457</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>停止docker运行的容器，查看nginx服务是否还在运行</span><br><span class="line">#查看容器信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED        STATUS        PORTS                                     NAMES</span><br><span class="line"><span class="number">1</span>cef8c73c320   nginx     &quot;/docker-entrypoint.…&quot;   <span class="number">13</span> hours ago   Up <span class="number">13</span> hours   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp, :::<span class="number">28877</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp   romantic_grothendieck</span><br><span class="line">#停止容器，基于容器id前<span class="number">3</span>位<span class="operator">~</span>全部位，基于容器名也可以</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker stop <span class="number">1</span>ce</span><br><span class="line"><span class="number">1</span>ce</span><br><span class="line">#再次查看停止成功</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>容器挂掉后，容器内所运行的nginx也停止了</span><br><span class="line">#查看全部容器信息，包括运行的挂掉的容器相关信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED        STATUS                     PORTS     NAMES</span><br><span class="line"><span class="number">1</span>cef8c73c320   nginx     &quot;/docker-entrypoint.…&quot;   <span class="number">13</span> hours ago   Exited (<span class="number">0</span>) <span class="number">5</span> minutes ago             romantic_grothendieck</span><br><span class="line">#nginx也挂了</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep nignx</span><br><span class="line">root      <span class="number">20277</span>  <span class="number">19889</span>  <span class="number">0</span> <span class="number">10</span>:<span class="number">48</span> pts<span class="operator">/</span><span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep <span class="comment">--color=auto nignx</span></span><br></pre></td></tr></table></figure>

<p><img src="/image-20240718104923119.png" alt="image-20240718104923119"></p>
<h1 id="初体验docker用法"><a href="#初体验docker用法" class="headerlink" title="初体验docker用法"></a>初体验docker用法</h1><h2 id="1-官方API文档"><a href="#1-官方API文档" class="headerlink" title="1.官方API文档"></a>1.官方API文档</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="operator">/</span><span class="operator">/</span>docs.docker.com<span class="operator">/</span>registry<span class="operator">/</span>spec<span class="operator">/</span>api<span class="operator">/</span></span><br><span class="line"></span><br><span class="line"># 获取tags版本</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>hub.docker.com<span class="operator">/</span>v2<span class="operator">/</span>repositories<span class="operator">/</span>library<span class="operator">/</span>nginx<span class="operator">/</span>tags</span><br></pre></td></tr></table></figure>

<p><img src="/1661999781352.png" alt="1661999781352"></p>
<h2 id="2-搜索下载镜像"><a href="#2-搜索下载镜像" class="headerlink" title="2.搜索下载镜像"></a>2.搜索下载镜像</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>镜像仓库搜索镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">search</span> redis</span><br><span class="line">NAME                                    DESCRIPTION                                     STARS     OFFICIAL</span><br><span class="line">redis                                   Redis <span class="keyword">is</span> the world’s fastest data platform f…   <span class="number">12898</span>     [OK]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>下载官网认证镜像</span><br><span class="line">#不指定版本下载最新版</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull redis</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> tag: latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>下载完成</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull redis</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> tag: latest</span><br><span class="line">latest: Pulling <span class="keyword">from</span> library<span class="operator">/</span>redis</span><br><span class="line">a2abf6c4d29d: Already <span class="keyword">exists</span> </span><br><span class="line">c7a4e4382001: Pull complete </span><br><span class="line"><span class="number">4044</span>b9ba67c9: Pull complete </span><br><span class="line">c8388a79482f: Pull complete </span><br><span class="line"><span class="number">413</span>c8bb60be2: Pull complete </span><br><span class="line"><span class="number">1</span>abfd3011519: Pull complete </span><br><span class="line">Digest: sha256:db485f2e245b5b3329fdc7eff4eb00f913e09d8feb9ca720788059fdc2ed8339</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> redis:latest</span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>redis:latest</span><br></pre></td></tr></table></figure>

<p><strong>解释：a2abf6c4d29d: Already exists （已经存在）</strong></p>
<blockquote>
<p>Docker镜像是通过分层存储技术来构建的，每一层都包含特定的文件和配置。当您下载一个镜像时，Docker将会下载每个镜像层并组合在一起形成完整的镜像。</p>
<p>因此，当您下载一个新的镜像时，Docker会检查本地是否已经有相同的镜像层。如果发现本地已经存在相同的镜像层，Docker就不需要再次从镜像仓库下载该层，而是直接使用本地的镜像层。这种机制可以显著减少重复下载和节省网络带宽。</p>
<p>在启动容器时，Docker会根据构建镜像时的各个层来组合出容器的文件系统。因为镜像层已经存在本地，Docker只需引用这些本地的层，而不需要重新下载或提取镜像的层。这样可以节省时间和资源，并提高容器的启动速度。</p>
</blockquote>
<p>当Docker提示 “a2abf6c4d29d: Already exists” 时，它意味着在下载镜像时，Docker已经在本地找到了具有相同标识符的镜像层，所以它不需要再次从远程仓库下载这一层</p>
<p>Docker执行这样的优化行为主要是为了提高效率和节省带宽。当您在多台机器或者多次部署同一个镜像时，Docker会在本地缓存已经下载的镜像层。如果在后续的拉取过程中发现本地已经存在相同标识符的镜像层，Docker就不需要再次下载，而是直接使用本地的镜像层，从而节省时间和网络带宽。</p>
<p>这种优化有助于加速镜像的拉取，并减少对网络资源的消耗。特别是在大规模部署或者团队协作的情况下，这种优化可以显著降低镜像拉取的时间成本，提高整体的开发和部署效率。</p>
<p><img src="/1661832566515.png" alt="1661832566515"></p>
<h2 id="3-查看镜像列表"><a href="#3-查看镜像列表" class="headerlink" title="3.查看镜像列表"></a>3.查看镜像列表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#查看当前机器下载的所有镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line">#查看指定名字的镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images nginx</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br></pre></td></tr></table></figure>

<ul>
<li>NGINX镜像：<ul>
<li>仓库名称（Repository）: nginx</li>
<li>标签（Tag）: latest</li>
<li>镜像ID（Image ID）: 605c77e624dd</li>
<li>创建时间（Created）: 2年前</li>
<li>大小（Size）: 141MB</li>
</ul>
</li>
<li>Redis镜像：<ul>
<li>仓库名称（Repository）: redis</li>
<li>标签（Tag）: latest</li>
<li>镜像ID（Image ID）: 7614ae9453d1</li>
<li>创建时间（Created）: 2年前</li>
<li>大小（Size）: 113MB</li>
</ul>
</li>
</ul>
<p><img src="/1661832733692.png" alt="1661832733692"></p>
<h2 id="4-查看镜像构建记录"><a href="#4-查看镜像构建记录" class="headerlink" title="4.查看镜像构建记录"></a>4.查看镜像构建记录</h2><blockquote>
<p><code>docker history</code> 命令用于显示指定镜像的构建历史，包括每一层的创建方式、大小、以及所用的命令等信息。这个命令可以帮助用户了解镜像是如何构建的，以及每一层的变化和影响</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#查看redis镜像构建记录</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker history redis</span><br><span class="line">IMAGE          CREATED       CREATED <span class="keyword">BY</span>                                      SIZE      COMMENT</span><br><span class="line"><span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  CMD [&quot;redis-server&quot;]         <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  EXPOSE <span class="number">6379</span>                  <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  ENTRYPOINT [&quot;docker-entry…   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) COPY file:df205a0ef6e6df89…   374B      </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) WORKDIR /data                 0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  VOLUME [/data]               0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c mkdir /data &amp;&amp; chown redis:redis …   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c set -eux;   savedAptMark=&quot;$(apt<span class="operator">-</span>m…   <span class="number">27.8</span>MB    </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  ENV REDIS_DOWNLOAD_SHA<span class="operator">=</span><span class="number">5</span>b…   <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  ENV REDIS_DOWNLOAD_URL<span class="operator">=</span>ht…   <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  ENV REDIS_VERSION<span class="operator">=</span><span class="number">6.2</span><span class="number">.6</span>      <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c <span class="keyword">set</span> <span class="operator">-</span>eux;  savedAptMark<span class="operator">=</span>&quot;$(apt-ma…   4.24MB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV GOSU_VERSION=1.12        0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c groupadd -r -g 999 redis &amp;&amp; usera…   329kB     </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) ADD file:09675d11695f65c55…   80.4MB    </span><br><span class="line"></span><br><span class="line">#查看nginx镜像构建记录</span><br><span class="line">[root@docker-01 ~]#docker history nginx</span><br><span class="line">IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT</span><br><span class="line">605c77e624dd   2 years ago   /bin/sh -c #(nop)  CMD [&quot;nginx&quot; &quot;<span class="operator">-</span>g&quot; &quot;daemon…   <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  STOPSIGNAL SIGQUIT           <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  EXPOSE <span class="number">80</span>                    <span class="number">0</span>B        </span><br><span class="line"><span class="operator">&lt;</span>missing<span class="operator">&gt;</span>      <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  ENTRYPOINT [&quot;/docker-entr…   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) COPY file:09a214a3e07c919a…   4.61kB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7…   1.04kB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) COPY file:0b866ff3fc1ef5b0…   1.96kB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) COPY file:65504f71f5855ca0…   1.2kB     </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -…   61.1MB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~bullseye   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.7.1        0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.21.5     0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  LABEL maintainer=NGINX Do…   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) ADD file:09675d11695f65c55…   80.4MB    </span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x3D;&#x3D;镜像就是指定了服务或应用程序的运行依赖环境以及执行命令，最终目的就是让程序运行&#x3D;&#x3D;</p>
<p>【静态文件指的是在服务器上存储的固定内容，不会根据用户的请求或其他因素而改变。例如，HTML页面、图片、CSS样式表和JavaScript文件通常被视为静态文】</p>
</blockquote>
<p>Docker 镜像是由一系列的层（Layers）组成的。每一层代表了一个文件系统的改变，这些改变可以是添加、修改或删除文件。当你构建一个 Docker 镜像时，每一层都对应着你在 Dockerfile 中的一条指令，比如添加文件、运行命令等。</p>
<p>每一层所做的事情可以包括：</p>
<ol>
<li>添加文件：比如复制文件到镜像中</li>
<li>运行命令：比如在基础镜像上运行一个命令，使得该层包含了命令执行后的文件系统改变</li>
<li>安装软件包：比如使用包管理工具安装软件包</li>
<li>设置环境变量：配置镜像中的环境变量</li>
<li>其他文件系统改变：比如修改文件权限、添加链接等</li>
</ol>
<p>作用：每一层的作用是将上一层的改变叠加在一起，最终形成一个完整的 Docker 镜像。这种分层的设计使得镜像构建更加高效、灵活，并且可以更好地管理和复用镜像的组件</p>
<p><img src="/1661833148292.png" alt="1661833148292"></p>
<h2 id="5-获取镜像可用版本"><a href="#5-获取镜像可用版本" class="headerlink" title="5.获取镜像可用版本"></a>5.获取镜像可用版本</h2><blockquote>
<p>镜像仓库每个镜像都有很多版本，默认是下载的最新版的，如何查看可提供的镜像的版本都有哪些</p>
<p>需要梯子，从Docker Hub的API中获取镜像的标签版本信息，并使用jq命令来格式化和处理JSON数据，友好显示</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询centos镜像版本</span><br><span class="line">curl <span class="operator">-</span>s https:<span class="operator">/</span><span class="operator">/</span>registry.hub.docker.com<span class="operator">/</span>v1<span class="operator">/</span>repositories<span class="operator">/</span>centos<span class="operator">/</span>tags  <span class="operator">|</span>   jq</span><br><span class="line">#查询mysql镜像版本</span><br><span class="line">curl <span class="operator">-</span>s https:<span class="operator">/</span><span class="operator">/</span>registry.hub.docker.com<span class="operator">/</span>v1<span class="operator">/</span>repositories<span class="operator">/</span>mysql<span class="operator">/</span>tags  <span class="operator">|</span>   jq</span><br></pre></td></tr></table></figure>

<h2 id="6-下载指定版本镜像"><a href="#6-下载指定版本镜像" class="headerlink" title="6.下载指定版本镜像"></a>6.下载指定版本镜像</h2><blockquote>
<p>针对所需的版本去下载镜像，就可以根据指定版本运行容器了</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#下载MSYQL5<span class="number">.7</span><span class="number">.25</span>与<span class="number">5.7</span><span class="number">.7</span>两个镜像【镜像就是对某个服务应用，运行<span class="operator">+</span>运行环境的一个封装】</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-200</span> <span class="operator">/</span>opt]#docker pull mysql:<span class="number">5.7</span><span class="number">.25</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-200</span> <span class="operator">/</span>opt]#docker pull mysql:<span class="number">5.7</span><span class="number">.7</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看下载的镜像，latest是最新版</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line">mysql        <span class="number">5.7</span><span class="number">.25</span>    <span class="number">98455</span>b9624a9   <span class="number">5</span> years ago   <span class="number">372</span>MB</span><br></pre></td></tr></table></figure>

<h2 id="7-指定版本运行容器"><a href="#7-指定版本运行容器" class="headerlink" title="7.指定版本运行容器"></a>7.指定版本运行容器</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>下载指定版本镜像NGINX1<span class="number">.19</span><span class="number">.7</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull  nginx:<span class="number">1.19</span><span class="number">.7</span></span><br><span class="line"><span class="number">1.19</span><span class="number">.7</span>: Pulling <span class="keyword">from</span> library<span class="operator">/</span>nginx</span><br><span class="line"><span class="number">45</span>b42c59be33: Pull complete </span><br><span class="line"><span class="number">8</span>acc495f1d91: Pull complete </span><br><span class="line">ec3bd7de90d7: Pull complete </span><br><span class="line"><span class="number">19e2441</span>aeeab: Pull complete </span><br><span class="line">f5a38c5f8d4e: Pull complete </span><br><span class="line"><span class="number">83500</span>d851118: Pull complete </span><br><span class="line">Digest: sha256:f3693fe50d5b1df1ecd315d54813a77afd56b0245a404055a946574deb6b34fc</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> nginx:<span class="number">1.19</span><span class="number">.7</span></span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>nginx:<span class="number">1.19</span><span class="number">.7</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>查看已下载镜像列表</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line">nginx        <span class="number">1.19</span><span class="number">.7</span>    <span class="number">35</span>c43ace9216   <span class="number">3</span> years ago   <span class="number">133</span>MB</span><br><span class="line">mysql        <span class="number">5.7</span><span class="number">.25</span>    <span class="number">98455</span>b9624a9   <span class="number">5</span> years ago   <span class="number">372</span>MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>本地运行容器测试访问</span><br><span class="line">#前台运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run nginx:<span class="number">1.19</span><span class="number">.74</span></span><br><span class="line">#后台运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d nginx:<span class="number">1.19</span><span class="number">.74</span></span><br><span class="line">#查询容器详细信息，过滤容器网络信息ip地址</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker inspect <span class="number">405</span><span class="operator">|</span>grep <span class="operator">-</span>i address</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: <span class="keyword">null</span>,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: <span class="keyword">null</span>,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.6&quot;,</span><br><span class="line">#当前只有本地可以访问，因为没有做端口映射</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#curl <span class="operator">-</span>I <span class="number">172.17</span><span class="number">.0</span><span class="number">.2</span></span><br><span class="line">HTTP<span class="operator">/</span><span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Server: nginx<span class="operator">/</span><span class="number">1.19</span><span class="number">.7</span></span><br><span class="line"><span class="type">Date</span>: Thu, <span class="number">18</span> Jul <span class="number">2024</span> <span class="number">05</span>:<span class="number">34</span>:<span class="number">32</span> GMT</span><br><span class="line">Content<span class="operator">-</span>Type: text<span class="operator">/</span>html</span><br><span class="line">Content<span class="operator">-</span>Length: <span class="number">612</span></span><br><span class="line"><span class="keyword">Last</span><span class="operator">-</span>Modified: Tue, <span class="number">16</span> Feb <span class="number">2021</span> <span class="number">15</span>:<span class="number">57</span>:<span class="number">18</span> GMT</span><br><span class="line">Connection: keep<span class="operator">-</span>alive</span><br><span class="line">ETag: &quot;602beb5e-264&quot;</span><br><span class="line">Accept<span class="operator">-</span>Ranges: bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>端口映射宿主机运行容器，可以提供与外部网络的通信</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d <span class="operator">-</span>p8080:<span class="number">80</span> nginx:<span class="number">1.19</span><span class="number">.7</span> </span><br><span class="line">bfff8ff41c7a013e61dbbba24ecca1e389a1f556b9f90fbfbe71455a904c7bea</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#netstat <span class="operator">-</span>tunlp<span class="operator">|</span>grep <span class="number">8080</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8080</span>            <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="operator">*</span>               LISTEN      <span class="number">21814</span><span class="operator">/</span>docker<span class="operator">-</span>proxy  </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">8080</span>                 :::<span class="operator">*</span>                    LISTEN      <span class="number">21820</span><span class="operator">/</span>docker<span class="operator">-</span>proxy </span><br><span class="line">#此时就可以通过宿主机连通外网了</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#curl <span class="operator">-</span>I <span class="number">10.0</span><span class="number">.0</span><span class="number">.107</span>:<span class="number">8080</span></span><br><span class="line">HTTP<span class="operator">/</span><span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Server: nginx<span class="operator">/</span><span class="number">1.19</span><span class="number">.7</span></span><br><span class="line"><span class="type">Date</span>: Thu, <span class="number">18</span> Jul <span class="number">2024</span> <span class="number">05</span>:<span class="number">50</span>:<span class="number">53</span> GMT</span><br><span class="line">Content<span class="operator">-</span>Type: text<span class="operator">/</span>html</span><br><span class="line">Content<span class="operator">-</span>Length: <span class="number">612</span></span><br><span class="line"><span class="keyword">Last</span><span class="operator">-</span>Modified: Tue, <span class="number">16</span> Feb <span class="number">2021</span> <span class="number">15</span>:<span class="number">57</span>:<span class="number">18</span> GMT</span><br><span class="line">Connection: keep<span class="operator">-</span>alive</span><br><span class="line">ETag: &quot;602beb5e-264&quot;</span><br><span class="line">Accept<span class="operator">-</span>Ranges: bytes</span><br></pre></td></tr></table></figure>

<p><img src="/1661833955076.png" alt="1661833955076"></p>
<h1 id="管理容器常用命令"><a href="#管理容器常用命令" class="headerlink" title="管理容器常用命令"></a>管理容器常用命令</h1><h2 id="1-前台创建容器"><a href="#1-前台创建容器" class="headerlink" title="1.前台创建容器"></a>1.前台创建容器</h2><blockquote>
<p>创建新的容器并且运行容器</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#查看本地镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line"></span><br><span class="line">#指定镜像版本运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run redis:latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#指定镜像id运行容器【不建议用id启动容器，ps查容器信息不知道运行的啥服务】</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="number">761</span></span><br></pre></td></tr></table></figure>

<h2 id="2-后台创建容器"><a href="#2-后台创建容器" class="headerlink" title="2.后台创建容器"></a>2.后台创建容器</h2><blockquote>
<p> 创建新的容器并且运行容器</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#查看进程</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#指定版本运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d redis:latest</span><br><span class="line"><span class="number">4</span>c24ca837a3e25a740f0f9a3e92b50eacf80572d1c86725caa3241acaf606e9e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#指定镜像id运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d  <span class="number">761</span></span><br><span class="line"><span class="number">5e719774</span>d9975d664b7105976fe0dbbdacba0247dd41fda283dcd2dab73cfb3d</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#</span><br></pre></td></tr></table></figure>

<h2 id="3-端口映射创建"><a href="#3-端口映射创建" class="headerlink" title="3.端口映射创建"></a>3.端口映射创建</h2><blockquote>
<p>创建新的容器并且运行容器</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#后台运行端口容器<span class="number">6379</span>映射宿主机<span class="number">26379</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d <span class="operator">-</span>p <span class="number">26379</span>:<span class="number">6379</span> redis:latest</span><br><span class="line"><span class="number">2100</span>f9afab720aabcf6a5071ab0e13eea256e1be39ebc56b1705759aff376a6d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS                                         NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">3</span> seconds ago        Up <span class="number">2</span> seconds        <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp, :::<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp   agitated_shaw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看映射的端口</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ss <span class="operator">-</span>tunlp<span class="operator">|</span>grep redis</span><br><span class="line">tcp   LISTEN     <span class="number">0</span>      <span class="number">128</span>                                           [::]:<span class="number">26379</span>                                                     [::]:<span class="operator">*</span>                   users:((&quot;docker-proxy&quot;,pid<span class="operator">=</span><span class="number">26702</span>,fd<span class="operator">=</span><span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看运行容器后跑的服务进程</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep redis</span><br><span class="line">polkitd   <span class="number">26551</span>  <span class="number">26531</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">02</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br><span class="line">polkitd   <span class="number">26735</span>  <span class="number">26715</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">04</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br><span class="line">root      <span class="number">26777</span>  <span class="number">19889</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">04</span> pts<span class="operator">/</span><span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep <span class="comment">--color=auto redis</span></span><br></pre></td></tr></table></figure>

<h2 id="4-查看容器信息"><a href="#4-查看容器信息" class="headerlink" title="4.查看容器信息"></a>4.查看容器信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#查看运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line"><span class="number">207</span>d1c076699   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">18</span> seconds ago   Up <span class="number">16</span> seconds   <span class="number">80</span><span class="operator">/</span>tcp    hardcore_matsumoto</span><br><span class="line">dfe6d6d768ea   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">19</span> seconds ago   Up <span class="number">18</span> seconds   <span class="number">80</span><span class="operator">/</span>tcp    competent_mccarthy</span><br><span class="line">d9a61935cb5f   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">21</span> seconds ago   Up <span class="number">20</span> seconds   <span class="number">80</span><span class="operator">/</span>tcp    nervous_yonath</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看所有容器运行的与没运行的都显示</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES</span><br><span class="line"><span class="number">207</span>d1c076699   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">2</span> minutes ago   Up <span class="number">2</span> minutes               <span class="number">80</span><span class="operator">/</span>tcp    hardcore_matsumoto</span><br><span class="line">dfe6d6d768ea   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">2</span> minutes ago   Exited (<span class="number">0</span>) <span class="number">2</span> seconds ago             competent_mccarthy</span><br><span class="line">d9a61935cb5f   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">2</span> minutes ago   Up <span class="number">2</span> minutes               <span class="number">80</span><span class="operator">/</span>tcp    nervous_yonath</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看所有容器只看容器id号</span><br><span class="line">#<span class="operator">-</span>a 显示id   <span class="operator">-</span>q 显示所有记录</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>aq</span><br><span class="line"><span class="number">207</span>d1c076699</span><br><span class="line">dfe6d6d768ea</span><br><span class="line">d9a61935cb5f</span><br></pre></td></tr></table></figure>

<h2 id="5-监控容器性能【资源利用】"><a href="#5-监控容器性能【资源利用】" class="headerlink" title="5.监控容器性能【资源利用】"></a>5.监控容器性能【资源利用】</h2><blockquote>
<p><code>docker stats</code>命令用于&#x3D;&#x3D;实时显示&#x3D;&#x3D;运行中的 Docker 容器的&#x3D;&#x3D;资源利用情况&#x3D;&#x3D;，包括 CPU 使用率、内存占用、网络 I&#x2F;O 和磁盘 I&#x2F;O 等指标。使用该命令可以方便地监控容器的性能</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker stats <span class="number">0</span>aa</span><br><span class="line">CONTAINER ID   NAME                      CPU <span class="operator">%</span>     MEM USAGE <span class="operator">/</span> LIMIT    MEM <span class="operator">%</span>     NET I<span class="operator">/</span>O     BLOCK I<span class="operator">/</span>O    PIDS</span><br><span class="line"><span class="number">0</span>aa56e969b52   dxnb888.cn_nginx_latest   <span class="number">0.00</span><span class="operator">%</span>     <span class="number">1.973</span>MiB <span class="operator">/</span> <span class="number">3.84</span>GiB   <span class="number">0.05</span><span class="operator">%</span>     <span class="number">656</span>B <span class="operator">/</span> <span class="number">0</span>B   <span class="number">0</span>B <span class="operator">/</span> <span class="number">8.7</span>kB   <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>参数解释</strong></p>
<p>这是<code>docker stats</code>命令的输出结果，它提供了有关正在运行的容器的资源利用信息。下面是对输出中各列的解释：</p>
<ul>
<li><code>CONTAINER ID</code>：容器的唯一标识符。</li>
<li><code>NAME</code>：容器的名称。</li>
<li><code>CPU %</code>：CPU 使用率，以百分比表示。</li>
<li><code>MEM USAGE / LIMIT</code>：内存使用量和限制。内存使用量显示容器当前使用的内存量，限制显示容器被允许使用的内存量。</li>
<li><code>MEM %</code>：内存利用率，以百分比表示。</li>
<li><code>NET I/O</code>：网络输入&#x2F;输出，显示了容器的网络流量情况。</li>
<li><code>BLOCK I/O</code>：块输入&#x2F;输出，显示了容器的磁盘 I&#x2F;O 情况。</li>
<li><code>PIDS</code>：进程 ID 的数量。</li>
</ul>
<p>在您提供的输出中，它显示了一个名为<code>dxnb888.cn_nginx_latest</code>的容器的资源利用情况。该容器的 CPU 使用率为0.00%，内存使用量为1.973MiB，占其允许的内存量的0.05%，网络 I&#x2F;O 为656字节，块 I&#x2F;O 为0字节，PIDS 为3。这些信息可以帮助您监视容器的性能，并且可以用来诊断和解决性能问题</p>
<h2 id="6-查看容器日志【故障排查】"><a href="#6-查看容器日志【故障排查】" class="headerlink" title="6.查看容器日志【故障排查】"></a>6.查看容器日志【故障排查】</h2><blockquote>
<p><code>docker logs</code>命令用于查看容器的日志输出。通过这个命令，您可以查看容器在运行时输出的日志信息，比如应用程序的输出、错误消息等。这对于故障排除和监视应用程序的运行状态非常有用</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker logs <span class="number">0</span>aa56</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh: <span class="operator">/</span>docker<span class="operator">-</span>entrypoint.d<span class="operator">/</span> 不为空，将尝试执行配置</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh: 在 <span class="operator">/</span>docker<span class="operator">-</span>entrypoint.d<span class="operator">/</span> 中查找 shell 脚本</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh: 启动 <span class="operator">/</span>docker<span class="operator">-</span>entrypoint.d<span class="operator">/</span><span class="number">10</span><span class="operator">-</span>listen<span class="operator">-</span><span class="keyword">on</span><span class="operator">-</span>ipv6<span class="operator">-</span><span class="keyword">by</span><span class="operator">-</span>default.sh</span><br><span class="line"><span class="number">10</span><span class="operator">-</span>listen<span class="operator">-</span><span class="keyword">on</span><span class="operator">-</span>ipv6<span class="operator">-</span><span class="keyword">by</span><span class="operator">-</span>default.sh: info: 获取 <span class="operator">/</span>etc<span class="operator">/</span>nginx<span class="operator">/</span>conf.d<span class="operator">/</span>default.conf 的校验和</span><br><span class="line"><span class="number">10</span><span class="operator">-</span>listen<span class="operator">-</span><span class="keyword">on</span><span class="operator">-</span>ipv6<span class="operator">-</span><span class="keyword">by</span><span class="operator">-</span>default.sh: info: 已启用 IPv6 监听<span class="operator">/</span>etc<span class="operator">/</span>nginx<span class="operator">/</span>conf.d<span class="operator">/</span>default.conf</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh：启动<span class="operator">/</span>docker<span class="operator">-</span>entrypoint.d<span class="operator">/</span><span class="number">20</span><span class="operator">-</span>envsubst<span class="operator">-</span><span class="keyword">on</span><span class="operator">-</span>templates.sh</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh：启动<span class="operator">/</span>docker<span class="operator">-</span>entrypoint.d<span class="operator">/</span><span class="number">30</span><span class="operator">-</span>tune<span class="operator">-</span>worker<span class="operator">-</span>processes.sh</span><br><span class="line"><span class="operator">/</span>docker<span class="operator">-</span>entrypoint.sh：配置完成；准备启动</span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：使用“epoll”事件方法</span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：nginx<span class="operator">/</span><span class="number">1.21</span><span class="number">.5</span></span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：由 gcc <span class="number">10.2</span><span class="number">.1</span> <span class="number">20210110</span>（Debian <span class="number">10.2</span><span class="number">.1</span><span class="number">-6</span>）构建</span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：操作系统：Linux <span class="number">3.10</span><span class="number">.0</span><span class="number">-1160.</span>el7.x86_64</span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：getrlimit（RLIMIT_NOFILE）：<span class="number">1048576</span>：<span class="number">1048576</span></span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：启动工作进程</span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：启动工作进程 <span class="number">31</span></span><br><span class="line"><span class="number">2024</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span><span class="number">18</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> [通知] <span class="number">1</span>#<span class="number">1</span>：启动工作进程 <span class="number">32</span></span><br></pre></td></tr></table></figure>

<p><img src="/image-20240718202242573.png" alt="image-20240718202242573"></p>
<h2 id="7-关闭重启容器"><a href="#7-关闭重启容器" class="headerlink" title="7.关闭重启容器"></a>7.关闭重启容器</h2><blockquote>
<p>基于容器进程的id号或者name名管理容器【镜像名无效】</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>关闭运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                         NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">8</span> minutes ago    Up <span class="number">8</span> minutes    <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp, :::<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp   agitated_shaw</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker stop <span class="number">2100</span></span><br><span class="line"><span class="number">2100</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                        PORTS      NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">8</span> minutes ago    Exited (<span class="number">0</span>) <span class="number">4</span> seconds ago                 agitated_shaw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>启动挂掉的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">start</span> agitated_shaw</span><br><span class="line">agitated_shaw</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS              PORTS                                         NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">13</span> minutes ago   Up About a <span class="keyword">minute</span>   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp, :::<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp   agitated_shaw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>重启运行的容器【重启容器会造成容器内运行的服务重启】</span><br><span class="line">#原容器进程pid</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep redis</span><br><span class="line">polkitd   <span class="number">26551</span>  <span class="number">26531</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">02</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">03</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br><span class="line">polkitd   <span class="number">27141</span>  <span class="number">27120</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">19</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br><span class="line">#重启容器进程</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker restart <span class="number">2100</span></span><br><span class="line"><span class="number">2100</span></span><br><span class="line">#新容器进程pid</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ps <span class="operator">-</span>ef<span class="operator">|</span>grep redis</span><br><span class="line">polkitd   <span class="number">26551</span>  <span class="number">26531</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">02</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">03</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br><span class="line">polkitd   <span class="number">27277</span>  <span class="number">27256</span>  <span class="number">3</span> <span class="number">19</span>:<span class="number">19</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> redis<span class="operator">-</span>server <span class="operator">*</span>:<span class="number">6379</span></span><br></pre></td></tr></table></figure>

<h2 id="8-删除停止容器"><a href="#8-删除停止容器" class="headerlink" title="8.删除停止容器"></a>8.删除停止容器</h2><blockquote>
<p>这是一个用于删除 Docker 容器的命令，请注意，删除容器将导致容器内的&#x3D;&#x3D;所有数据和文件被永久删除&#x3D;&#x3D;</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#查看运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps </span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS         PORTS                                         NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">23</span> minutes ago   Up <span class="number">8</span> minutes   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp, :::<span class="number">26379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp   agitated_shaw</span><br><span class="line"></span><br><span class="line">#停止运行的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker stop <span class="number">2100</span></span><br><span class="line"><span class="number">2100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看所有容器停止的容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                        PORTS     NAMES</span><br><span class="line"><span class="number">2100</span>f9afab72   redis:latest   &quot;docker-entrypoint.s…&quot;   <span class="number">24</span> minutes ago   Exited (<span class="number">0</span>) <span class="number">8</span> seconds ago                agitated_shaw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#删除容器【彻底删除了】</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker rm <span class="number">2100</span></span><br><span class="line"><span class="number">2100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看所有容器都没有了</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps <span class="operator">-</span>a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                        PORTS     NAMES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#一次性删除所有容器记录</span><br><span class="line">docker rm `docker ps <span class="operator">-</span>qa`</span><br></pre></td></tr></table></figure>

<h2 id="9-进入运行容器内部"><a href="#9-进入运行容器内部" class="headerlink" title="9.进入运行容器内部"></a>9.进入运行容器内部</h2><blockquote>
<p><strong>为什么能进入容器开启终端</strong></p>
<p>容器是基于镜像文件创建的，而镜像文件包含了一个完整的文件系统，其中包括操作系统、库文件、应用程序和其他相关文件。宿主机的内核会在容器内运行，但容器与宿主机共享内核。</p>
<p>当您在容器内开启终端时，实际上是在容器的文件系统上启动了一个进程，这个进程是在宿主机的内核下运行的。这样，容器内的终端会与宿主机的内核进行交互，并且可以通过 Docker 守护进程进行管理。</p>
<p>因此，虽然容器利用宿主机的内核运行，但由于容器内有自己的文件系统和应用程序，因此可以在容器内运行终端和其他命令行工具</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#运行一个容器实例</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>d <span class="operator">-</span>p <span class="number">36379</span>:<span class="number">6379</span>  redis </span><br><span class="line">ce5a5f654f68d89416c94d7734effc5b91d25ff9f2d8989e063e7d1c6d419e6e</span><br><span class="line"></span><br><span class="line">#查看容器信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                                         NAMES</span><br><span class="line">ce5a5f654f68   redis     &quot;docker-entrypoint.s…&quot;   <span class="number">4</span> seconds ago        Up <span class="number">3</span> seconds        <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">36379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp, :::<span class="number">36379</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">6379</span><span class="operator">/</span>tcp   confident_saha</span><br><span class="line"></span><br><span class="line">#进入容器开启了终端</span><br><span class="line">#docker <span class="keyword">exec</span>进入容器命令</span><br><span class="line">#<span class="operator">-</span>i开启标准准入 <span class="operator">-</span>t分配终端  <span class="operator">-</span>it允许与终端交互</span><br><span class="line">#<span class="operator">/</span>bin<span class="operator">/</span>bash 进入容器执行的命令</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">exec</span> <span class="operator">-</span>it  ce5  <span class="operator">/</span>bin<span class="operator">/</span>bash</span><br><span class="line">root<span class="variable">@ce5a5f654f68</span>:<span class="operator">~</span># </span><br><span class="line">root<span class="variable">@ce5a5f654f68</span>:<span class="operator">~</span># </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#启动容器时就进入容器开启终端</span><br><span class="line">docker run <span class="operator">-</span>it alpine <span class="operator">/</span>bin<span class="operator">/</span>sh</span><br></pre></td></tr></table></figure>

<h2 id="10-指定容器名运行"><a href="#10-指定容器名运行" class="headerlink" title="10.指定容器名运行"></a>10.指定容器名运行</h2><blockquote>
<p>在 Docker 中，<code>docker run</code> 命令用于创建和运行一个新的容器。<code>--name</code> 标志允许您为容器指定一个自定义的名称。这对于在容器化应用程序时非常有用，因为它可以让您使用易于识别和管理的名称来标识容器</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#指定容器名称运行容器</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="comment">--name dxnb888.cn_nginx_test -d -p 880:80  nginx:latest</span></span><br><span class="line"><span class="number">0</span>aa56e969b52b436c86e78e2bf30c0d383571530d4b0a681b621c0ff9d7b72d2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看运行容器信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                                 NAMES</span><br><span class="line"><span class="number">0</span>aa56e969b52   nginx:latest   &quot;/docker-entrypoint.…&quot;   <span class="number">6</span> seconds ago   Up <span class="number">4</span> seconds   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">880</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp, :::<span class="number">880</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp   dxnb888.cn_nginx_latest</span><br></pre></td></tr></table></figure>

<h2 id="11-查看容器详细信息"><a href="#11-查看容器详细信息" class="headerlink" title="11.查看容器详细信息"></a>11.查看容器详细信息</h2><blockquote>
<p><code>docker inspect</code>命令用于获取有关 Docker 容器、镜像、网络或卷的详细信息。该命令可用于检索有关特定 Docker 对象的元数据，如配置、网络设置、挂载的卷等等</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#查看容器详细信息</span><br><span class="line">docker inspect</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#提取了容器运行的ip地址，通过参数语法提取了json格式字段值</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker inspect <span class="number">0</span>aa  <span class="comment">--format &quot;&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;&quot;</span></span><br><span class="line"><span class="number">172.17</span><span class="number">.0</span><span class="number">.2</span></span><br></pre></td></tr></table></figure>

<h2 id="12-基础镜像运行时必须有前台进程"><a href="#12-基础镜像运行时必须有前台进程" class="headerlink" title="12.基础镜像运行时必须有前台进程"></a>12.基础镜像运行时必须有前台进程</h2><blockquote>
<p>容器内的进程必须处于前台运行状态，否则容器就会直接退出</p>
</blockquote>
<p>在 Docker 中，容器的生命周期是由容器内运行的主进程（也称为前台进程）的生命周期来决定的。当主进程退出时，容器也会随之退出。这是由于 Docker 引擎的设计如此，为了确保容器的稳定和一致性。</p>
<p>如果没有一个长期运行的主进程，容器就会立即退出，因为 Docker 认为容器的任务已经完成。这就是为什么在容器中运行一个长期运行的命令或进程，如 <code>tail -f /dev/null</code>，可以保持容器处于运行状态而不退出。这个命令会持续运行并占据着容器的进程空间，使得容器保持活跃状态。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#测试只基于发行版镜像运行容器，不加任何容器内执行命令</span><br><span class="line">docker run <span class="operator">-</span>d centos</span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#基础镜像运行容器时加上容器内执行命令</span><br><span class="line">docker run <span class="operator">-</span>d centos tail <span class="operator">-</span>f</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure>



<h1 id="docker镜像文件详解"><a href="#docker镜像文件详解" class="headerlink" title="docker镜像文件详解"></a>docker镜像文件详解</h1><blockquote>
<p>一个完整的Docker镜像可以支撑容器的运行，镜像提供文件系统</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#下载centos系统镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull centos</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> tag: latest</span><br><span class="line">latest: Pulling <span class="keyword">from</span> library<span class="operator">/</span>ubuntu</span><br><span class="line"><span class="number">7</span>b1a6ab2e44d: Pull complete </span><br><span class="line">Digest: sha256:<span class="number">626</span>ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> ubuntu:latest</span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>ubuntu:latest</span><br></pre></td></tr></table></figure>

<h2 id="1-内核与发行版"><a href="#1-内核与发行版" class="headerlink" title="1.内核与发行版"></a>1.内核与发行版</h2><blockquote>
<p>传统的虚拟机安装操作系统所提供的系统镜像，包含两部分，内核+发行版</p>
</blockquote>
<p><strong>Linux内核部分</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#uname <span class="operator">-</span>r</span><br><span class="line"><span class="number">3.10</span><span class="number">.0</span><span class="number">-862.</span>el7.x86_64</span><br></pre></td></tr></table></figure>

<p><strong>系统发行版部分</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#cat <span class="operator">/</span>etc<span class="operator">/</span>os<span class="operator">-</span><span class="keyword">release</span> </span><br><span class="line">NAME<span class="operator">=</span>&quot;CentOS Linux&quot;</span><br><span class="line">VERSION<span class="operator">=</span>&quot;7 (Core)&quot;</span><br><span class="line">ID<span class="operator">=</span>&quot;centos&quot;</span><br><span class="line">ID_LIKE<span class="operator">=</span>&quot;rhel fedora&quot;</span><br><span class="line">VERSION_ID<span class="operator">=</span>&quot;7&quot;</span><br><span class="line">PRETTY_NAME<span class="operator">=</span>&quot;CentOS Linux 7 (Core)&quot;</span><br><span class="line">ANSI_COLOR<span class="operator">=</span>&quot;0;31&quot;</span><br><span class="line">CPE_NAME<span class="operator">=</span>&quot;cpe:/o:centos:centos:7&quot;</span><br><span class="line">HOME_URL<span class="operator">=</span>&quot;https://www.centos.org/&quot;</span><br><span class="line">BUG_REPORT_URL<span class="operator">=</span>&quot;https://bugs.centos.org/&quot;</span><br><span class="line"></span><br><span class="line">CENTOS_MANTISBT_PROJECT<span class="operator">=</span>&quot;CentOS-7&quot;</span><br><span class="line">CENTOS_MANTISBT_PROJECT_VERSION<span class="operator">=</span>&quot;7&quot;</span><br><span class="line">REDHAT_SUPPORT_PRODUCT<span class="operator">=</span>&quot;centos&quot;</span><br><span class="line">REDHAT_SUPPORT_PRODUCT_VERSION<span class="operator">=</span>&quot;7&quot;</span><br></pre></td></tr></table></figure>

<p><strong>docker镜像是不包含内核的，只是下载了某个发行版部分</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>查看刚才运行的容器实例</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                   NAMES</span><br><span class="line">bfff8ff41c7a   nginx:<span class="number">1.19</span><span class="number">.7</span>   &quot;/docker-entrypoint.…&quot;   <span class="number">26</span> minutes ago   Up <span class="number">26</span> minutes   <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8080</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp, :::<span class="number">8080</span><span class="operator">-</span><span class="operator">&gt;</span><span class="number">80</span><span class="operator">/</span>tcp   infallible_hellman</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>查看容器发行版与宿主机发行版，发行版不同</span><br><span class="line">#容器发行版是debian10</span><br><span class="line">#docker <span class="keyword">exec</span>（与运行中的容器执行交互式的命令），<span class="operator">-</span>it（打开了一个交互式的 Bash 终端）</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">exec</span> <span class="operator">-</span>it bff bash</span><br><span class="line">root<span class="variable">@bfff8ff41c7a</span>:<span class="operator">/</span># cat <span class="operator">/</span>etc<span class="operator">/</span>os<span class="operator">-</span><span class="keyword">release</span> </span><br><span class="line">PRETTY_NAME<span class="operator">=</span>&quot;Debian GNU/Linux 10 (buster)&quot;</span><br><span class="line">NAME<span class="operator">=</span>&quot;Debian GNU/Linux&quot;</span><br><span class="line">VERSION_ID<span class="operator">=</span>&quot;10&quot;</span><br><span class="line">VERSION<span class="operator">=</span>&quot;10 (buster)&quot;</span><br><span class="line">VERSION_CODENAME<span class="operator">=</span>buster</span><br><span class="line">ID<span class="operator">=</span>debian</span><br><span class="line">#宿主机发行版是centos7</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#cat <span class="operator">/</span>etc<span class="operator">/</span>os<span class="operator">-</span><span class="keyword">release</span> </span><br><span class="line">NAME<span class="operator">=</span>&quot;CentOS Linux&quot;</span><br><span class="line">VERSION<span class="operator">=</span>&quot;7 (Core)&quot;</span><br><span class="line">ID<span class="operator">=</span>&quot;centos&quot;</span><br><span class="line">ID_LIKE<span class="operator">=</span>&quot;rhel fedora&quot;</span><br><span class="line">VERSION_ID<span class="operator">=</span>&quot;7&quot;</span><br><span class="line">PRETTY_NAME<span class="operator">=</span>&quot;CentOS Linux 7 (Core)&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>查看容器的内核信息，对比宿主机内核信息，相同的内核信息，容器调用了宿主机的内核</span><br><span class="line">#容器</span><br><span class="line">root<span class="variable">@132aa58824a6</span>:<span class="operator">/</span># cat <span class="operator">/</span>proc<span class="operator">/</span>version </span><br><span class="line">Linux version <span class="number">3.10</span><span class="number">.0</span><span class="number">-862.</span>el7.x86_64 (builder<span class="variable">@kbuilder</span>.dev.centos.org) (gcc version <span class="number">4.8</span><span class="number">.5</span> <span class="number">20150623</span> (Red Hat <span class="number">4.8</span><span class="number">.5</span><span class="number">-28</span>) (GCC) ) #<span class="number">1</span> SMP Fri Apr <span class="number">20</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">24</span> UTC <span class="number">2018</span></span><br><span class="line">root<span class="variable">@132aa58824a6</span>:<span class="operator">/</span># </span><br><span class="line">root<span class="variable">@132aa58824a6</span>:<span class="operator">/</span># exit</span><br><span class="line">exit</span><br><span class="line">#宿主机</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#cat <span class="operator">/</span>proc<span class="operator">/</span>version </span><br><span class="line">Linux version <span class="number">3.10</span><span class="number">.0</span><span class="number">-862.</span>el7.x86_64 (builder<span class="variable">@kbuilder</span>.dev.centos.org) (gcc version <span class="number">4.8</span><span class="number">.5</span> <span class="number">20150623</span> (Red Hat <span class="number">4.8</span><span class="number">.5</span><span class="number">-28</span>) (GCC) ) #<span class="number">1</span> SMP Fri Apr <span class="number">20</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">24</span> UTC <span class="number">2018</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#</span><br></pre></td></tr></table></figure>

<blockquote>
<p>小结：容器中的服务运行，是基于下载的发行版+宿主机本身内核+运行环境【依赖，文件，配置】</p>
</blockquote>
<p>&#x2F;proc文件系统，它不是普通的文件系统，而是系统内核的映像，也就是说，该目录中的文件是存放在系统内存之中的，它以文件系统的方式为访问系统内核数据的操作提供接口。而我们使用命令“uname -a”的信息就是从该文件获取的，当然用方法二的命令直接查看它的内容也可以达到同等效果.另外，加上参数”a”是获得详细信息，如果不加参数为查看系统名称。</p>
<h2 id="2-容器镜像定义"><a href="#2-容器镜像定义" class="headerlink" title="2.容器镜像定义"></a>2.容器镜像定义</h2><blockquote>
<p>在Docker中，镜像是通过一层一层的添加来构建的，每一层都是对前一层的修改和增量。这种层级结构使得镜像可以高效地共享和重复使用已有的层，从而节省存储空间和加快镜像的构建和传输速度。</p>
<ul>
<li>获取基础镜像：选择一个适合的发行版平台，比如Ubuntu或CentOS，在这个基础上构建MySQL 5.6镜像。</li>
<li>在CentOS镜像中安装MySQL 5.6软件：通过Dockerfile文件或者交互式命令行方式，在CentOS基础镜像中安装MySQL 5.6及其所需的依赖库和配置。</li>
<li>导出镜像：将构建完成的MySQL 5.6镜像导出为镜像文件，并可以根据需要命名为mysql:5.6镜像。</li>
</ul>
<p>这样构建的MySQL 5.6镜像中，CentOS镜像层就是父镜像，MySQL 5.6镜像层则是基于CentOS镜像层构建而成的子镜像层。这种镜像的层级结构使得我们可以更加灵活地管理和共享镜像，同时也能更高效地利用镜像的存储空间。</p>
</blockquote>
<p><img src="/image-20240718143237488.png" alt="image-20240718143237488"></p>
<h2 id="3-镜像文件概述"><a href="#3-镜像文件概述" class="headerlink" title="3.镜像文件概述"></a>3.镜像文件概述</h2><blockquote>
<p>其实就是将业务代码运行的环境，整体打包为单个的文件【虽然Docker镜像可以看作是一个文件，但实际上它是一个可以被Docker引擎操作和管理的软件包（包含了应用程序运行所需的所有内容）】，就是docker镜像</p>
</blockquote>
<p>Docker镜像是用于构建和运行容器的轻量级、可移植的&#x3D;&#x3D;软件包&#x3D;&#x3D;。它&#x3D;&#x3D;包含了运行应用程序所需的所有内容&#x3D;&#x3D;：&#x3D;&#x3D;程序代码&#x3D;&#x3D;、运行时（指的是应用程序在运行时所需的环境和支持）、系统工具、系统库以及设置。Docker镜像可以被快速地部署和复制到各种环境中，而无需担心环境差异性导致的问题。</p>
<p>Docker镜像是以分层的方式构建的，每一层都包含了文件系统的一部分，使得镜像可以高效地共享和重复使用。当运行一个容器时，Docker引擎会基于这些层级关系来创建一个可写的容器层，该层包含了应用程序运行时所需的文件和设置。</p>
<hr>
<p>每一层Docker镜像都包含了文件系统的一部分，这是指在构建Docker镜像时，每一层都会包含一组文件和目录。当构建一个新的镜像时，Docker引擎会根据构建指令将这些文件和目录添加到镜像中，形成一层新的文件系统。这些文件和目录可以包括应用程序的代码、运行时文件、系统库、配置文件等。</p>
<p>由于每一层都是基于前一层进行构建的，因此每一层都只包含了修改和增量的内容。这种分层的设计使得Docker镜像可以高效地共享和重复使用，因为多个镜像可以共享相同的基础层，从而节省存储空间，并且可以更加灵活地管理镜像的构建和更新。</p>
<h2 id="4-创建镜像文件"><a href="#4-创建镜像文件" class="headerlink" title="4.创建镜像文件"></a>4.创建镜像文件</h2><ol>
<li>创建一个Dockerfile：Dockerfile是一个文本文件，其中包含了一系列指令，用于描述如何构建Docker镜像。在Dockerfile中，你可以指定基础镜像、安装软件包、复制文件等操作。</li>
<li>编写Dockerfile：编写Dockerfile时，你需要定义基于哪个基础镜像构建，以及在镜像中需要安装哪些软件、设置哪些环境变量、复制哪些文件等。</li>
<li>构建Docker镜像：在Dockerfile所在的目录中，使用<code>docker build</code>命令来构建Docker镜像，命令格式为<code>docker build -t &lt;镜像名&gt;:&lt;标签&gt; .</code>，其中<code>-t</code>用于指定镜像名和标签，<code>.</code>表示Dockerfile所在的当前目录。</li>
<li>运行容器：构建完成后，你可以使用<code>docker run</code>命令来基于新创建的镜像运行容器，命令格式为<code>docker run -d &lt;镜像名&gt;</code>。</li>
</ol>
<blockquote>
<p>现在docker官方共有仓库里面有大量的镜像，所以最基础的镜像，我们可以在公有仓库直接拉取，因为这些镜像都是原厂维护，可以得到即使的更新和修护</p>
</blockquote>
<p><strong>dockerfile</strong></p>
<p>Dockerfile是一种文本文件，它包含了一系列的指令和配置，用来定义如何构建一个Docker镜像。通过编写Dockerfile，你可以明确地描述镜像中应该包含哪些文件、环境变量、依赖项和其他配置。这个文件允许你自动化地构建镜像，确保在不同环境和不同机器上复制相同的软件运行环境。</p>
<p>一个基本的Dockerfile通常包括以下内容：</p>
<ol>
<li>基础镜像：指定用作基础的镜像，比如Ubuntu、CentOS等。</li>
<li>维护者信息：可选项，用来指定Dockerfile的作者和联系方式。</li>
<li>指令：包括诸如<code>RUN</code>、<code>COPY</code>、<code>ADD</code>等用来构建镜像的指令。</li>
<li>环境变量：设置容器运行时的环境变量。</li>
<li>暴露端口：指定容器运行时需要暴露的端口。</li>
<li>其他配置：如工作目录、入口点等。</li>
</ol>
<p>通过编写Dockerfile，你可以轻松地重复和分享你的应用程序的构建和运行环境。一旦Dockerfile定义好了，你可以使用<code>docker build</code>命令来构建镜像，然后将其部署到Docker容器中运行。这种方式相比手动构建和配置镜像来说更加高效、可靠，并且便于版本控制和团队协作</p>
<p><img src="/image-20240718161506993.png" alt="image-20240718161506993"></p>
<p><strong>docker_commit</strong></p>
<p>当<code>docker commit</code>命令用于将正在运行的容器保存为新的镜像。通过这个命令，你可以在容器运行的基础上进行修改，然后将修改后的容器保存为一个新的镜像。这在一些特定的场景下可能会有用，比如你需要快速创建一个临时镜像来进行测试或调试。</p>
<p>使用<code>docker commit</code>命令时，你需要指定要提交的容器的ID或名称，以及新镜像的名称和标签。需要注意的是，使用<code>docker commit</code>命令创建的镜像通常不是最佳实践，因为它可能会丢失一些Dockerfile中定义的元数据和历史记录。因此，建议优先使用Dockerfile来构建镜像。</p>
<p>总的来说，<code>docker commit</code>命令可以用作临时的快速创建镜像的工具，但在生产环境中，最好还是通过Dockerfile来定义和构建镜像。。</p>
<h2 id="4-镜像分层结构"><a href="#4-镜像分层结构" class="headerlink" title="4.镜像分层结构"></a>4.镜像分层结构</h2><blockquote>
<p><code>docker history</code>命令用于显示指定镜像的历史记录，即显示创建该镜像时所执行的每个步骤和指令。这包括了镜像的层级结构、每一层的大小、创建时间、以及对应的Dockerfile中的指令。</p>
<p>通过运行<code>docker history</code>命令，你可以了解一个镜像是如何构建的，每一步都做了什么修改，以及每个修改对镜像大小的影响。这对于优化镜像大小、理解镜像的构建过程以及排查问题都非常有帮助</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker history nginx:<span class="number">1.17</span><span class="number">.9</span> </span><br><span class="line">IMAGE          CREATED       CREATED <span class="keyword">BY</span>                                      SIZE      COMMENT</span><br><span class="line"><span class="number">5</span>a8dfb2ca731   <span class="number">2</span> years ago   <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">-</span>c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemon…   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  STOPSIGNAL SIGTERM           0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  EXPOSE 80                    0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c ln -sf /dev/stdout /var/log/nginx…   22B       </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -…   57.6MB    </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~buster     0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.3.9        0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.17.9     0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  LABEL maintainer=NGINX Do…   0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        </span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) ADD file:865f9041e12eb341f…   69.2MB</span><br></pre></td></tr></table></figure>

<p><strong>命令查看镜像的分层关系</strong></p>
<p><img src="/image-20240718161718849.png" alt="image-20240718161718849"></p>
<hr>
<p><img src="/image-20240718162322427.png" alt="image-20240718162322427"></p>
<p><strong>Base基础镜像</strong></p>
<blockquote>
<p>常见的基础镜像包括Ubuntu、Alpine、CentOS等发行版的基础镜像</p>
</blockquote>
<p>在Dockerfile中，”base镜像”通常指的是作为构建镜像的起点的基础镜像。基础镜像是构建其他镜像的起点，它包含了操作系统和基本的软件包，供其他镜像进行扩展和定制。当你构建一个新的镜像时，你可以选择一个现有的基础镜像作为起点，然后在其上添加、修改或定制你需要的软件和配置。</p>
<p><strong>aline发行版</strong></p>
<blockquote>
<p>轻量级的linux发行版，体积小几mb，更适合构建dockerfile</p>
</blockquote>
<p>Alpine Linux是一个轻量级的Linux发行版，专注于提供简单、高效和安全的操作系统环境。它采用了musl libc和BusyBox（轻量级的软件集合），并且使用了apk包管理工具。Alpine Linux通常被广泛用于构建容器化应用程序、嵌入式系统和虚拟机环境。</p>
<p>Alpine Linux的一个显著特点是其非常小巧的镜像大小，这使其在容器化环境中具有很高的受欢迎度。其安全性也备受赞誉，因为它的开发人员积极地关注和修复潜在的安全漏洞</p>
<p><strong>musl libc</strong></p>
<p>musl libc是一个轻量级的C标准库，专为嵌入式系统和轻量级Linux发行版而设计。与传统的glibc（GNU C库）相比，musl libc的特点是更小、更快、更简洁，同时也更注重代码的清晰性和可移植性。</p>
<p>musl libc采用了一种替代的设计方法，以使其尽可能地遵循POSIX标准，并且在代码的安全性和可靠性方面进行了优化。它的小巧和高效性使得它在嵌入式系统和一些对资源消耗要求较高的环境中非常受欢迎。</p>
<p>许多轻量级的Linux发行版，如Alpine Linux等，都采用了musl libc作为其标准C库。这些发行版通常以小巧、高效和安全著称，而musl libc是它们能够实现这些特点的重要组成部分之一。</p>
<p><strong>busybox</strong></p>
<p>BusyBox是一个轻量级的软件集合，它封装了许多常见的Unix工具和命令，如sh、ls、grep等，这些工具和命令通常用于在Linux系统上进行命令行操作。BusyBox的设计目标是将许多常见的Unix工具打包到一个单一的可执行文件中，以节省空间和资源，并且可以在嵌入式系统和资源受限的环境中使用。BusyBox通常被用于嵌入式系统、嵌入式设备、路由器、手机等资源受限的环境中，以提供基本的命令行工具和功能。</p>
<p>在容器领域，BusyBox也常被用作基础镜像，用于构建轻量级的容器。由于BusyBox的小巧和高效，它可以帮助减小镜像的体积，并且提供了一些基本的Unix命令和工具，使得容器可以在精简的环境中运行。因此，BusyBox在容器化应用中具有一定的地位和作用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#搜索alpine镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker <span class="keyword">search</span>  alpine</span><br><span class="line">NAME                                    DESCRIPTION                                     STARS     OFFICIAL</span><br><span class="line">alpine                                  A minimal Docker image based <span class="keyword">on</span> Alpine Linux…   <span class="number">10922</span>     [OK]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#下载最新版</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull alpine</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> tag: latest</span><br><span class="line">latest: Pulling <span class="keyword">from</span> library<span class="operator">/</span>alpine</span><br><span class="line"><span class="number">59</span>bf1c3509f3: Pull complete </span><br><span class="line">Digest: sha256:<span class="number">21</span>a3deaa0d32a8057914f36584b5288d2e5ecc984380bc0118285c70fa8c9300</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> alpine:latest</span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>alpine:latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看镜像文件体积证明alpine体积很小</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br><span class="line">redis        latest    <span class="number">7614</span>ae9453d1   <span class="number">2</span> years ago   <span class="number">113</span>MB</span><br><span class="line">alpine       latest    c059bfaa849c   <span class="number">2</span> years ago   <span class="number">5.59</span>MB</span><br><span class="line">nginx        <span class="number">1.19</span><span class="number">.7</span>    <span class="number">35</span>c43ace9216   <span class="number">3</span> years ago   <span class="number">133</span>MB</span><br><span class="line">mysql        <span class="number">5.7</span><span class="number">.25</span>    <span class="number">98455</span>b9624a9   <span class="number">5</span> years ago   <span class="number">372</span>MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#运行apline发行版镜像容器，进入容器查看操作系统信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker run <span class="operator">-</span>it alpine <span class="operator">/</span>bin<span class="operator">/</span>sh</span><br><span class="line"><span class="operator">/</span> # cat <span class="operator">/</span>etc<span class="operator">/</span>os<span class="operator">-</span><span class="keyword">release</span> </span><br><span class="line">NAME<span class="operator">=</span>&quot;Alpine Linux&quot;</span><br><span class="line">ID<span class="operator">=</span>alpine</span><br><span class="line">VERSION_ID<span class="operator">=</span><span class="number">3.15</span><span class="number">.0</span></span><br><span class="line">PRETTY_NAME<span class="operator">=</span>&quot;Alpine Linux v3.15&quot;</span><br><span class="line">HOME_URL<span class="operator">=</span>&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL<span class="operator">=</span>&quot;https://bugs.alpinelinux.org/&quot;</span><br></pre></td></tr></table></figure>

<p><strong>docker run -it alpine &#x2F;bin&#x2F;sh命令解释</strong></p>
<p>这条命令的意思是在 Docker 中运行一个名为 Alpine 的基础镜像，并且使用交互模式（interactive mode）启动一个 shell 终端。</p>
<p>在这个命令中：</p>
<ul>
<li><code>docker run</code> 是用来启动一个容器的命令。</li>
<li><code>-it</code> 参数结合了两个标记，<code>-i</code> 表示交互式操作，<code>-t</code> 表示分配一个终端（tty）。</li>
<li><code>alpine</code> 是要运行的容器的名称，这里指定了使用 Alpine Linux 这个基础镜像。</li>
<li><code>/bin/sh</code> 指定了要在容器中运行的命令，这里是启动一个 shell 终端。</li>
</ul>
<p>运行这个命令后，你将进入一个交互式的 shell 终端，里面你可以在 Alpine 容器中执行命令。当你退出这个容器的终端时，容器也会停止运行。</p>
<p><strong>镜像分层的作用</strong></p>
<p>镜像分层的作用主要体现在以下几个方面：</p>
<ol>
<li>节省存储空间：镜像分层结构中的每个层都是只读的，并且可以被多个镜像共享和重用。这意味着相同的文件只需要存储一次，可以被多个镜像引用，从而减少了存储空间的占用。</li>
<li>增量更新：当对镜像进行修改或更新时，只需要新增或修改相应的层，而不需要重新构建整个镜像。这种增量更新的方式可以提高镜像的构建速度和效率。</li>
<li>快速部署：由于镜像分层结构的特性，当启动一个容器时，Docker 只需要将各层联合挂载在一起，而不需要复制整个文件系统。这样可以快速启动容器，并且节省了存储和网络带宽。</li>
<li>版本控制：镜像分层结构使得镜像的不同版本之间可以共享相同的层，只需要新增或修改相关的层即可。这样可以更方便地管理和维护不同版本的镜像。</li>
</ol>
<p>总的来说，镜像分层的作用在于提高了镜像的效率、灵活性和可维护性，同时也有利于节省存储空间和加快容器的部署速度。这些特性使得容器技术在开发、测试和部署过程中更加高效和便捷</p>
<blockquote>
<p>即使多个容器共享一个base镜像，某个容器修改了base镜像的内容，例如修改&#x2F;etc&#x2F;下配置文件，其他容器的&#x2F;etc&#x2F;下内容是不会被修改的，修改动作只限制在单个容器内，这就是容器的写入时复制特性（Copy-on-write）。</p>
</blockquote>
<p><img src="/image-20240718170243456.png" alt="image-20240718170243456"></p>
<p><strong>联合文件系统</strong></p>
<p>在容器技术中，镜像多层是通过联合文件系统（Union File System）技术来实现的。联合文件系统是一种将多个文件系统合并为单个文件系统的方法，它允许将不同层的文件系统叠加在一起，形成一个统一的视图。</p>
<p>常见的联合文件系统包括 OverlayFS、AUFS（Another Union File System）、btrfs 等。这些联合文件系统技术允许将不同层的文件系统以只读方式叠加在一起，同时使得文件系统的修改操作能够在只读层之上创建新的可写层。</p>
<p>当容器启动时，这些层会被联合挂载在一起，形成一个完整的文件系统视图，从而实现了镜像多层的效果。这种技术使得镜像的构建和管理变得更加灵活和高效。</p>
<p><img src="/image-20240718170742104.png" alt="image-20240718170742104"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#下载镜像是会一层层下载</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker pull mysql:<span class="number">5.7</span></span><br><span class="line"><span class="number">5.7</span>: Pulling <span class="keyword">from</span> library<span class="operator">/</span>mysql</span><br><span class="line"><span class="number">72</span>a69066d2fe: Pull complete </span><br><span class="line"><span class="number">93619</span>dbc5b36: Pull complete </span><br><span class="line"><span class="number">99</span>da31dd6142: Pull complete </span><br><span class="line"><span class="number">626033</span>c43d70: Pull complete </span><br><span class="line"><span class="number">37</span>d5d7efb64e: Pull complete </span><br><span class="line">ac563158d721: Pull complete </span><br><span class="line">d2ba16033dad: Pull complete </span><br><span class="line"><span class="number">0</span>ceb82207cd7: Pull complete </span><br><span class="line"><span class="number">37</span>f2405cae96: Pull complete </span><br><span class="line">e2482e017e53: Pull complete </span><br><span class="line"><span class="number">70</span>deed891d42: Pull complete </span><br><span class="line">Digest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> mysql:<span class="number">5.7</span></span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure>

<h2 id="5-镜像与容器工作原理"><a href="#5-镜像与容器工作原理" class="headerlink" title="5.镜像与容器工作原理"></a>5.镜像与容器工作原理</h2><p>镜像和容器是现代应用部署和管理中的核心概念，特别是在使用 Docker 等容器化平台时。它们各自有不同的作用和工作原理，但又紧密相关。以下是它们的详细解释：</p>
<blockquote>
<p><strong>镜像（Image）</strong></p>
</blockquote>
<p><strong>定义</strong></p>
<ul>
<li>镜像是一个轻量级、可执行的独立软件包，包含运行某个应用程序所需的所有代码、运行时环境、库、环境变量和配置文件。它是容器的蓝图。</li>
</ul>
<p><strong>工作原理</strong></p>
<ol>
<li><strong>创建</strong>：<ul>
<li>镜像通常通过编写一个 <code>Dockerfile</code> 文件来创建。<code>Dockerfile</code> 是一个文本文件，定义了如何从基础镜像（如 <code>ubuntu</code>、<code>alpine</code> 等）构建新的镜像，包括添加文件、安装软件、设置环境变量等步骤。</li>
</ul>
</li>
<li><strong>构建</strong>：<ul>
<li>通过 Docker CLI（如 <code>docker build</code> 命令）根据 <code>Dockerfile</code> 构建镜像。Docker 引擎根据 <code>Dockerfile</code> 中的指令逐步构建镜像。</li>
</ul>
</li>
<li><strong>存储</strong>：<ul>
<li>镜像被存储在 Docker 镜像仓库中（如 Docker Hub 或私有仓库）。这些仓库可以是公共的或私有的，用于分发和共享镜像。</li>
</ul>
</li>
<li><strong>分层结构</strong>：<ul>
<li>镜像采用分层结构，每一层都是对上一层的增量修改。这样的设计使得镜像可以复用和共享，减少存储空间的占用。</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>容器（Container）</strong></p>
</blockquote>
<p><strong>定义</strong></p>
<ul>
<li>容器是一个运行中的镜像实例，它包含镜像中的应用程序和运行环境。容器是轻量级的、隔离的，可以在不同的环境中运行而不会影响主机系统。</li>
</ul>
<p><strong>工作原理</strong></p>
<ol>
<li><strong>运行</strong>：<ul>
<li>当你运行一个镜像时，Docker 引擎会创建一个容器实例。容器在启动时会使用镜像中的文件系统，并将镜像中的内容与容器内的文件系统进行组合。</li>
</ul>
</li>
<li><strong>隔离</strong>：<ul>
<li>容器提供进程隔离，使用操作系统级别的虚拟化技术，如 Linux 的命名空间（namespace）和控制组（cgroup），确保容器中的进程和资源与其他容器和主机系统隔离。</li>
</ul>
</li>
<li><strong>可写层</strong>：<ul>
<li>在容器中运行时，所有对文件系统的修改都发生在一个可写层上，而镜像的原始内容保持不变。这个可写层允许容器在运行时对数据进行读写操作。</li>
</ul>
</li>
<li><strong>启动和停止</strong>：<ul>
<li>启动一个容器时，Docker 引擎从镜像中提取文件系统的内容，并在该文件系统上运行应用程序。容器可以随时启动和停止，并在停止后保留其状态，以便以后可以恢复或删除。</li>
</ul>
</li>
<li><strong>资源管理</strong>：<ul>
<li>容器使用操作系统的资源管理功能（如 CPU、内存、存储）来限制和分配资源，确保不同容器之间的资源使用不会相互干扰。</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>镜像与容器的关系</strong></p>
</blockquote>
<ul>
<li><strong>镜像是容器的模板</strong>：<ul>
<li>镜像定义了容器的初始状态和环境，而容器则是镜像的运行实例。镜像是静态的，只读的；容器是动态的、可写的。</li>
</ul>
</li>
<li><strong>容器从镜像创建</strong>：<ul>
<li>每次运行一个容器时，Docker 引擎都会从指定的镜像创建一个新的容器实例。容器将使用镜像中的文件系统，并在此基础上进行操作。</li>
</ul>
</li>
<li><strong>镜像的层级结构</strong>：<ul>
<li>镜像的分层结构允许多个容器共享相同的基础镜像层，从而减少存储和网络带宽的消耗。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>总结</strong></p>
</blockquote>
<ul>
<li><strong>镜像</strong> 是一个包含应用程序及其依赖的只读模板。</li>
<li><strong>容器</strong> 是镜像的可执行实例，提供隔离和轻量级的环境来运行应用程序。</li>
</ul>
<p>这种分离和封装的方式使得开发、测试和生产环境中的应用程序更加一致和可靠，也提高了资源利用率和管理效率。如果你有任何特定的疑问或需要进一步深入了解，请告诉我</p>
<p><img src="/1662000896363-1721478481890-1.png" alt="1662000896363"></p>
<h1 id="docker数据目录结构"><a href="#docker数据目录结构" class="headerlink" title="docker数据目录结构"></a>docker数据目录结构</h1><h2 id="1-数据根目录"><a href="#1-数据根目录" class="headerlink" title="1.数据根目录"></a>1.数据根目录</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#查看docker数据根目录存储位置</span><br><span class="line">root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker info <span class="operator">|</span>grep <span class="operator">-</span>i <span class="string">&#x27;root dir&#x27;</span></span><br><span class="line"> Docker Root Dir: <span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">#根目录下存储结构</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ll <span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker</span><br><span class="line">total <span class="number">16</span></span><br><span class="line">drwx<span class="comment">--x--x.  4 root root  138 Jul 17 21:07 buildkit</span></span><br><span class="line">drwx<span class="comment">--x---. 11 root root 4096 Jul 18 16:37 containers</span></span><br><span class="line"><span class="operator">-</span>rw<span class="comment">-------.  1 root root   36 Jul 17 21:07 engine-id</span></span><br><span class="line">drwx<span class="comment">------.  3 root root   22 Jul 17 21:07 image</span></span><br><span class="line">drwxr<span class="operator">-</span>x<span class="comment">---.  3 root root   19 Jul 17 21:07 network</span></span><br><span class="line">drwx<span class="comment">--x---. 50 root root 4096 Jul 18 16:37 overlay2</span></span><br><span class="line">drwx<span class="comment">------.  4 root root   32 Jul 17 21:07 plugins</span></span><br><span class="line">drwx<span class="comment">------.  2 root root    6 Jul 17 21:17 runtimes</span></span><br><span class="line">drwx<span class="comment">------.  2 root root    6 Jul 17 21:07 swarm</span></span><br><span class="line">drwx<span class="comment">------.  2 root root    6 Jul 18 16:31 tmp</span></span><br><span class="line">drwx<span class="comment">-----x.  2 root root   50 Jul 17 21:17 volumes</span></span><br></pre></td></tr></table></figure>

<p><strong>docker数据根目录下的存储结构</strong></p>
<p>buildkit：用于存储Docker BuildKit的相关数据，包括构建过程中使用的缓存和临时文件。</p>
<p>containers：存储Docker容器的相关信息，每个容器在该目录下都有对应的子目录，包括它们的运行时状态、日志等。</p>
<p>engine-id：包含了Docker引擎的唯一标识符，用于唯一标识当前Docker引擎实例。</p>
<p>image：存储Docker镜像的地方，每个镜像在该目录下都有对应的子目录。</p>
<p>network：包含了Docker网络的相关数据，包括网络配置和状态等。</p>
<p>overlay2：是Docker默认的存储驱动程序，用于存储镜像和容器的文件系统。</p>
<p>plugins：存储Docker插件的位置，用于扩展Docker功能或提供额外的功能。</p>
<p>runtimes：存储Docker运行时的相关数据，包括容器运行时等。</p>
<p>swarm：如果使用Docker Swarm进行容器编排，该目录存储了Swarm的相关数据。</p>
<p>tmp：用于存储临时文件的目录。</p>
<p>volumes：包含Docker卷的相关信息，每个卷在该目录下都有对应的子目录。</p>
<p>总的来说，这些目录包含了Docker守护进程运行时所需的各种数据，包括容器、镜像、网络、插件等。</p>
<h2 id="2-存储引擎目录"><a href="#2-存储引擎目录" class="headerlink" title="2.存储引擎目录"></a>2.存储引擎目录</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#查看存储引擎目录路径</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker info <span class="operator">|</span>grep <span class="operator">-</span>i <span class="string">&#x27;storage&#x27;</span></span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">#查看目录磁盘使用情况</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#du <span class="operator">-</span>sh <span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker<span class="operator">/</span>overlay2<span class="operator">/</span></span><br><span class="line"><span class="number">1.4</span>G	<span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker<span class="operator">/</span>overlay2<span class="operator">/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看存储目录下的图层目录</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ls  <span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker<span class="operator">/</span>overlay2<span class="operator">/</span></span><br><span class="line"><span class="number">0022</span>eb0cb78189d791e3b3edb9d397be5e64028a357c065a6b9cb4d6bc6b2a25</span><br><span class="line"><span class="number">08</span>f00f956552f8fad00ca19c86fdb043cae096fb3a04b05692baeb93853dc3ea</span><br><span class="line"><span class="number">08</span>f00f956552f8fad00ca19c86fdb043cae096fb3a04b05692baeb93853dc3ea<span class="operator">-</span>init</span><br><span class="line"><span class="number">0</span>b0c2b4e8bd9af265d7d3b967be7f754dd24028f913c0a02f4ab0056cfd2998e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#图层目录下的子目录</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ls  <span class="operator">/</span>var<span class="operator">/</span>lib<span class="operator">/</span>docker<span class="operator">/</span>overlay2<span class="operator">/</span><span class="number">55</span>f7b125d3e65b19611b467399b03d555bf5cb15666dbb8e3cee053bee7b68e</span><br><span class="line">committed  diff  link  lower  work</span><br></pre></td></tr></table></figure>

<p><strong>图层目录是什么</strong></p>
<p>在Docker中，图层目录是指由镜像的多个层(layer)组成的结构，每个层都包含了文件系统的一部分。当你构建一个新的镜像时，Docker会使用这些层来创建一个新的文件系统。每个层都代表了对文件系统的一系列修改，比如添加、删除或修改文件。</p>
<p>这些层以一种类似于链表的方式连接在一起，形成了一个图层结构。当你启动一个容器时，Docker会将这些层叠加在一起，形成一个完整的文件系统视图，从而创建了一个可运行的容器。</p>
<p>图层目录的概念使得Docker镜像的构建和管理变得非常高效，因为它们可以共享相同的基础层，减少了重复的存储和提高了镜像的复用性。</p>
<p><strong>图层目录下子目录结构</strong></p>
<p>committed：该子目录包含已经提交（committed）的更改，也就是已经被保存为新的镜像的更改。</p>
<p>diff：这个目录包含了当前的更改，也就是容器的当前状态。</p>
<p>link：这个目录包含了链接信息。</p>
<p>lower：这个目录包含了底层的只读文件系统。</p>
<p>work：这个目录包含了正在进行的更改。</p>
<p>每个子目录都是overlay2图层文件系统的一部分，它们一起构成了一个完整的文件系统。这种分层的方式使得Docker可以高效地管理镜像和容器的文件系统，并且可以节省存储空间。</p>
<h1 id="docker镜像实践操作"><a href="#docker镜像实践操作" class="headerlink" title="docker镜像实践操作"></a>docker镜像实践操作</h1><h2 id="1-下载获取镜像"><a href="#1-下载获取镜像" class="headerlink" title="1.下载获取镜像"></a>1.下载获取镜像</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>下载</span><br><span class="line">[root<span class="variable">@docker01</span> <span class="operator">~</span>]# docker pull centos            #默认标签tag是centos:latest</span><br><span class="line">[root<span class="variable">@docker01</span> <span class="operator">~</span>]# docker pull  centos:<span class="number">7.2</span><span class="number">.1511</span>  #指定版本下载</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>查看本地下载的所有镜像</span><br><span class="line">[root<span class="variable">@docker01</span> <span class="operator">~</span>]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx               latest              <span class="number">4</span>bb46517cac3        <span class="number">3</span> weeks ago         <span class="number">133</span>MB</span><br><span class="line">centos              latest              <span class="number">0</span>d120b6ccaa8        <span class="number">3</span> weeks ago         <span class="number">215</span>MB</span><br><span class="line">centos              <span class="number">7.2</span><span class="number">.1511</span>            <span class="number">9</span>aec5c5fe4ba        <span class="number">17</span> months ago       <span class="number">195</span>MB</span><br></pre></td></tr></table></figure>

<h2 id="2-运行基础镜像"><a href="#2-运行基础镜像" class="headerlink" title="2.运行基础镜像"></a>2.运行基础镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以基础镜像运行一个容器，运行后执行命令，执行bash运行解释器</span></span><br><span class="line"><span class="comment">#-it 可以与终端进行交互参数</span></span><br><span class="line"><span class="comment">#--name 指定镜像名运行</span></span><br><span class="line">[root@docker-01 ~]#docker run -it --name  centos:7.9.2009 bash</span><br><span class="line">[root@8a6490e3d5a2 /]# </span><br><span class="line">[root@8a6490e3d5a2 /]# <span class="built_in">cat</span> /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"></span><br><span class="line">[root@8a6490e3d5a2 /]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 18:41 pts/0    00:00:00 bash</span><br><span class="line">root         17      1  0 18:42 pts/0    00:00:00 ps -ef</span><br></pre></td></tr></table></figure>

<p><strong>docker镜像文件存储目录结构</strong></p>
<ul>
<li><code>committed</code>：这个目录包含已提交的内容，即镜像层的内容。</li>
<li><code>diff</code>：这里包含了容器层的内容，即容器的文件系统的更改。</li>
<li><code>link</code>：这个目录包含了链接文件。</li>
<li><code>lower</code>：这个目录包含了底层的只读层的内容。</li>
<li><code>work</code>：这个目录是 overlay 文件系统的内部使用目录。</li>
</ul>
<h2 id="3-查看本地镜像"><a href="#3-查看本地镜像" class="headerlink" title="3.查看本地镜像"></a>3.查看本地镜像</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>根据名字列出镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images  cent<span class="operator">*</span></span><br><span class="line">REPOSITORY   TAG        IMAGE ID       CREATED         SIZE</span><br><span class="line">centos       <span class="number">7.9</span><span class="number">.2009</span>   eeb6ee3f44bd   <span class="number">11</span> months ago   <span class="number">204</span>MB</span><br><span class="line">centos       latest     <span class="number">5</span>d0da3dc9764   <span class="number">11</span> months ago   <span class="number">231</span>MB</span><br><span class="line">centos       <span class="number">7.7</span><span class="number">.1908</span>   <span class="number">08</span>d05d1d5859   <span class="number">2</span> years ago     <span class="number">204</span>MB</span><br><span class="line">centos       <span class="number">7.6</span><span class="number">.1810</span>   f1cb7c7d58b7   <span class="number">3</span> years ago     <span class="number">202</span>MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>查看指定镜像</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images nginx</span><br><span class="line">nginx         nginx:<span class="number">1.17</span><span class="number">.9</span>  </span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images nginx:<span class="number">1.17</span><span class="number">.9</span> </span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        <span class="number">1.17</span><span class="number">.9</span>    <span class="number">5</span>a8dfb2ca731   <span class="number">2</span> years ago   <span class="number">127</span>MB</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>只查看镜像id，id就代表该镜像了</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images <span class="operator">-</span>q</span><br><span class="line">c20987f18b13</span><br><span class="line">c059bfaa849c</span><br><span class="line">ba6acccedd29</span><br><span class="line">eeb6ee3f44bd</span><br><span class="line"><span class="number">5</span>d0da3dc9764</span><br><span class="line"><span class="number">5</span>a8dfb2ca731</span><br><span class="line"><span class="number">08</span>d05d1d5859</span><br><span class="line">f1cb7c7d58b7</span><br><span class="line"><span class="number">758</span>ec7f3a1ee</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>格式化输出docker信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images <span class="comment">--format &quot;&#123;&#123;.ID&#125;&#125;:&#123;&#123;.Repository&#125;&#125;&quot;</span></span><br><span class="line">c20987f18b13:mysql</span><br><span class="line">c059bfaa849c:alpine</span><br><span class="line">ba6acccedd29:ubuntu</span><br><span class="line">eeb6ee3f44bd:centos</span><br><span class="line"><span class="number">5</span>d0da3dc9764:centos</span><br><span class="line"><span class="number">5</span>a8dfb2ca731:nginx</span><br><span class="line"><span class="number">08</span>d05d1d5859:centos</span><br><span class="line">f1cb7c7d58b7:centos</span><br><span class="line"><span class="number">758</span>ec7f3a1ee:busybox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>更丰富的格式化</span><br><span class="line">#同效果docker images <span class="comment">--format &quot;table &#123;&#123;.ID&#125;&#125; &#123;&#123;.Repository&#125;&#125; &#123;&#123;.Tag&#125;&#125;&quot; | column -t</span></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images <span class="comment">--format &quot;table &#123;&#123;.ID&#125;&#125; &#123;&#123;.Repository&#125;&#125; &#123;&#123;.Tag&#125;&#125;&quot;</span></span><br><span class="line">IMAGE ID       REPOSITORY   TAG</span><br><span class="line">c20987f18b13   mysql        <span class="number">5.7</span></span><br><span class="line">c059bfaa849c   alpine       latest</span><br><span class="line">ba6acccedd29   ubuntu       latest</span><br><span class="line">eeb6ee3f44bd   centos       <span class="number">7.9</span><span class="number">.2009</span></span><br><span class="line"><span class="number">5</span>d0da3dc9764   centos       latest</span><br><span class="line"><span class="number">5</span>a8dfb2ca731   nginx        <span class="number">1.17</span><span class="number">.9</span></span><br><span class="line"><span class="number">08</span>d05d1d5859   centos       <span class="number">7.7</span><span class="number">.1908</span></span><br><span class="line">f1cb7c7d58b7   centos       <span class="number">7.6</span><span class="number">.1810</span></span><br><span class="line"><span class="number">758</span>ec7f3a1ee   busybox      <span class="number">1.29</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>格式化是docker信息提取的高级语法，需要学习下go的template语法</span><br><span class="line"># 基于<span class="comment">--format=&quot;&#123;&#123;json .&#125;&#125;&quot; 拿到详细字段，即可格式化</span></span><br><span class="line"></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images <span class="comment">--format=&quot;&#123;&#123;json .&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images <span class="comment">--format=&quot;&#123;&#123;.CreatedAt&#125;&#125; &#123;&#123;.ID&#125;&#125;  &#123;&#123;.Repository&#125;&#125; &#123;&#123;.Size&#125;&#125; &#123;&#123;.Tag&#125;&#125;&quot; |column -t</span></span><br><span class="line"><span class="number">2021</span><span class="number">-12</span><span class="number">-21</span>  <span class="number">10</span>:<span class="number">56</span>:<span class="number">51</span>  <span class="operator">+</span><span class="number">0800</span>  CST  c20987f18b13  mysql    <span class="number">448</span>MB   <span class="number">5.7</span></span><br><span class="line"><span class="number">2021</span><span class="number">-11</span><span class="number">-25</span>  <span class="number">04</span>:<span class="number">19</span>:<span class="number">40</span>  <span class="operator">+</span><span class="number">0800</span>  CST  c059bfaa849c  alpine   <span class="number">5.59</span>MB  latest</span><br><span class="line"><span class="number">2021</span><span class="number">-10</span><span class="number">-16</span>  <span class="number">08</span>:<span class="number">37</span>:<span class="number">47</span>  <span class="operator">+</span><span class="number">0800</span>  CST  ba6acccedd29  ubuntu   <span class="number">72.8</span>MB  latest</span><br><span class="line"><span class="number">2021</span><span class="number">-09</span><span class="number">-16</span>  <span class="number">02</span>:<span class="number">20</span>:<span class="number">23</span>  <span class="operator">+</span><span class="number">0800</span>  CST  eeb6ee3f44bd  centos   <span class="number">204</span>MB   <span class="number">7.9</span><span class="number">.2009</span></span><br><span class="line"><span class="number">2021</span><span class="number">-09</span><span class="number">-16</span>  <span class="number">02</span>:<span class="number">20</span>:<span class="number">05</span>  <span class="operator">+</span><span class="number">0800</span>  CST  <span class="number">5</span>d0da3dc9764  centos   <span class="number">231</span>MB   latest</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-16</span>  <span class="number">18</span>:<span class="number">09</span>:<span class="number">38</span>  <span class="operator">+</span><span class="number">0800</span>  CST  <span class="number">5</span>a8dfb2ca731  nginx    <span class="number">127</span>MB   <span class="number">1.17</span><span class="number">.9</span></span><br><span class="line"><span class="number">2019</span><span class="number">-11</span><span class="number">-12</span>  <span class="number">08</span>:<span class="number">21</span>:<span class="number">02</span>  <span class="operator">+</span><span class="number">0800</span>  CST  <span class="number">08</span>d05d1d5859  centos   <span class="number">204</span>MB   <span class="number">7.7</span><span class="number">.1908</span></span><br><span class="line"><span class="number">2019</span><span class="number">-03</span><span class="number">-15</span>  <span class="number">05</span>:<span class="number">20</span>:<span class="number">29</span>  <span class="operator">+</span><span class="number">0800</span>  CST  f1cb7c7d58b7  centos   <span class="number">202</span>MB   <span class="number">7.6</span><span class="number">.1810</span></span><br><span class="line"><span class="number">2018</span><span class="number">-12</span><span class="number">-26</span>  <span class="number">16</span>:<span class="number">20</span>:<span class="number">42</span>  <span class="operator">+</span><span class="number">0800</span>  CST  <span class="number">758</span>ec7f3a1ee  busybox  <span class="number">1.15</span>MB  <span class="number">1.29</span></span><br></pre></td></tr></table></figure>

<h2 id="4-删除本地镜像"><a href="#4-删除本地镜像" class="headerlink" title="4.删除本地镜像"></a>4.删除本地镜像</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.删除正在运行的容器的镜像</span><br><span class="line"><span class="comment">#先停止该镜像运行的容器，再删除容器记录</span></span><br><span class="line">docker ps</span><br><span class="line">docker stop &lt;容器id&gt;</span><br><span class="line">docker rm   &lt;容器id&gt;</span><br><span class="line"><span class="comment">#最后就可以删除镜像文件了</span></span><br><span class="line">docker images</span><br><span class="line">docker rmi 【镜像名/镜像id】:镜像版本/不指定删除latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.删除本地镜像文件</span><br><span class="line"><span class="comment">#不指定版本默认删除最新版bash:latest</span></span><br><span class="line">[root<span class="variable">@docker</span>-<span class="number">01</span> ~]<span class="comment">#docker rmi bash</span></span><br><span class="line">Untagged: bash:latest</span><br><span class="line">Untagged: bash<span class="variable">@sha256</span>:876600f8a1ce04df27722f482ebfe6696aa4fec6a61a7ea2cf6d5045a63c5d9a</span><br><span class="line">Deleted: sha256:6a03c8e7e2be03e010d21a78c56090566e418e6957a97e5b8906b0c8df7d4e5b</span><br><span class="line">Deleted: sha256:1e8b878eec0b51c7b2f0013848423799162ab25976dc2994caeeb810ca67b4ac</span><br><span class="line">Deleted: sha256:3bd00f48fdafd060b224766edd1f5566823f41f7b66ab09a34f0262e6c8971de</span><br><span class="line">Deleted: sha256:1a058d5342cc722ad5439cacae4b2b4eedde51d8fe8800fcf28444302355c16d</span><br><span class="line">[root<span class="variable">@docker</span>-<span class="number">01</span> ~]<span class="comment">#docker images</span></span><br><span class="line"><span class="comment">#指定版本删除</span></span><br><span class="line">[root<span class="variable">@docker</span>-<span class="number">01</span> ~]<span class="comment">#docker rmi mysql:5.7.25</span></span><br><span class="line">Untagged: mysql:<span class="number">5.7</span><span class="number">.25</span></span><br><span class="line">Untagged: mysql<span class="variable">@sha256</span>:dba5fed182e64064b688ccd22b2f9cad4ee88608c82f8cff21e17bab8da72b81</span><br><span class="line">Deleted: sha256:98455b9624a96e32b353297bb312913b6bbd62ac195cea2c7dd477209ba572d6</span><br><span class="line">Deleted: sha256:30864c1ff360a3d6f677a58fe78a89116f589c4dd7f32ff7b48e2b45786083d8</span><br><span class="line">Deleted: sha256:731b36653b532066f7a3ae9e75faae04f12bf8ecfcbc797e363b01e43a831b5f</span><br><span class="line">[root<span class="variable">@docker</span>-<span class="number">01</span> ~]<span class="comment">#docker images</span></span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除所有镜像文件</span></span><br><span class="line">docker rmi <span class="string">`docker images -aq`</span></span><br></pre></td></tr></table></figure>

<h2 id="5-镜像存档与导出"><a href="#5-镜像存档与导出" class="headerlink" title="5.镜像存档与导出"></a>5.镜像存档与导出</h2><blockquote>
<p>常用于公司的离线环境使用镜像，默认导出的是tar归档文件</p>
</blockquote>
<p><code>docker save</code> 命令用于将 Docker 镜像保存为一个或多个 tar 归档文件。这些归档文件包含了 Docker 镜像的所有层和元数据，可以通过 <code>docker load</code> 命令恢复为 Docker 镜像。</p>
<p>这个命令通常在以下情况下使用：</p>
<ol>
<li>在不同的环境中传输 Docker 镜像，例如从开发环境传输到生产环境。</li>
<li>备份 Docker 镜像，以便在需要时能够快速还原。</li>
<li>在没有直接访问 Docker 仓库的情况下，将 Docker 镜像传输到另一台主机。</li>
</ol>
<hr>
<p><code>docker load</code> 是 Docker 命令行工具中的一个命令，用于从存档文件中加载 Docker 镜像。这个命令的作用是将由 <code>docker save</code> 命令创建的 Docker 镜像存档文件加载到 Docker 环境中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#导出本地镜像文件到指定目录</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker save <span class="number">605</span>c77 <span class="operator">&gt;</span> nginx:latest.tar</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ls</span><br><span class="line">nginx:latest.tar</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#file nginx\:latest.tar </span><br><span class="line">nginx:latest.tar: POSIX tar archive</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#du <span class="operator">-</span>sh</span><br><span class="line"><span class="number">140</span>M	.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#导入存储镜像的tar包到docker</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID   CREATED   SIZE</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker load <span class="operator">&lt;</span> <span class="operator">/</span>root<span class="operator">/</span>nginx\:latest.tar </span><br><span class="line"><span class="number">2</span>edcec3590a4: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]  <span class="number">83.86</span>MB<span class="operator">/</span><span class="number">83.86</span>MB</span><br><span class="line">e379e8aedd4d: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]     <span class="number">62</span>MB<span class="operator">/</span><span class="number">62</span>MB</span><br><span class="line">b8d6e692a25e: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]  <span class="number">3.072</span>kB<span class="operator">/</span><span class="number">3.072</span>kB</span><br><span class="line">f1db227348d0: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]  <span class="number">4.096</span>kB<span class="operator">/</span><span class="number">4.096</span>kB</span><br><span class="line"><span class="number">32</span>ce5f6a5106: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]  <span class="number">3.584</span>kB<span class="operator">/</span><span class="number">3.584</span>kB</span><br><span class="line">d874fd2bc83b: Loading layer [<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>]  <span class="number">7.168</span>kB<span class="operator">/</span><span class="number">7.168</span>kB</span><br><span class="line">Loaded image ID: sha256:<span class="number">605</span>c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">none</span><span class="operator">&gt;</span>       <span class="operator">&lt;</span><span class="keyword">none</span><span class="operator">&gt;</span>    <span class="number">605</span>c77e624dd   <span class="number">2</span> years ago   <span class="number">141</span>MB</span><br></pre></td></tr></table></figure>

<h2 id="6-查看镜像详细信息"><a href="#6-查看镜像详细信息" class="headerlink" title="6.查看镜像详细信息"></a>6.查看镜像详细信息</h2><blockquote>
<p>无论是查看镜像信息，还是容器的详细信息，都是维护容器的重要手段</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#查看镜像构建历史信息</span><br><span class="line">docker history redis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看镜像的详细信息</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker inspect 镜像名:tag版本<span class="operator">|</span>jq</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Id&quot;: &quot;sha256:605c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85&quot;,</span><br><span class="line">    &quot;RepoTags&quot;: [</span><br><span class="line">      &quot;nginx:latest&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;RepoDigests&quot;: [</span><br><span class="line">      &quot;nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31&quot;</span><br><span class="line">    ],</span><br><span class="line">..........后面有大量的关于镜像信息</span><br></pre></td></tr></table></figure>

<h1 id="docker命令实战练习"><a href="#docker命令实战练习" class="headerlink" title="docker命令实战练习"></a>docker命令实战练习</h1><h2 id="1-容器增删改查"><a href="#1-容器增删改查" class="headerlink" title="1.容器增删改查"></a>1.容器增删改查</h2><p><strong>增</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#启动运行容器</span><br><span class="line">#参数解释：</span><br><span class="line">#run：创建并与运行 </span><br><span class="line">#<span class="operator">-</span>i：开启对容器的标准输入stdin </span><br><span class="line">#<span class="operator">-</span>t：给容器分配一个终端页面  </span><br><span class="line">#<span class="operator">-</span>p：将容器进程端口指定具体端口映射到宿主机上</span><br><span class="line">#<span class="operator">-</span>P：将容器进程端口随机映射端口到宿主机上</span><br><span class="line">#<span class="comment">--name:指定名字创建容器 </span></span><br><span class="line">docker run <span class="operator">-</span>it <span class="operator">-</span>p <span class="number">80</span>:<span class="number">80</span>  <span class="operator">-</span>d <span class="comment">--name test_nginx  容器id</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#启动关闭未运行的容器</span><br><span class="line">docker <span class="keyword">start</span> 容器id</span><br></pre></td></tr></table></figure>

<p><strong>删</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#删除未运行的容器</span><br><span class="line">docker rm 容器id</span><br><span class="line"></span><br><span class="line">#删除全部未运行的容器</span><br><span class="line">docker rm `docker <span class="operator">-</span>qa` </span><br><span class="line"></span><br><span class="line">#删除运行的容器</span><br><span class="line">docker stop 容器id</span><br><span class="line">docker rm 容器id</span><br><span class="line"></span><br><span class="line">#删除全部容器包括运行中的</span><br><span class="line">docker rm <span class="operator">-</span>f  `docker <span class="operator">-</span>qa`</span><br></pre></td></tr></table></figure>

<p><strong>改</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#运行的容器内执行命令</span><br><span class="line">docker <span class="keyword">exec</span>  容器id  容器内执行的具体命令</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#进入容器内部交互执行命令</span><br><span class="line">docker <span class="keyword">exec</span> <span class="operator">-</span>it 容器id  <span class="operator">/</span>bin<span class="operator">/</span>bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#将运行中容器的状态生产新镜像</span><br><span class="line">docker <span class="keyword">commit</span> 容器id  新镜像名:TAG[不设置TAG默认latest标识]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#修改容器的名字</span><br><span class="line">docker rename 原容器名 新容器名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#修改容器状态</span><br><span class="line">docker stop 容器id </span><br><span class="line">docker restart 容器id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#导出容器当前状态导出为镜像文件tar包</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#docker export <span class="number">2</span>db <span class="operator">&gt;</span> <span class="operator">/</span>opt<span class="operator">/</span>caibi_nginx.tar</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#ls <span class="operator">/</span>opt</span><br><span class="line">caibi_nginx.tar</span><br><span class="line">[root<span class="variable">@docker</span><span class="number">-01</span> <span class="operator">~</span>]#file <span class="operator">/</span>opt<span class="operator">/</span>caibi_nginx.tar</span><br><span class="line"><span class="operator">/</span>caibi_nginx.tar: POSIX tar archive</span><br><span class="line">#tar包导入docker镜像文件</span><br><span class="line">docker import  caibi_nginx.tar 镜像文件名:TAG</span><br></pre></td></tr></table></figure>

<p><strong>查</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#查看运行的容器</span><br><span class="line">docker ps</span><br><span class="line">#查看运行容器的id</span><br><span class="line">docker ps <span class="operator">-</span>q</span><br><span class="line">#查看所有容器，容器记录</span><br><span class="line">docker ps <span class="operator">-</span>a</span><br><span class="line">#查看所有容器的id</span><br><span class="line">docker ps <span class="operator">-</span>qa</span><br><span class="line">#查看运行的容器内部运行的服务进程</span><br><span class="line">docker top</span><br><span class="line">#查看运行容器的端口映射信息</span><br><span class="line">docker port</span><br><span class="line">#查看容器实例日志信息，正常运行日志与错误日志结合打印</span><br><span class="line">docker logs</span><br><span class="line">#查看容器实例的所有信息，已json格式输出</span><br><span class="line">docker inspect</span><br><span class="line">#查看docker引擎的信息</span><br><span class="line">docker info</span><br><span class="line">#监控docker实例对宿主机硬件资源消耗情况</span><br><span class="line">docker stats</span><br></pre></td></tr></table></figure>

<h2 id="2-镜像增删改查"><a href="#2-镜像增删改查" class="headerlink" title="2.镜像增删改查"></a>2.镜像增删改查</h2><p><strong>增</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#镜像仓库下载镜像</span><br><span class="line">docker pull 镜像名:TAG(不加TAG默认最新版latest)</span><br><span class="line"></span><br><span class="line">#容器内增加新内容提交生成新镜像</span><br><span class="line">docker <span class="keyword">commit</span> 容器id 镜像名:TAG</span><br><span class="line"></span><br><span class="line">#保存镜像文件导出为tar包</span><br><span class="line">docker save 镜像id</span><br><span class="line"></span><br><span class="line">#导入镜像tar包到镜像列表</span><br><span class="line">docker load 镜像id 镜像名:TAG</span><br><span class="line"></span><br><span class="line">#构建dockerfile镜像</span><br><span class="line">docker build dockerfile </span><br></pre></td></tr></table></figure>

<p><strong>删</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#删除单个镜像</span><br><span class="line">docker rm 镜像id</span><br><span class="line"></span><br><span class="line">#删除全部镜像</span><br><span class="line">docker rm `docker images <span class="operator">-</span>qa`</span><br></pre></td></tr></table></figure>

<p><strong>改</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#修改镜像文件的TAG标签</span><br><span class="line">docker tag 原镜像:TAG 原镜像:newTAG</span><br></pre></td></tr></table></figure>

<p><strong>查</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#查看镜像的构建历史层</span><br><span class="line">docker history 镜像id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看下载到本地的镜像文件</span><br><span class="line">docker images<span class="operator">=</span><span class="operator">=</span>image ls</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">赵东兴</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/">http://example.com/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E7%BD%91%E7%BB%9C%E5%AD%98%E5%82%A8/" title="容器Docker-网络存储"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">容器Docker-网络存储</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/20/%E5%AE%B9%E5%99%A8Docker-%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0/" title="容器Docker-原理概述"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">容器Docker-原理概述</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">赵东兴</div><div class="author-info__description">个人技术笔记博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2"><span class="toc-number">1.</span> <span class="toc-text">docker安装部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BC%80%E5%90%AF%E6%B5%81%E9%87%8F%E8%BD%AC%E5%8F%91"><span class="toc-number">1.1.</span> <span class="toc-text">1.开启流量转发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85docker-ce"><span class="toc-number">1.2.</span> <span class="toc-text">2.安装docker-ce</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%90%AF%E5%8A%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">3.启动第一个容器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E4%BD%93%E9%AA%8Cdocker%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">初体验docker用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%98%E6%96%B9API%E6%96%87%E6%A1%A3"><span class="toc-number">2.1.</span> <span class="toc-text">1.官方API文档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%90%9C%E7%B4%A2%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.搜索下载镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8"><span class="toc-number">2.3.</span> <span class="toc-text">3.查看镜像列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E8%AE%B0%E5%BD%95"><span class="toc-number">2.4.</span> <span class="toc-text">4.查看镜像构建记录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F%E5%8F%AF%E7%94%A8%E7%89%88%E6%9C%AC"><span class="toc-number">2.5.</span> <span class="toc-text">5.获取镜像可用版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E9%95%9C%E5%83%8F"><span class="toc-number">2.6.</span> <span class="toc-text">6.下载指定版本镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">2.7.</span> <span class="toc-text">7.指定版本运行容器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">管理容器常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E5%8F%B0%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">1.前台创建容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%8E%E5%8F%B0%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">2.后台创建容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%88%9B%E5%BB%BA"><span class="toc-number">3.3.</span> <span class="toc-text">3.端口映射创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E4%BF%A1%E6%81%AF"><span class="toc-number">3.4.</span> <span class="toc-text">4.查看容器信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E7%9B%91%E6%8E%A7%E5%AE%B9%E5%99%A8%E6%80%A7%E8%83%BD%E3%80%90%E8%B5%84%E6%BA%90%E5%88%A9%E7%94%A8%E3%80%91"><span class="toc-number">3.5.</span> <span class="toc-text">5.监控容器性能【资源利用】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E3%80%90%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E3%80%91"><span class="toc-number">3.6.</span> <span class="toc-text">6.查看容器日志【故障排查】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%85%B3%E9%97%AD%E9%87%8D%E5%90%AF%E5%AE%B9%E5%99%A8"><span class="toc-number">3.7.</span> <span class="toc-text">7.关闭重启容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%88%A0%E9%99%A4%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"><span class="toc-number">3.8.</span> <span class="toc-text">8.删除停止容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%BF%9B%E5%85%A5%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8"><span class="toc-number">3.9.</span> <span class="toc-text">9.进入运行容器内部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E5%90%8D%E8%BF%90%E8%A1%8C"><span class="toc-number">3.10.</span> <span class="toc-text">10.指定容器名运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-number">3.11.</span> <span class="toc-text">11.查看容器详细信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BF%85%E9%A1%BB%E6%9C%89%E5%89%8D%E5%8F%B0%E8%BF%9B%E7%A8%8B"><span class="toc-number">3.12.</span> <span class="toc-text">12.基础镜像运行时必须有前台进程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text">docker镜像文件详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%86%85%E6%A0%B8%E4%B8%8E%E5%8F%91%E8%A1%8C%E7%89%88"><span class="toc-number">4.1.</span> <span class="toc-text">1.内核与发行版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">4.2.</span> <span class="toc-text">2.容器镜像定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">4.3.</span> <span class="toc-text">3.镜像文件概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6"><span class="toc-number">4.4.</span> <span class="toc-text">4.创建镜像文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%95%9C%E5%83%8F%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">4.5.</span> <span class="toc-text">4.镜像分层结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">4.6.</span> <span class="toc-text">5.镜像与容器工作原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">5.</span> <span class="toc-text">docker数据目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="toc-number">5.1.</span> <span class="toc-text">1.数据根目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9B%AE%E5%BD%95"><span class="toc-number">5.2.</span> <span class="toc-text">2.存储引擎目录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E9%95%9C%E5%83%8F%E5%AE%9E%E8%B7%B5%E6%93%8D%E4%BD%9C"><span class="toc-number">6.</span> <span class="toc-text">docker镜像实践操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BD%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F"><span class="toc-number">6.1.</span> <span class="toc-text">1.下载获取镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%BF%90%E8%A1%8C%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F"><span class="toc-number">6.2.</span> <span class="toc-text">2.运行基础镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="toc-number">6.3.</span> <span class="toc-text">3.查看本地镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="toc-number">6.4.</span> <span class="toc-text">4.删除本地镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%95%9C%E5%83%8F%E5%AD%98%E6%A1%A3%E4%B8%8E%E5%AF%BC%E5%87%BA"><span class="toc-number">6.5.</span> <span class="toc-text">5.镜像存档与导出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-number">6.6.</span> <span class="toc-text">6.查看镜像详细信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%91%BD%E4%BB%A4%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0"><span class="toc-number">7.</span> <span class="toc-text">docker命令实战练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%B9%E5%99%A8%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">7.1.</span> <span class="toc-text">1.容器增删改查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%95%9C%E5%83%8F%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">7.2.</span> <span class="toc-text">2.镜像增删改查</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93Redis-%E6%9C%8D%E5%8A%A1%E4%BC%98%E5%8C%96/" title="数据库Redis-服务优化">数据库Redis-服务优化</a><time datetime="2024-08-20T03:44:08.000Z" title="Created 2024-08-20 11:44:08">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93Redis-%E5%88%86%E5%B8%83%E9%9B%86%E7%BE%A4/" title="数据库Redis-分布集群">数据库Redis-分布集群</a><time datetime="2024-08-20T03:43:56.000Z" title="Created 2024-08-20 11:43:56">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93Redis-%E5%93%A8%E5%85%B5%E5%8A%9F%E8%83%BD/" title="数据库Redis-哨兵功能">数据库Redis-哨兵功能</a><time datetime="2024-08-20T03:43:39.000Z" title="Created 2024-08-20 11:43:39">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93Redis-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" title="数据库Redis-主从复制">数据库Redis-主从复制</a><time datetime="2024-08-20T03:43:24.000Z" title="Created 2024-08-20 11:43:24">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/20/%E6%95%B0%E6%8D%AE%E5%BA%93Redis-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85/" title="数据库Redis-数据持久">数据库Redis-数据持久</a><time datetime="2024-08-20T03:43:10.000Z" title="Created 2024-08-20 11:43:10">2024-08-20</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 赵东兴</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>